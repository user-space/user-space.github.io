<!doctype html>
<html>
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <title>Unity Developers Guide | Parse</title>

  <link rel="apple-touch-icon" sizes="57x57" href="https://parse.com/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://parse.com/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://parse.com/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://parse.com/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://parse.com/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://parse.com/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://parse.com/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://parse.com/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://parse.com/apple-touch-icon-180x180.png">
  <meta name="apple-mobile-web-app-title" content="Parse">
  <link rel="icon" type="image/png" href="https://parse.com/favicon-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://parse.com/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="https://parse.com/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="https://parse.com/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="https://parse.com/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#5298fc">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="application-name" content="Parse">

  <meta name="theme-color" content="#5298fc">

      <!-- CSS -->
      <!-- build:css -->
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/default.min.css">
      <link href="/docs/css/docs.css" rel="stylesheet" />
      <link href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" rel="stylesheet" />
      <!-- endbuild -->

      <!--[if lte IE 9]>
        <script src="//cdnjs.cloudflare.com/ajax/libs/classlist/2014.01.31/classList.min.js"></script>
      <![endif]-->

      <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>

  <!--[if lt IE 8]>
      <link rel="stylesheet" type="text/css" href="/stylesheets/ie7.css" />
  <![endif]-->
  <!--[if IE 8]>
      <link rel="stylesheet" type="text/css" href="/stylesheets/ie8.css" />
  <![endif]-->
  <!--[if lt IE 10]>
      <link rel="stylesheet" type="text/css" href="/stylesheets/ie89.css" />
  <![endif]-->
  <script>if(Function('/*@cc_on return document.documentMode===10@*/')()){document.documentElement.className+=' ie10';}</script>

  <meta name="csrf-param" content="authenticity_token">
  <meta name="csrf-token" content="KxDoKysxiXDIRV8VXwDYlQStDGzjbGZ24y6ZgQLYAsE=">
  <meta name="description" content="Focus on creating unique &amp; engaging apps on any platform. We take care of everything else your app needs, from the core of your app to analytics and push notifications.">
  <meta name="keywords" content="backend, mobile, development, server, code">
  <meta property="fb:app_id" content="361736430535656">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Parse">
  <meta property="og:image" content="/docs/assets/images/social.jpg">
  <meta property="og:description" content="Focus on creating unique &amp; engaging apps on any platform. We take care of everything else your app needs, from the core of your app to analytics and push notifications.">
  <meta property="og:url" content="/unity/guide/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

  <body class="pure p_docs p_docs_show_guide user_logged_in" style="position: relative;">
  <div class="site__wrapper">
    <div class="site__content">

      <aside class="site__menu">
    <nav class="site__menu__nav">
        <ul>
            <li><a href="/migration">Migration Guide</a></li>
            <li><a href="/help">Help</a></li>
            <li><a href="/docs">Docs</a></li>
            <li><a href="http://blog.parse.com/">Blog</a></li>
        </ul>
    </nav>

    <div class="site__menu__socials">
        <h4 class="h4">Stay Connected</h4>

        <ul>
            <li>
                <a href="https://www.facebook.com/parseit">
                    <svg class="icon icon-fb"><use xlink:href="/docs/assets/symbols.svg#fb"></use></svg>
                </a>
            </li>
            <li>
                <a href="https://twitter.com/parseit">
                    <svg class="icon icon-twitter"><use xlink:href="/docs/assets/symbols.svg#twitter"></use></svg>
                </a>
            </li>
            <li>
                <a href="https://parseplatform.github.io">
                    <svg class="icon icon-github"><use xlink:href="/docs/assets/symbols.svg#github"></use></svg>
                </a>
            </li>
            <li>
                <a href="http://stackoverflow.com/questions/tagged/parse.com">
                    <svg class="icon icon-stack-overflow"><use xlink:href="/docs/assets/symbols.svg#stack-overflow"></use></svg>
                </a>
            </li>
        </ul>

        <p class="site__menu__build-together">Let&rsquo;s build together.</p>
    </div>
</aside>

      <div class="content__wrapper">
        <header class="site__header site__header--white">
    <div class="container">

        <a href="/" class="header-logo">
            <span class="hidden">Parse</span>
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 viewBox="0 0 152 60" style="enable-background:new 0 0 152 60;" xml:space="preserve">
            <g>
            	<path class="line one" d="M23.072,39.678c-0.011,3.348-2.395,4.615-4.909,4.615c-2.851,0-4.541-1.701-4.541-4.357
            		c0-2.964,2.031-4.667,5.35-4.725h13.611c6.428,0.079,10.137-5.391,10.137-9.953c0-4.598-3.485-9.598-9.622-9.842
            		c-6.083-0.242-9.99,5.281-9.99,11.167v3.863"/>
            	<path class="line two" d="M23.072,39.678c-0.011,3.348-2.395,4.615-4.909,4.615c-2.851,0-4.541-1.701-4.541-4.357
            		c0-2.964,2.031-4.667,5.35-4.725h13.611c6.428,0.079,10.137-5.391,10.137-9.953c0-4.598-3.485-9.598-9.622-9.842
            		c-6.083-0.242-9.99,5.281-9.99,11.167v3.863"/>
            	<path class="line three" d="M23.072,39.678c-0.011,3.348-2.395,4.615-4.909,4.615c-2.851,0-4.541-1.701-4.541-4.357
            		c0-2.964,2.031-4.667,5.35-4.725h13.611c6.428,0.079,10.137-5.391,10.137-9.953c0-4.598-3.485-9.598-9.622-9.842
            		c-6.083-0.242-9.99,5.281-9.99,11.167v3.863"/>
            	<path class="st1" d="M151.88,31.106c0-4.561-2.575-7.835-7.173-7.872c-5.665-0.037-9.197,4.12-9.197,10.484v0.11
            		c0,6.033,3.863,9.601,9.601,9.601c1.839,0,4.083-0.405,5.739-1.177v-3.568c-1.839,0.956-3.752,1.398-5.408,1.398
            		c-3.568,0-6.07-1.803-6.18-5.959h12.36C151.807,33.056,151.88,32.026,151.88,31.106z M148.312,31.07h-8.829
            		c0.625-3.053,2.354-4.745,4.966-4.745c2.575,0,3.863,1.729,3.863,4.561V31.07z"/>
            	<path class="st1" d="M125.725,34.712l0.405,0.147c2.869,1.03,3.531,1.655,3.531,2.906c0,1.471-0.993,2.428-3.458,2.428
            		c-1.986,0-4.12-0.662-6.364-1.692v3.752c1.803,0.699,4.12,1.177,6.364,1.177c4.819,0,7.21-2.428,7.21-5.812
            		c0-2.943-1.471-4.525-5.408-5.959l-0.405-0.147c-3.127-1.14-3.752-1.655-3.752-2.869c0-1.361,0.956-2.281,3.237-2.281
            		c1.839,0,3.642,0.589,5.408,1.435v-3.531c-1.582-0.625-3.348-1.03-5.26-1.03c-4.598,0-7.1,2.575-7.1,5.886
            		C120.134,31.695,121.679,33.24,125.725,34.712"/>
            	<path class="st1" d="M110.863,29.892c1.288-2.023,3.09-3.016,5.26-3.016c0.773,0,1.508,0.11,2.17,0.331v-3.384
            		c-0.625-0.258-1.361-0.405-2.134-0.405c-2.281,0-4.01,1.03-5.518,3.09l-0.258-2.869h-3.164v19.386h3.642V29.892z"/>
            	<path class="st1" d="M96.481,23.197c-2.281,0-4.672,0.699-6.474,1.692v3.605c2.023-1.251,4.378-2.023,6.254-2.023
            		c2.612,0,3.679,1.14,3.679,3.274v1.619c-5.334,0.147-8.461,1.03-10.116,2.685c-1.177,1.14-1.692,2.685-1.692,4.267
            		c0,3.274,2.354,5.15,5.702,5.15c2.244,0,4.378-0.92,6.327-2.796l0.221,2.354h3.164V30.003
            		C103.544,25.405,101.263,23.197,96.481,23.197z M99.938,37.728c-1.471,1.619-3.2,2.722-5.297,2.722
            		c-1.729,0-2.833-0.883-2.833-2.428c0-2.281,1.876-3.642,8.13-3.826V37.728z"/>
            	<path class="st1" d="M77.609,17.643h-8.571v25.383h3.826v-8.314h4.745c5.923,0,9.491-3.164,9.491-8.498V26.14
            		C87.1,20.806,83.532,17.643,77.609,17.643z M83.311,26.214c0,3.421-1.986,5.04-5.444,5.04h-5.003V21.101h5.04
            		c3.421,0,5.408,1.619,5.408,5.04V26.214z"/>
            	<path class="st1" d="M27.838,2.192C12.204,2.192-0.12,14.589-0.12,30.15c0,15.597,12.323,27.958,27.958,27.958
            		c15.634,0,27.958-12.36,27.958-27.958C55.795,14.589,43.472,2.192,27.838,2.192z M32.473,36.955H18.752
            		c-1.986,0-3.164,1.214-3.164,3.017c0,1.582,1.067,2.722,2.612,2.722c1.766,0,2.796-1.214,2.906-3.016h4.01
            		c-0.184,4.341-2.906,6.658-6.953,6.658c-3.789,0-6.585-2.575-6.585-6.401c0-3.973,2.98-6.769,7.394-6.769h13.611
            		c4.598,0,8.093-3.348,8.093-7.909c0-4.598-3.127-7.799-7.578-7.799c-4.414,0-7.946,3.237-7.946,9.123v3.863h-4.046v-3.863
            		c0-7.872,5.076-12.986,12.066-12.986c6.695,0,11.551,4.782,11.551,11.588C44.723,32.026,39.499,36.955,32.473,36.955z"/>
            </g>
            </svg>
        </a>

        <a href="javascript:;" class="header-hamburger" data-menu-trigger="toggle">
            <span class="header-hamburger__wrap">
                <span class="header-hamburger__line--top"></span>
                <span class="header-hamburger__line--middle"></span>
                <span class="header-hamburger__line--bottom"></span>

                <span class="header-hamburger__line--arrow-top"></span>
                <span class="header-hamburger__line--arrow-bottom"></span>
            </span>
        </a>

        <ul class="header-nav">
            <li><a href="https://parse.com/migration">Migration Guide</a></li>
            <li><a href="/docs/">Docs</a></li>
            <li><a href="http://blog.parse.com">Blog</a></li>
            <li><a href="https://parse.com/help">Help</a></li>
        </ul>

    </div><!-- container -->
</header>

        <aside class="hero hero--docs unity_docs_header">
          <div class="grid-container">
            <div class="col-md--6 col-lg--9">
              <p class="h1 h1--white" data-ignore-from-select>
                <span>Unity <em>Guide</em></span>

                <a href="/docs/" class="btn btn--back">
                  <span class="hide-mobile">Browse all platforms</span>
                  <span class="show-mobile">Browse</span>
                </a>

                <svg class="icon icon-unity"><use xlink:href="/docs/assets/symbols.svg#unity"></use></svg>

              </p>
            </div>
          </div>
        </aside><!-- .hero -->

        <div class="guide" data-nav-waypoint>
          <div id="mobile_toc" class="">
          	<select></select>
          </div>

          <div class="grid-container">
            <div class="col-md--6 col-lg--9">
              <div class="guide_content">
                <div id="toc">
                  <div style="overflow-y: scroll; height: 100%;">
                    <div class="top_links">
                    
                      <a href="https://parse.com/apps/quickstart">Quickstart<i class="icon_minimize"></i></a>
                    
                    
                    
                      <a href="/sdk/Parse-SDK-dotNET/api">API Reference<i class="icon_minimize"></i></a>
                    
                      <!-- .algolia-search-wrapper -->
                      <div class="algolia-search-wrapper">
                        <input id="algolia-doc-search" class="unity_docs_docsearch" tabindex="0" type="text" placeholder="Search..." />
                      </div><!-- .algolia-search-wrapper -->
                    </div>
                  </div>
                </div>

                <div class="wysiwyg-content">
                  
                    
                    <h1 id="getting-started">Getting Started</h1>

<p>If you’re familiar with web frameworks like ASP.NET MVC we’ve taken many of the same principles and applied them to our platform. In particular, our SDK is ready to use out of the box with minimal configuration on your part.</p>

<p>If you haven’t installed the SDK yet, please <a href="https://parse.com/apps/quickstart#parse_data/unity/new">head over to the QuickStart guide</a> to get our SDK up and running in Unity3D. Note that our SDK requires Unity version 5.2.x or higher and targets Android apps and iOS apps. You can also check out our <a href="/Parse-SDK-dotNET/api/">API Reference</a> for more detailed information about our SDK.</p>

<p>Parse’s Unity SDK makes heavy use of a subset of the <a href="http://msdn.microsoft.com/en-us/library/hh873175.aspx">Task-based Asynchronous Pattern</a> so that your apps remain responsive.</p>

<h2 id="adding-linkxml">Adding <code class="highlighter-rouge">link.xml</code></h2>

<p>Create a file and name it <code class="highlighter-rouge">link.xml</code> under your Assets folder and put the following code to make sure Parse Unity SDK works with Unity code optimization pipeline:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;linker&gt;</span>
  <span class="nt">&lt;assembly</span> <span class="na">fullname=</span><span class="s">"UnityEngine"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">fullname=</span><span class="s">"UnityEngine.iOS.NotificationServices"</span> <span class="na">preserve=</span><span class="s">"all"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">fullname=</span><span class="s">"UnityEngine.iOS.RemoteNotification"</span> <span class="na">preserve=</span><span class="s">"all"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">fullname=</span><span class="s">"UnityEngine.AndroidJavaClass"</span> <span class="na">preserve=</span><span class="s">"all"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">fullname=</span><span class="s">"UnityEngine.AndroidJavaObject"</span> <span class="na">preserve=</span><span class="s">"all"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/assembly&gt;</span>

  <span class="nt">&lt;assembly</span> <span class="na">fullname=</span><span class="s">"Parse.Unity"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;namespace</span> <span class="na">fullname=</span><span class="s">"Parse"</span> <span class="na">preserve=</span><span class="s">"all"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;namespace</span> <span class="na">fullname=</span><span class="s">"Parse.Internal"</span> <span class="na">preserve=</span><span class="s">"all"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/assembly&gt;</span>
<span class="nt">&lt;/linker&gt;</span>
</code></pre>
</div>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="objects">Objects</h1>

<h2 id="the-parseobject">The ParseObject</h2>

<p>Storing data on Parse is built around the <code class="highlighter-rouge">ParseObject</code>. Each <code class="highlighter-rouge">ParseObject</code> contains key-value pairs of JSON-compatible data. This data is schemaless, which means that you don’t need to specify ahead of time what keys exist on each <code class="highlighter-rouge">ParseObject</code>. You simply set whatever key-value pairs you want, and our backend will store it.</p>

<p>For example, let’s say you’re tracking high scores for a game. A single <code class="highlighter-rouge">ParseObject</code> could contain:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="err">score:</span><span class="w"> </span><span class="mi">1337</span><span class="err">,</span><span class="w"> </span><span class="err">playerName:</span><span class="w"> </span><span class="s2">"Sean Plott"</span><span class="err">,</span><span class="w"> </span><span class="err">cheatMode:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></code></pre>
</div>

<p>Keys must start with a letter, and can contain alphanumeric characters and underscores. Values can be strings, numbers, booleans, or even arrays and dictionaries - anything that can be JSON-encoded.</p>

<p>Each <code class="highlighter-rouge">ParseObject</code> has a class name that you can use to distinguish different sorts of data. For example, we could call the high score object a <code class="highlighter-rouge">GameScore</code>. We recommend that you NameYourClassesLikeThis and nameYourKeysLikeThis, just to keep your code looking pretty.</p>

<h2 id="saving-objects">Saving Objects</h2>

<p>Let’s say you want to save the <code class="highlighter-rouge">GameScore</code> described above to the Parse Cloud. The interface is similar to an <code class="highlighter-rouge">IDictionary&lt;string, object&gt;</code>, plus the <code class="highlighter-rouge">SaveAsync</code> method:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseObject</span> <span class="n">gameScore</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">);</span>
<span class="n">gameScore</span><span class="p">[</span><span class="s">"score"</span><span class="p">]</span> <span class="p">=</span> <span class="m">1337</span><span class="p">;</span>
<span class="n">gameScore</span><span class="p">[</span><span class="s">"playerName"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"Sean Plott"</span><span class="p">;</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">gameScore</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>After this code runs, you will probably be wondering if anything really happened. To make sure the data was saved, you can look at the Data Browser in your app on Parse. You should see something like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">objectId</span><span class="err">:</span> <span class="s2">"xWMyZ4YEGZ"</span><span class="p">,</span> <span class="nx">score</span><span class="err">:</span> <span class="mi">1337</span><span class="p">,</span> <span class="nx">playerName</span><span class="err">:</span> <span class="s2">"Sean Plott"</span><span class="p">,</span> <span class="nx">cheatMode</span><span class="err">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="nx">createdAt</span><span class="err">:</span><span class="s2">"2011-06-10T18:33:42Z"</span><span class="p">,</span> <span class="nx">updatedAt</span><span class="err">:</span><span class="s2">"2011-06-10T18:33:42Z"</span>
</code></pre>
</div>

<p>There are two things to note here. You didn’t have to configure or set up a new Class called <code class="highlighter-rouge">GameScore</code> before running this code. Your Parse app lazily creates this Class for you when it first encounters it.</p>

<p>There are also a few fields you don’t need to specify that are provided as a convenience. <code class="highlighter-rouge">ObjectId</code> is a unique identifier for each saved object. <code class="highlighter-rouge">CreatedAt</code> and <code class="highlighter-rouge">UpdatedAt</code> represent the time that each object was created and last modified in the Parse Cloud. Each of these fields is filled in by Parse, so they don’t exist on a <code class="highlighter-rouge">ParseObject</code> until a save operation has completed.</p>

<h2 id="data-types">Data Types</h2>

<p>So far we’ve used values with type <code class="highlighter-rouge">string</code> and <code class="highlighter-rouge">int</code> assigned to fields of a <code class="highlighter-rouge">ParseObject</code>. Parse also supports <code class="highlighter-rouge">double</code>, <code class="highlighter-rouge">DateTime</code>, and <code class="highlighter-rouge">null</code>. You can also nest <code class="highlighter-rouge">IDictionary&lt;string, T&gt;</code> and <code class="highlighter-rouge">IList&lt;T&gt;</code> objects to store more structured data within a single <code class="highlighter-rouge">ParseObject</code>. Overall, the following types are allowed for each field in your object:</p>

<ul>
  <li>String =&gt; <code class="highlighter-rouge">string</code></li>
  <li>Number =&gt; primitive numeric values such as <code class="highlighter-rouge">double</code>s, <code class="highlighter-rouge">long</code>s, or <code class="highlighter-rouge">float</code>s</li>
  <li>Bool =&gt; <code class="highlighter-rouge">bool</code></li>
  <li>Array =&gt; objects that implement <code class="highlighter-rouge">IList&lt;T&gt;</code></li>
  <li>Object =&gt; objects that implement <code class="highlighter-rouge">IDictionary&lt;string, T&gt;</code></li>
  <li>Date =&gt; <code class="highlighter-rouge">DateTime</code></li>
  <li>File =&gt; <code class="highlighter-rouge">ParseFile</code></li>
  <li>Pointer =&gt; other <code class="highlighter-rouge">ParseObject</code></li>
  <li>Relation =&gt; <code class="highlighter-rouge">ParseRelation</code></li>
  <li>Null =&gt; <code class="highlighter-rouge">null</code></li>
</ul>

<p>Some examples:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kt">int</span> <span class="n">number</span> <span class="p">=</span> <span class="m">42</span><span class="p">;</span>
<span class="kt">string</span> <span class="n">str</span> <span class="p">=</span> <span class="s">"the number is "</span> <span class="p">+</span> <span class="n">number</span><span class="p">;</span>
<span class="n">DateTime</span> <span class="n">date</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">;</span>
<span class="n">IList</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="n">list</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="p">{</span> <span class="n">str</span><span class="p">,</span> <span class="n">number</span> <span class="p">};</span>
<span class="n">IDictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">dictionary</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"number"</span><span class="p">,</span> <span class="n">number</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"string"</span><span class="p">,</span> <span class="n">str</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">var</span> <span class="n">bigObject</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"BigObject"</span><span class="p">);</span>
<span class="n">bigObject</span><span class="p">[</span><span class="s">"myNumber"</span><span class="p">]</span> <span class="p">=</span> <span class="n">number</span><span class="p">;</span>
<span class="n">bigObject</span><span class="p">[</span><span class="s">"myString"</span><span class="p">]</span> <span class="p">=</span> <span class="n">str</span><span class="p">;</span>
<span class="n">bigObject</span><span class="p">[</span><span class="s">"myDate"</span><span class="p">]</span> <span class="p">=</span> <span class="n">date</span><span class="p">;</span>
<span class="n">bigObject</span><span class="p">[</span><span class="s">"myList"</span><span class="p">]</span> <span class="p">=</span> <span class="n">list</span><span class="p">;</span>
<span class="n">bigObject</span><span class="p">[</span><span class="s">"myDictionary"</span><span class="p">]</span> <span class="p">=</span> <span class="n">dictionary</span><span class="p">;</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">bigObject</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>We do not recommend storing large pieces of binary data like images or documents on <code class="highlighter-rouge">ParseObject</code>. <code class="highlighter-rouge">ParseObject</code>s should not exceed 128 kilobytes in size. We recommend you use <code class="highlighter-rouge">ParseFile</code>s to store images, documents, and other types of files. You can do so by instantiating a <code class="highlighter-rouge">ParseFile</code> object and setting it on a field. See <a href="#files">Files</a> for more details.</p>

<p>For more information about how Parse handles data, check out our documentation on <a href="#data">Data</a>.</p>

<h2 id="retrieving-objects">Retrieving Objects</h2>

<p>Saving data to the cloud is fun, but it’s even more fun to get that data out again. If you have the <code class="highlighter-rouge">ObjectId</code>, you can retrieve the whole <code class="highlighter-rouge">ParseObject</code> using a <code class="highlighter-rouge">ParseQuery</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseQuery</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">);</span>
<span class="n">query</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"xWMyZ4YEGZ"</span><span class="p">).</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">ParseObject</span> <span class="n">gameScore</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
</div>

<p>To get the values out of the <code class="highlighter-rouge">ParseObject</code>, use the <code class="highlighter-rouge">Get&lt;T&gt;</code> method.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kt">int</span> <span class="n">score</span> <span class="p">=</span> <span class="n">gameScore</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="s">"score"</span><span class="p">);</span>
<span class="kt">string</span> <span class="n">playerName</span> <span class="p">=</span> <span class="n">gameScore</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"playerName"</span><span class="p">);</span>
<span class="kt">bool</span> <span class="n">cheatMode</span> <span class="p">=</span> <span class="n">gameScore</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;(</span><span class="s">"cheatMode"</span><span class="p">);</span>
</code></pre>
</div>

<p>Here are some examples for handling the various supported data types:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseObject</span> <span class="n">bigObject</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">number</span> <span class="p">=</span> <span class="n">bigObject</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="s">"myNumber"</span><span class="p">);</span>
<span class="kt">string</span> <span class="n">str</span> <span class="p">=</span> <span class="n">bigObject</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"myString"</span><span class="p">);</span>
<span class="n">DateTime</span> <span class="n">date</span> <span class="p">=</span> <span class="n">bigObject</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">DateTime</span><span class="p">&gt;(</span><span class="s">"myDate"</span><span class="p">);</span>
<span class="kt">byte</span><span class="p">[]</span> <span class="n">data</span> <span class="p">=</span> <span class="n">bigObject</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="kt">byte</span><span class="p">[</span><span class="k">]&gt;</span><span class="p">(</span><span class="s">"myData"</span><span class="p">);</span>
<span class="n">IList</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="n">list</span> <span class="p">=</span> <span class="n">bigObject</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;&gt;(</span><span class="s">"myList"</span><span class="p">);</span>
<span class="n">IDictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">dictionary</span> <span class="p">=</span> <span class="n">bigObject</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;&gt;(</span><span class="s">"myDictionary"</span><span class="p">);</span>
<span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span> <span class="p">(</span><span class="s">"Number: "</span> <span class="p">+</span> <span class="n">number</span><span class="p">);</span>
<span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span> <span class="p">(</span><span class="s">"String: "</span> <span class="p">+</span> <span class="n">str</span><span class="p">);</span>
<span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span> <span class="p">(</span><span class="s">"Date: "</span> <span class="p">+</span> <span class="n">date</span><span class="p">);</span>
<span class="kt">string</span> <span class="n">dataString</span> <span class="p">=</span> <span class="n">System</span><span class="p">.</span><span class="n">Text</span><span class="p">.</span><span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
<span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span> <span class="p">(</span><span class="s">"Data: "</span> <span class="p">+</span> <span class="n">dataString</span><span class="p">);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="n">var</span> <span class="n">item</span> <span class="k">in</span> <span class="n">list</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span> <span class="p">(</span><span class="s">"Item: "</span> <span class="p">+</span> <span class="n">item</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
<span class="p">}</span>
<span class="k">foreach</span> <span class="p">(</span><span class="n">var</span> <span class="n">key</span> <span class="k">in</span> <span class="n">dictionary</span><span class="p">.</span><span class="n">Keys</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span> <span class="p">(</span><span class="s">"Key: "</span> <span class="p">+</span> <span class="n">key</span> <span class="p">+</span> <span class="s">" Value: "</span> <span class="p">+</span> <span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">].</span><span class="nf">ToString</span><span class="p">());</span>
<span class="p">}</span>
</code></pre>
</div>

<p>The three special values are provided as properties:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kt">string</span> <span class="n">objectId</span> <span class="p">=</span> <span class="n">gameScore</span><span class="p">.</span><span class="n">ObjectId</span><span class="p">;</span>
<span class="n">DateTime</span><span class="p">?</span> <span class="n">updatedAt</span> <span class="p">=</span> <span class="n">gameScore</span><span class="p">.</span><span class="n">UpdatedAt</span><span class="p">;</span>
<span class="n">DateTime</span><span class="p">?</span> <span class="n">createdAt</span> <span class="p">=</span> <span class="n">gameScore</span><span class="p">.</span><span class="n">CreatedAt</span><span class="p">;</span>
</code></pre>
</div>

<p>If you need to get an object’s latest data from Parse, you can call the <code class="highlighter-rouge">FetchAsync</code> method like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">Task</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">fetchTask</span> <span class="p">=</span> <span class="n">myObject</span><span class="p">.</span><span class="nf">FetchAsync</span><span class="p">();</span>
</code></pre>
</div>

<h2 id="updating-objects">Updating Objects</h2>

<p>Updating an object is simple. Just set some new data on it and call one of the save methods. For example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Create the object.
</span><span class="n">var</span> <span class="n">gameScore</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"score"</span><span class="p">,</span> <span class="m">1337</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"playerName"</span><span class="p">,</span> <span class="s">"Sean Plott"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"cheatMode"</span><span class="p">,</span> <span class="k">false</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"skills"</span><span class="p">,</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="p">{</span> <span class="s">"pwnage"</span><span class="p">,</span> <span class="s">"flying"</span> <span class="p">}</span> <span class="p">},</span>
<span class="p">};</span>
<span class="n">gameScore</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="c1">// Now let's update it with some new data.  In this case, only cheatMode
</span>    <span class="c1">// and score will get sent to the cloud.  playerName hasn't changed.
</span>    <span class="n">gameScore</span><span class="p">[</span><span class="s">"cheatMode"</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="n">gameScore</span><span class="p">[</span><span class="s">"score"</span><span class="p">]</span> <span class="p">=</span> <span class="m">1338</span><span class="p">;</span>
    <span class="n">gameScore</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
</div>

<p>The client automatically figures out which data has changed so only “dirty” fields will be sent to Parse. You don’t need to worry about squashing data that you didn’t intend to update.</p>

<h3 id="counters">Counters</h3>

<p>The above example contains a common use case. The “score” field is a counter that we’ll need to continually update with the player’s latest score. Using the above method works but it’s cumbersome and can lead to problems if you have multiple clients trying to update the same counter.</p>

<p>To help with storing counter-type data, Parse provides methods that atomically increment (or decrement) any number field. So, the same update can be rewritten as:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">gameScore</span><span class="p">.</span><span class="nf">Increment</span><span class="p">(</span><span class="s">"score"</span><span class="p">);</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">gameScore</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>You can also increment by any amount using <code class="highlighter-rouge">Increment(key, amount)</code>.</p>

<h3 id="lists">Lists</h3>

<p>To help with storing list data, there are three operations that can be used to atomically change a list field:</p>

<ul>
  <li><code class="highlighter-rouge">AddToList</code> and <code class="highlighter-rouge">AddRangeToList</code> append the given objects to the end of an list field.</li>
  <li><code class="highlighter-rouge">AddUniqueToList</code> and <code class="highlighter-rouge">AddRangeUniqueToList</code> add only the given objects which aren’t already contained in an list field to that field. The position of the insert is not guaranteed.</li>
  <li><code class="highlighter-rouge">RemoveAllFromList</code> removes all instances of each given object from an array field.</li>
</ul>

<p>For example, we can add items to the set-like “skills” field like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">gameScore</span><span class="p">.</span><span class="nf">AddRangeUniqueToList</span><span class="p">(</span><span class="s">"skills"</span><span class="p">,</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"flying"</span><span class="p">,</span> <span class="s">"kungfu"</span> <span class="p">});</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">gameScore</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>Note that it is not currently possible to atomically add and remove items from a list in the same save. You will have to call <code class="highlighter-rouge">save</code> in between every different kind of list operation.</p>

<h2 id="deleting-objects">Deleting Objects</h2>

<p>To delete an object from the cloud:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">Task</span> <span class="n">deleteTask</span> <span class="p">=</span> <span class="n">myObject</span><span class="p">.</span><span class="nf">DeleteAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>You can delete a single field from an object with the <code class="highlighter-rouge">Remove</code> method:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// After this, the playerName field will be empty
</span><span class="n">myObject</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">);</span>

<span class="c1">// Saves the field deletion to the Parse Cloud
</span><span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">myObject</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<h2 id="relational-data">Relational Data</h2>

<p>Objects can have relationships with other objects. To model one-to-many relationships, any <code class="highlighter-rouge">ParseObject</code> can be used as a value in other <code class="highlighter-rouge">ParseObject</code>s. Internally, the Parse framework will store the referred-to object in just one place to maintain consistency.</p>

<p>For example, each <code class="highlighter-rouge">Comment</code> in a blogging app might correspond to one <code class="highlighter-rouge">Post</code>. To create a new <code class="highlighter-rouge">Post</code> with a single <code class="highlighter-rouge">Comment</code>, you could write:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Create the post
</span><span class="n">var</span> <span class="n">myPost</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"Post"</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"title"</span><span class="p">,</span> <span class="s">"I'm Hungry"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"content"</span><span class="p">,</span> <span class="s">"Where should we go for lunch?"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Create the comment
</span><span class="n">var</span> <span class="n">myComment</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"Comment"</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"content"</span><span class="p">,</span> <span class="s">"Let's do Sushirrito."</span> <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Add a relation between the Post and Comment
</span><span class="n">myComment</span><span class="p">[</span><span class="s">"parent"</span><span class="p">]</span> <span class="p">=</span> <span class="n">myPost</span><span class="p">;</span>

<span class="c1">// This will save both myPost and myComment
</span><span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">myComment</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>You can also link objects using just their <code class="highlighter-rouge">ObjectId</code>s like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">myComment</span><span class="p">[</span><span class="s">"parent"</span><span class="p">]</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">CreateWithoutData</span><span class="p">(</span><span class="s">"Post"</span><span class="p">,</span> <span class="s">"1zEcyElZ80"</span><span class="p">);</span>
</code></pre>
</div>

<p>By default, when fetching an object, related <code class="highlighter-rouge">ParseObject</code>s are not fetched.  These objects’ values cannot be retrieved until they have been fetched like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseObject</span> <span class="n">post</span> <span class="p">=</span> <span class="n">fetchedComment</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;(</span><span class="s">"parent"</span><span class="p">);</span>
<span class="n">Task</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">fetchTask</span> <span class="p">=</span> <span class="n">post</span><span class="p">.</span><span class="nf">FetchIfNeededAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>For a many-to-many relationship, use the <code class="highlighter-rouge">ParseRelation</code> object.  This works similar to a <code class="highlighter-rouge">List&lt;ParseObject&gt;</code>, except that you don’t need to download all the objects in a relation at once.  This allows <code class="highlighter-rouge">ParseRelation</code> to scale to many more objects than the <code class="highlighter-rouge">List&lt;ParseObject&gt;</code> approach.  For example, a <code class="highlighter-rouge">ParseUser</code> may have many <code class="highlighter-rouge">Post</code>s that they might like.  In this case, you can store the set of <code class="highlighter-rouge">Post</code>s that a <code class="highlighter-rouge">ParseUser</code> likes using <code class="highlighter-rouge">GetRelation</code>.  In order to add a post to the list, the code would look something like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">user</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">;</span>
<span class="n">var</span> <span class="n">relation</span> <span class="p">=</span> <span class="n">user</span><span class="p">.</span><span class="n">GetRelation</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;(</span><span class="s">"likes"</span><span class="p">);</span>
<span class="n">relation</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">post</span><span class="p">);</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">user</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>You can remove a post from the <code class="highlighter-rouge">ParseRelation</code> with something like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">relation</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="n">post</span><span class="p">);</span>
</code></pre>
</div>

<p>By default, the list of objects in this relation are not downloaded.  You can get the list of <code class="highlighter-rouge">Post</code>s by using calling <code class="highlighter-rouge">FindAsync</code> on the <code class="highlighter-rouge">ParseQuery</code> returned by <code class="highlighter-rouge">Query</code>.  The code would look like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">relation</span><span class="p">.</span><span class="n">Query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">relatedObjects</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
</div>

<p>If you want only a subset of the <code class="highlighter-rouge">Post</code>s you can add extra constraints to the <code class="highlighter-rouge">ParseQuery</code> returned by <code class="highlighter-rouge">Query</code> like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">relation</span><span class="p">.</span><span class="n">Query</span>
    <span class="p">.</span><span class="nf">WhereGreaterThan</span><span class="p">(</span><span class="s">"createdAt"</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span> <span class="p">-</span> <span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromDays</span><span class="p">(</span><span class="m">10</span><span class="p">));</span>
    <span class="c1">// alternatively, add any other query constraints
</span><span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">relatedObjects</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
</div>

<p>For more details on <code class="highlighter-rouge">ParseQuery</code> please look at the <a href="#queries">query</a> portion of this guide.  A <code class="highlighter-rouge">ParseRelation</code> behaves similar to a <code class="highlighter-rouge">List&lt;ParseObject&gt;</code>, so any queries you can do on lists of objects you can do on <code class="highlighter-rouge">ParseRelation</code>s.</p>

<h2 id="subclasses">Subclasses</h2>

<p>Parse is designed to get you up and running as quickly as possible. You can access all of your data using the <code class="highlighter-rouge">ParseObject</code> class and access any field with <code class="highlighter-rouge">Get&lt;T&gt;()</code>. In mature codebases, subclasses have many advantages, including terseness, extensibility, type-safety, and support for code completion. Subclassing is completely optional, but can transform this code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Using dictionary-initialization syntax:
</span><span class="n">var</span> <span class="n">shield</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"Armor"</span><span class="p">)</span>
<span class="p">{</span>
  <span class="p">{</span> <span class="s">"displayName"</span><span class="p">,</span> <span class="s">"Wooden Shield"</span> <span class="p">},</span>
  <span class="p">{</span> <span class="s">"fireproof"</span><span class="p">,</span> <span class="k">false</span> <span class="p">},</span>
  <span class="p">{</span> <span class="s">"rupees"</span><span class="p">,</span> <span class="m">50</span> <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// And later:
</span><span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="n">shield</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"displayName"</span><span class="p">));</span>
<span class="n">shield</span><span class="p">[</span><span class="s">"fireproof"</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="n">shield</span><span class="p">[</span><span class="s">"rupees"</span><span class="p">]</span> <span class="p">=</span> <span class="m">500</span><span class="p">;</span>
</code></pre>
</div>

<p>Into this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Using object-initialization syntax:
</span><span class="n">var</span> <span class="n">shield</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Armor</span>
<span class="p">{</span>
  <span class="n">DisplayName</span> <span class="p">=</span> <span class="s">"Wooden Shield"</span><span class="p">,</span>
  <span class="n">IsFireproof</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span>
  <span class="n">Rupees</span> <span class="p">=</span> <span class="m">50</span>
<span class="p">};</span>

<span class="c1">// And later:
</span><span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="n">shield</span><span class="p">.</span><span class="n">DisplayName</span><span class="p">);</span>
<span class="n">shield</span><span class="p">.</span><span class="n">IsFireproof</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="n">shield</span><span class="p">.</span><span class="n">Rupees</span> <span class="p">=</span> <span class="m">500</span><span class="p">;</span>
</code></pre>
</div>

<h3 id="subclassing-parseobject">Subclassing ParseObject</h3>

<p>To create a <code class="highlighter-rouge">ParseObject</code> subclass:</p>

<ol>
  <li>Declare a subclass which extends <code class="highlighter-rouge">ParseObject</code>.</li>
  <li>Add a <code class="highlighter-rouge">ParseClassName</code> attribute. Its value should be the string you would pass into the <code class="highlighter-rouge">ParseObject</code> constructor, and makes all future class name references unnecessary.</li>
  <li>Ensure that your subclass has a public default (i.e. zero-argument) constructor. You must not modify any <code class="highlighter-rouge">ParseObject</code> fields in this constructor.</li>
  <li>Call <code class="highlighter-rouge">ParseObject.RegisterSubclass&lt;YourClass&gt;()</code> in a <code class="highlighter-rouge">MonoBehaviour</code>’s <code class="highlighter-rouge">Awake</code> method and attach this to your Parse initialization <code class="highlighter-rouge">GameObject.</code>.</li>
</ol>

<p>The following code sucessfully implements and registers the <code class="highlighter-rouge">Armor</code> subclass of <code class="highlighter-rouge">ParseObject</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Armor.cs
</span><span class="k">using</span> <span class="nn">Parse</span><span class="p">;</span>

<span class="na">[ParseClassName("Armor")]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Armor</span> <span class="p">:</span> <span class="n">ParseObject</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="c1">// ExtraParseInitialization.cs (attach to your Parse
// initialization GameObject)
</span><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Parse</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">ExtraParseInitialization</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
  <span class="k">void</span> <span class="nf">Awake</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="n">ParseObject</span><span class="p">.</span><span class="n">RegisterSubclass</span><span class="p">&lt;</span><span class="n">Armor</span><span class="p">&gt;();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<h3 id="properties-and-methods">Properties and Methods</h3>

<p>Adding methods and properties to your <code class="highlighter-rouge">ParseObject</code> subclass helps encapsulate logic about the class. You can keep all your logic about a subject in one place rather than using separate classes for business logic and storage/transmission logic.</p>

<p>You can add properties for the fields of your <code class="highlighter-rouge">ParseObject</code> easily. Declare the getter and setter for the field as you normally would, but implement them in terms of <code class="highlighter-rouge">GetProperty&lt;T&gt;()</code> and <code class="highlighter-rouge">SetProperty&lt;T&gt;()</code>. Finally, add a <code class="highlighter-rouge">ParseFieldName</code> attribute to the property to fully integrate the property with Parse, enabling functionality like automatically raising <code class="highlighter-rouge">INotifyPropertyChanged</code> notifications for your objects. The following example creates a <code class="highlighter-rouge">displayName</code> field in the <code class="highlighter-rouge">Armor</code> class:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Armor.cs
</span><span class="na">[ParseClassName("Armor")]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Armor</span> <span class="p">:</span> <span class="n">ParseObject</span>
<span class="p">{</span>
  <span class="p">[</span><span class="nf">ParseFieldName</span><span class="p">(</span><span class="s">"displayName"</span><span class="p">)]</span>
  <span class="k">public</span> <span class="kt">string</span> <span class="n">DisplayName</span>
  <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">GetProperty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"DisplayName"</span><span class="p">);</span> <span class="p">}</span>
    <span class="k">set</span> <span class="p">{</span> <span class="n">SetProperty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="k">value</span><span class="p">,</span> <span class="s">"DisplayName"</span><span class="p">);</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>You can now access the displayName field using <code class="highlighter-rouge">armor.DisplayName</code> and assign to it using <code class="highlighter-rouge">armor.DisplayName = "Wooden Sword"</code>. This allows your IDE to provide autocompletion as you develop your app and allows typos to be caught at compile-time.</p>

<p><code class="highlighter-rouge">ParseRelation</code>-typed properties can also be easily defined using <code class="highlighter-rouge">GetRelationProperty&lt;T&gt;</code>. For example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Armor.cs
</span><span class="na">[ParseClassName("Armor")]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Armor</span> <span class="p">:</span> <span class="n">ParseObject</span>
<span class="p">{</span>
  <span class="p">[</span><span class="nf">ParseFieldName</span><span class="p">(</span><span class="s">"attributes"</span><span class="p">)]</span>
  <span class="k">public</span> <span class="n">ParseRelation</span><span class="p">&lt;</span><span class="n">ArmorAttribute</span><span class="p">&gt;</span> <span class="n">Attributes</span>
  <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">GetRelationProperty</span><span class="p">&lt;</span><span class="n">ArmorAttribute</span><span class="p">&gt;(</span><span class="s">"Attributes"</span><span class="p">);</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>If you need more complicated logic than simple field access, you can declare your own methods as well:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">TakeDamage</span><span class="p">(</span><span class="kt">int</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Decrease the armor's durability and determine whether it has broken
</span>  <span class="k">this</span><span class="p">.</span><span class="nf">Increment</span><span class="p">(</span><span class="s">"durability"</span><span class="p">,</span> <span class="p">-</span><span class="n">amount</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Durability</span> <span class="p">&lt;</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="n">IsBroken</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<h3 id="initializing-subclasses">Initializing Subclasses</h3>

<p>You should create new instances of your subclasses using the constructors you have defined. Your subclass must define a public default constructor that does not modify fields of the <code class="highlighter-rouge">ParseObject</code>, which will be used throughout the Parse SDK to create strongly-typed instances of your subclass.</p>

<p>To create a reference to an existing object, use <code class="highlighter-rouge">ParseObject.CreateWithoutData&lt;T&gt;()</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">armorReference</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="n">CreateWithoutData</span><span class="p">&lt;</span><span class="n">Armor</span><span class="p">&gt;(</span><span class="n">armor</span><span class="p">.</span><span class="n">ObjectId</span><span class="p">);</span>
</code></pre>
</div>

<h3 id="queries">Queries</h3>

<p>You can get a query for objects of a particular subclass using the generic <code class="highlighter-rouge">ParseQuery&lt;T&gt;</code> class. The following example queries for armors that the user can afford:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ParseQuery</span><span class="p">&lt;</span><span class="n">Armor</span><span class="p">&gt;()</span>
    <span class="p">.</span><span class="nf">WhereLessThanOrEqualTo</span><span class="p">(</span><span class="s">"rupees"</span><span class="p">,</span> <span class="p">((</span><span class="n">Player</span><span class="p">)</span><span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">).</span><span class="n">Rupees</span><span class="p">);</span>
<span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Armor</span><span class="p">&gt;</span> <span class="n">result</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
</div>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="queries">Queries</h1>

<p>We’ve already seen how a <code class="highlighter-rouge">ParseQuery</code> with <code class="highlighter-rouge">GetAsync</code> can retrieve a single <code class="highlighter-rouge">ParseObject</code> from Parse. There are many other ways to retrieve data with <code class="highlighter-rouge">ParseQuery</code> - you can retrieve many objects at once, put conditions on the objects you wish to retrieve, and more.</p>

<h2 id="basic-queries">Basic Queries</h2>

<p>In many cases, <code class="highlighter-rouge">GetAsync</code> isn’t powerful enough to specify which objects you want to retrieve. The <code class="highlighter-rouge">ParseQuery</code> offers different ways to retrieve a list of objects rather than just a single object.</p>

<p>The general pattern is to create a <code class="highlighter-rouge">ParseQuery</code>, constraints to it, and then retrieve an <code class="highlighter-rouge">IEnumerable</code> of matching <code class="highlighter-rouge">ParseObjects</code>s using <code class="highlighter-rouge">FindAsync</code>.</p>

<p>For example, to retrieve scores with a particular <code class="highlighter-rouge">playerName</code>, use a “where” clause to constrain the value for a key.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">,</span> <span class="s">"Dan Stemkoski"</span><span class="p">);</span>
<span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">results</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
</div>

<h2 id="query-constraints">Query Constraints</h2>

<p>There are several ways to put constraints on the objects found by a <code class="highlighter-rouge">ParseQuery</code>. You can filter out objects with a particular key-value pair with a call to <code class="highlighter-rouge">WhereNotEqualTo</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereNotEqualTo</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">,</span> <span class="s">"Michael Yabuti"</span><span class="p">);</span>
</code></pre>
</div>

<p>You can give multiple constraints, and objects will only be in the results if they match all of the constraints.  In other words, it’s like an AND of constraints.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereNotEqualTo</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">,</span> <span class="s">"Michael Yabuti"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereGreaterThan</span><span class="p">(</span><span class="s">"playerAge"</span><span class="p">,</span> <span class="m">18</span><span class="p">);</span>
</code></pre>
</div>

<p>You can limit the number of results by calling <code class="highlighter-rouge">Limit</code>. By default, results are limited to 100, but anything from 1 to 1000 is a valid limit:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">Limit</span><span class="p">(</span><span class="m">10</span><span class="p">);</span> <span class="c1">// limit to at most 10 results
</span></code></pre>
</div>

<p>If you want exactly one result, a more convenient alternative may be to use <code class="highlighter-rouge">FirstAsync</code> or <code class="highlighter-rouge">FirstOrDefaultAsync</code> instead of using <code class="highlighter-rouge">FindAsync</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"playerEmail"</span><span class="p">,</span> <span class="s">"dstemkoski@example.com"</span><span class="p">);</span>
<span class="n">query</span><span class="p">.</span><span class="nf">FirstAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">ParseObject</span> <span class="n">obj</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
</div>

<p>You can skip the first results by calling <code class="highlighter-rouge">Skip</code>. This can be useful for pagination:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">Skip</span><span class="p">(</span><span class="m">10</span><span class="p">);</span> <span class="c1">// skip the first 10 results
</span></code></pre>
</div>

<p>For sortable types like numbers and strings, you can control the order in which results are returned:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Sorts the results in ascending order by score and descending order by playerName
</span><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="s">"score"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">ThenByDescending</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">);</span>
</code></pre>
</div>

<p>For sortable types, you can also use comparisons in queries:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Restricts to wins &lt; 50
</span><span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">WhereLessThan</span><span class="p">(</span><span class="s">"wins"</span><span class="p">,</span> <span class="m">50</span><span class="p">);</span>

<span class="c1">// Restricts to wins &lt;= 50
</span><span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">WhereLessThanOrEqualTo</span><span class="p">(</span><span class="s">"wins"</span><span class="p">,</span> <span class="m">50</span><span class="p">);</span>

<span class="c1">// Restricts to wins &gt; 50
</span><span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">WhereGreaterThan</span><span class="p">(</span><span class="s">"wins"</span><span class="p">,</span> <span class="m">50</span><span class="p">);</span>

<span class="c1">// Restricts to wins &gt;= 50
</span><span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">WhereGreaterThanOrEqualTo</span><span class="p">(</span><span class="s">"wins"</span><span class="p">,</span> <span class="m">50</span><span class="p">);</span>
</code></pre>
</div>

<p>If you want to retrieve objects matching several different values, you can use <code class="highlighter-rouge">WhereContainedIn</code>, providing an list of acceptable values. This is often useful to replace multiple queries with a single query. For example, if you want to retrieve scores made by any player in a particular list:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Finds scores from any of Jonathan, Dario, or Shawn
</span><span class="n">var</span> <span class="n">names</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"Jonathan Walsh"</span><span class="p">,</span> <span class="s">"Dario Wunsch"</span><span class="p">,</span> <span class="s">"Shawn Simon"</span> <span class="p">};</span>
<span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereContainedIn</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">,</span> <span class="n">names</span><span class="p">);</span>
</code></pre>
</div>

<p>If you want to retrieve objects that do not match any of several values you can use <code class="highlighter-rouge">WhereNotContainedIn</code>, providing an list of acceptable values. For example, if you want to retrieve scores from players besides those in a list:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Finds scores from any of Jonathan, Dario, or Shawn
</span><span class="n">var</span> <span class="n">names</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"Jonathan Walsh"</span><span class="p">,</span> <span class="s">"Dario Wunsch"</span><span class="p">,</span> <span class="s">"Shawn Simon"</span> <span class="p">};</span>
<span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereNotContainedIn</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">,</span> <span class="n">names</span><span class="p">);</span>
</code></pre>
</div>

<p>If you want to retrieve objects that have a particular key set, you can use <code class="highlighter-rouge">WhereExists</code>. Conversely, if you want to retrieve objects without a particular key set, you can use <code class="highlighter-rouge">WhereDoesNotExist</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Finds objects that have the score set
</span><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereExists</span><span class="p">(</span><span class="s">"score"</span><span class="p">);</span>

<span class="c1">// Finds objects that don't have the score set
</span><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereDoesNotExist</span><span class="p">(</span><span class="s">"score"</span><span class="p">);</span>
</code></pre>
</div>

<p>You can use the <code class="highlighter-rouge">WhereMatchesKeyInQuery</code> method to get objects where a key matches the value of a key in a set of objects resulting from another query.  For example, if you have a class containing sports teams and you store a user’s hometown in the user class, you can issue one query to find the list of users whose hometown teams have winning records.  The query would look like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">teamQuery</span> <span class="p">=</span> <span class="n">ParseQuery</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Team"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereGreaterThan</span><span class="p">(</span><span class="s">"winPct"</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
<span class="n">var</span> <span class="n">userQuery</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">Query</span>
    <span class="p">.</span><span class="nf">WhereMatchesKeyInQuery</span><span class="p">(</span><span class="s">"hometown"</span><span class="p">,</span> <span class="s">"city"</span><span class="p">,</span> <span class="n">teamQuery</span><span class="p">);</span>
<span class="n">userQuery</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseUser</span><span class="p">&gt;</span> <span class="n">results</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
<span class="p">});</span>
<span class="c1">// results will contain users with a hometown team with a winning record
</span></code></pre>
</div>

<h2 id="queries-on-list-values">Queries on List Values</h2>

<p>For keys with an array type, you can find objects where the key’s array value contains 2 by:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Find objects where the list in listKey contains 2.
</span><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"MyClass"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"listKey"</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span>
</code></pre>
</div>

<h2 id="queries-on-string-values">Queries on String Values</h2>

<div class="tip info"><div>
 If you're trying to implement a generic search feature, we recommend taking a look at this blog post: <a href="http://blog.parse.com/learn/engineering/implementing-scalable-search-on-a-nosql-backend/">Implementing Scalable Search on a NoSQL Backend</a>.
</div></div>

<p>Use <code class="highlighter-rouge">WhereStartsWith</code> to restrict to string values that start with a particular string. Similar to a MySQL LIKE operator, this is indexed so it is efficient for large datasets:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Finds barbecue sauces that start with "Big Daddy's".
</span><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"BarbecueSauce"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereStartsWith</span><span class="p">(</span><span class="s">"name"</span><span class="p">,</span> <span class="s">"Big Daddy's"</span><span class="p">);</span>
</code></pre>
</div>

<p>The above example will match any <code class="highlighter-rouge">BarbecueSauce</code> objects where the value in the “name” String key starts with “Big Daddy’s”. For example, both “Big Daddy’s” and “Big Daddy’s BBQ” will match, but “big daddy’s” or “BBQ Sauce: Big Daddy’s” will not.</p>

<p>Queries that have regular expression constraints are very expensive. Refer to the <a href="#performance-regular-expressions">Performance Guide</a> for more details.</p>

<h2 id="relational-queries">Relational Queries</h2>

<p>There are several ways to issue queries for relational data. If you want to retrieve objects where a field matches a particular <code class="highlighter-rouge">ParseObject</code>, you can use <code class="highlighter-rouge">WhereEqualTo</code> just like for other data types. For example, if each <code class="highlighter-rouge">Comment</code> has a <code class="highlighter-rouge">Post</code> object in its <code class="highlighter-rouge">post</code> field, you can fetch comments for a particular <code class="highlighter-rouge">Post</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Assume ParseObject myPost was previously created.
</span><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Comment"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"post"</span><span class="p">,</span> <span class="n">myPost</span><span class="p">);</span>

<span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">comments</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
    <span class="c1">// comments now contains the comments for myPost
</span><span class="p">});</span>
</code></pre>
</div>

<p>You can also do relational queries by <code class="highlighter-rouge">ObjectId</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Comment"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"post"</span><span class="p">,</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">CreateWithoutData</span><span class="p">(</span><span class="s">"Post"</span><span class="p">,</span> <span class="s">"1zEcyElZ80"</span><span class="p">));</span>
</code></pre>
</div>

<p>If you want to retrieve objects where a field contains a <code class="highlighter-rouge">ParseObject</code> that matches a different query, you can use <code class="highlighter-rouge">WhereMatchesQuery</code>. Note that the default limit of 100 and maximum limit of 1000 apply to the inner query as well, so with large data sets you may need to construct queries carefully to get the desired behavior. In order to find comments for posts with images, you can do:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">imagePosts</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Post"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereExists</span><span class="p">(</span><span class="s">"image"</span><span class="p">);</span>
<span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Comment"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereMatchesQuery</span><span class="p">(</span><span class="s">"post"</span><span class="p">,</span> <span class="n">imagePosts</span><span class="p">);</span>

<span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">comments</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
    <span class="c1">// comments now contains the comments for posts with images
</span><span class="p">});</span>
</code></pre>
</div>

<p>If you want to retrieve objects where a field contains a <code class="highlighter-rouge">ParseObject</code> that does not match a different query, you can use <code class="highlighter-rouge">WhereDoesNotMatchQuery</code>.  In order to find comments for posts without images, you can do:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">imagePosts</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Post"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereExists</span><span class="p">(</span><span class="s">"image"</span><span class="p">);</span>
<span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Comment"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereDoesNotMatchQuery</span><span class="p">(</span><span class="s">"post"</span><span class="p">,</span> <span class="n">imagePosts</span><span class="p">);</span>

<span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">comments</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
    <span class="c1">// comments now contains the cmoments for posts without images
</span><span class="p">});</span>
</code></pre>
</div>

<p>In some situations, you want to return multiple types of related objects in one query. You can do this with the <code class="highlighter-rouge">Include</code> method. For example, let’s say you are retrieving the last ten comments, and you want to retrieve their related posts at the same time:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Retrieve the most recent comments
</span><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Comment"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">OrderByDescending</span><span class="p">(</span><span class="s">"createdAt"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">Limit</span><span class="p">(</span><span class="m">10</span><span class="p">)</span> <span class="c1">// Only retrieve the last 10 comments
</span>    <span class="p">.</span><span class="nf">Include</span><span class="p">(</span><span class="s">"post"</span><span class="p">);</span> <span class="c1">// Include the post data with each comment
</span>
<span class="c1">// Only retrieve the last 10 comments
</span><span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">Limit</span><span class="p">(</span><span class="m">10</span><span class="p">);</span>

<span class="c1">// Include the post data with each comment
</span><span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">Include</span><span class="p">(</span><span class="s">"post"</span><span class="p">);</span>

<span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">comments</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>

    <span class="c1">// Comments now contains the last ten comments, and the "post" field
</span>    <span class="c1">// contains an object that has already been fetched.  For example:
</span>    <span class="k">foreach</span> <span class="p">(</span><span class="n">var</span> <span class="n">comment</span> <span class="k">in</span> <span class="n">comments</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// This does not require a network access.
</span>        <span class="n">var</span> <span class="n">post</span> <span class="p">=</span> <span class="n">comment</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;(</span><span class="s">"post"</span><span class="p">);</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"Post title: "</span> <span class="p">+</span> <span class="n">post</span><span class="p">[</span><span class="s">"title"</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<p>You can also do multi level includes using dot notation.  If you wanted to include the post for a comment and the post’s author as well you can do:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">Include</span><span class="p">(</span><span class="s">"post.author"</span><span class="p">);</span>
</code></pre>
</div>

<p>You can issue a query with multiple fields included by calling <code class="highlighter-rouge">Include</code> multiple times. This functionality also works with <code class="highlighter-rouge">ParseQuery</code> helpers like <code class="highlighter-rouge">FirstAsync</code> and <code class="highlighter-rouge">GetAsync</code></p>

<h2 id="counting-objects">Counting Objects</h2>

<p>Caveat: Count queries are rate limited to a maximum of 160 requests per minute.  They can also return inaccurate results for classes with more than 1,000 objects.  Thus, it is preferable to architect your application to avoid this sort of count operation (by using counters, for example.)</p>

<p>If you just need to count how many objects match a query, but you do not need to retrieve the objects that match, you can use <code class="highlighter-rouge">CountAsync</code> instead of <code class="highlighter-rouge">FindAsync</code>. For example, to count how many games have been played by a particular player:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// First set up a callback.
</span><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">,</span> <span class="s">"Sean Plott"</span><span class="p">);</span>
<span class="n">query</span><span class="p">.</span><span class="nf">CountAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">count</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
</div>

<h2 id="compound-queries">Compound Queries</h2>

<p>If you want to find objects that match one of several queries, you can use the <code class="highlighter-rouge">Or</code> method.  For instance, if you want to find players that either have a lot of wins or a few wins, you can do:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">lotsOfWins</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Player"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereGreaterThan</span><span class="p">(</span><span class="s">"wins"</span><span class="p">,</span> <span class="m">150</span><span class="p">);</span>

<span class="n">var</span> <span class="n">fewWins</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Player"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereLessThan</span><span class="p">(</span><span class="s">"wins"</span><span class="p">,</span> <span class="m">5</span><span class="p">);</span>

<span class="n">ParseQuery</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">query</span> <span class="p">=</span> <span class="n">lotsOfWins</span><span class="p">.</span><span class="nf">Or</span><span class="p">(</span><span class="n">fewWins</span><span class="p">);</span>
<span class="c1">// results contains players with lots of wins or only a few wins.
</span></code></pre>
</div>

<p>You can add additional constraints to the newly created <code class="highlighter-rouge">ParseQuery</code> that act as an ‘and’ operator.</p>

<p>Note that we do not, however, support GeoPoint or non-filtering constraints (e.g. <code class="highlighter-rouge">Near</code>, <code class="highlighter-rouge">WhereWithinGeoBox</code>, <code class="highlighter-rouge">Limit</code>, <code class="highlighter-rouge">Skip</code>, <code class="highlighter-rouge">OrderBy...</code>, <code class="highlighter-rouge">Include</code>) in the subqueries of the compound query.</p>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="users">Users</h1>

<p>At the core of many apps, there is a notion of user accounts that lets users access their information in a secure manner. We provide a specialized user class called <code class="highlighter-rouge">ParseUser</code> that automatically handles much of the functionality required for user account management.</p>

<p>With this class, you’ll be able to add user account functionality in your app.</p>

<p><code class="highlighter-rouge">ParseUser</code> is a subclass of <code class="highlighter-rouge">ParseObject</code> and has all the same features, such as flexible schema, automatic persistence, and a key value interface. All the methods that are on <code class="highlighter-rouge">ParseObject</code> also exist in <code class="highlighter-rouge">ParseUser</code>. The difference is that ParseUser has some special additions specific to user accounts.</p>

<h2 id="properties">Properties</h2>

<p><code class="highlighter-rouge">ParseUser</code> has several properties that set it apart from <code class="highlighter-rouge">ParseObject</code>:</p>

<ul>
  <li><code class="highlighter-rouge">Username</code>: The username for the user (required).</li>
  <li><code class="highlighter-rouge">Password</code>: The password for the user (required on signup).</li>
  <li><code class="highlighter-rouge">Email</code>: The email address for the user (optional).</li>
</ul>

<p>We’ll go through each of these in detail as we run through the various use cases for users. Keep in mind that if you set <code class="highlighter-rouge">Username</code> and <code class="highlighter-rouge">Email</code> through these properties, you do not need to set it using the indexer on <code class="highlighter-rouge">ParseObject</code> — this is set for you automatically.</p>

<h2 id="signing-up">Signing Up</h2>

<p>The first thing your app will do is probably ask the user to sign up. The following code illustrates a typical sign up:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">user</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseUser</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Username</span> <span class="p">=</span> <span class="s">"my name"</span><span class="p">,</span>
    <span class="n">Password</span> <span class="p">=</span> <span class="s">"my pass"</span><span class="p">,</span>
    <span class="n">Email</span> <span class="p">=</span> <span class="s">"email@example.com"</span>
<span class="p">};</span>

<span class="c1">// other fields can be set just like with ParseObject
</span><span class="n">user</span><span class="p">[</span><span class="s">"phone"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"415-392-0202"</span><span class="p">;</span>

<span class="n">Task</span> <span class="n">signUpTask</span> <span class="p">=</span> <span class="n">user</span><span class="p">.</span><span class="nf">SignUpAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>This call will asynchronously create a new user in your Parse App. Before it does this, it also checks to make sure that both the username and email are unique. Also, it securely hashes the password in the cloud using bcrypt. We never store passwords in plaintext, nor will we ever transmit passwords back to the client in plaintext.</p>

<p>Note that we used the <code class="highlighter-rouge">SignUpAsync</code> method, not the <code class="highlighter-rouge">SaveAsync</code> method. New <code class="highlighter-rouge">ParseUser</code>s should always be created using the <code class="highlighter-rouge">SignUpAsync</code> method. Subsequent updates to a user can be done by calling <code class="highlighter-rouge">SaveAsync</code>.</p>

<p>If a signup isn’t successful, you should catch the exception thrown by the <code class="highlighter-rouge">SignUpAsync</code>. The most likely case is that the username or email has already been taken by another user. You should clearly communicate this to your users, and ask them try a different username.</p>

<p>You are free to use an email address as the username. Simply ask your users to enter their email, but fill it in both the <code class="highlighter-rouge">Username</code> and <code class="highlighter-rouge">Email</code> properties — <code class="highlighter-rouge">ParseObject</code> will work as normal. We’ll go over how this is handled in the reset password section.</p>

<h2 id="logging-in">Logging In</h2>

<p>Of course, after you allow users to sign up, you need to let them log in to their account in the future. To do this, you can use the class method <code class="highlighter-rouge">LogInAsync</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseUser</span><span class="p">.</span><span class="nf">LogInAsync</span><span class="p">(</span><span class="s">"myname"</span><span class="p">,</span> <span class="s">"mypass"</span><span class="p">).</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">IsFaulted</span> <span class="p">||</span> <span class="n">t</span><span class="p">.</span><span class="n">IsCanceled</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// The login failed. Check the error to see why.
</span>    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">// Login was successful.
</span>    <span class="p">}</span>
<span class="p">})</span>
</code></pre>
</div>

<h2 id="verifying-emails">Verifying Emails</h2>

<p>Enabling email verification in an application’s settings allows the application to reserve part of its experience for users with confirmed email addresses. Email verification adds the <code class="highlighter-rouge">emailVerified</code> key to the <code class="highlighter-rouge">ParseUser</code> object. When a <code class="highlighter-rouge">ParseUser</code>’s <code class="highlighter-rouge">Email</code> is set or modified, <code class="highlighter-rouge">emailVerified</code> is set to <code class="highlighter-rouge">false</code>. Parse then emails the user a link which will set <code class="highlighter-rouge">emailVerified</code> to <code class="highlighter-rouge">true</code>.</p>

<p>There are three <code class="highlighter-rouge">emailVerified</code> states to consider:</p>

<ol>
  <li><code class="highlighter-rouge">true</code> - the user confirmed his or her email address by clicking on the link Parse emailed them. <code class="highlighter-rouge">ParseUser</code>s can never have a <code class="highlighter-rouge">true</code> value when the user account is first created.</li>
  <li><code class="highlighter-rouge">false</code> - at the time the <code class="highlighter-rouge">ParseUser</code> object was last refreshed, the user had not confirmed his or her email address. If <code class="highlighter-rouge">emailVerified</code> is <code class="highlighter-rouge">false</code>, consider calling <code class="highlighter-rouge">FetchAsync</code> on the <code class="highlighter-rouge">ParseUser</code>.</li>
  <li><em>missing</em> - the <code class="highlighter-rouge">ParseUser</code> was created when email verification was off or the <code class="highlighter-rouge">ParseUser</code> does not have an <code class="highlighter-rouge">email</code>.</li>
</ol>

<h2 id="current-user">Current User</h2>

<p>It would be bothersome if the user had to log in every time they open your app. You can avoid this by using the cached <code class="highlighter-rouge">ParseUser.CurrentUser</code> object.</p>

<p>Whenever you use any signup or login methods, the user is cached on disk. You can treat this cache as a session, and automatically assume the user is logged in:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// do stuff with the user
</span><span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="c1">// show the signup or login screen
</span><span class="p">}</span>
</code></pre>
</div>

<p>You can clear the current user by logging them out:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseUser</span><span class="p">.</span><span class="nf">LogOut</span><span class="p">();</span>
<span class="n">var</span> <span class="n">currentUser</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">;</span> <span class="c1">// this will now be null
</span></code></pre>
</div>

<h2 id="security-for-user-objects">Security For User Objects</h2>

<p>The <code class="highlighter-rouge">ParseUser</code> class is secured by default. Data stored in a <code class="highlighter-rouge">ParseUser</code> can only be modified by that user. By default, the data can still be read by any client. Thus, some <code class="highlighter-rouge">ParseUser</code> objects are authenticated and can be modified, whereas others are read-only.</p>

<p>Specifically, you are not able to invoke the <code class="highlighter-rouge">SaveAsync</code> or <code class="highlighter-rouge">DeleteAsync</code> methods unless the <code class="highlighter-rouge">ParseUser</code> was obtained using an authenticated method, like <code class="highlighter-rouge">LogInAsync</code> or <code class="highlighter-rouge">SignUpAsync</code>. This ensures that only the user can alter their own data.</p>

<p>The following illustrates this security policy:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseUser</span> <span class="n">user</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
<span class="n">ParseUser</span><span class="p">.</span><span class="nf">LogInAsync</span><span class="p">(</span><span class="s">"my_username"</span><span class="p">,</span> <span class="s">"my_password"</span><span class="p">).</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">user</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
    <span class="n">user</span><span class="p">.</span><span class="n">Username</span> <span class="p">=</span> <span class="s">"my_new_username"</span><span class="p">;</span> <span class="c1">// attempt to change username
</span>    <span class="k">return</span> <span class="n">user</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
<span class="p">}).</span><span class="nf">Unwrap</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(!</span><span class="n">t</span><span class="p">.</span><span class="n">IsFaulted</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// This succeeds, since this user was authenticated
</span>        <span class="c1">// on the device
</span>
        <span class="n">ParseUser</span><span class="p">.</span><span class="nf">LogOut</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}).</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="c1">// Get the user from a non-authenticated method
</span>    <span class="k">return</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">Query</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="n">ObjectId</span><span class="p">);</span>
<span class="p">}).</span><span class="nf">Unwrap</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">user</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
    <span class="n">user</span><span class="p">.</span><span class="n">Username</span> <span class="p">=</span> <span class="s">"another_username"</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">user</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
<span class="p">}).</span><span class="nf">Unwrap</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">IsFaulted</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// This will always fail, since the ParseUser is not authenticated
</span>    <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<p>The <code class="highlighter-rouge">ParseUser</code> obtained from <code class="highlighter-rouge">Current</code> will always be authenticated.</p>

<p>If you need to check if a <code class="highlighter-rouge">ParseUser</code> is authenticated, you can check the <code class="highlighter-rouge">IsAuthenticated</code> property. You do not need to check <code class="highlighter-rouge">IsAuthenticated</code> with <code class="highlighter-rouge">ParseUser</code> objects that are obtained via an authenticated method.</p>

<h2 id="security-for-other-objects">Security For Other Objects</h2>

<p>The same security model that applies to the <code class="highlighter-rouge">ParseUser</code> can be applied to other objects. For any object, you can specify which users are allowed to read the object, and which users are allowed to modify an object. To support this type of security, each object has an <a href="http://en.wikipedia.org/wiki/Access_control_list">access control list</a>, implemented by the <code class="highlighter-rouge">ParseACL</code> class.</p>

<p>The simplest way to use a <code class="highlighter-rouge">ParseACL</code> is to specify that an object may only be read or written by a single user. To create such an object, there must first be a logged in <code class="highlighter-rouge">ParseUser</code>. Then, the <code class="highlighter-rouge">ParseACL</code> constructor generates a <code class="highlighter-rouge">ParseACL</code> that limits access to that user. An object’s ACL is updated when the object is saved, like any other property. Thus, to create a private note that can only be accessed by the current user:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">privateNote</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"Note"</span><span class="p">);</span>
<span class="n">privateNote</span><span class="p">[</span><span class="s">"content"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"This note is private!"</span><span class="p">;</span>
<span class="n">privateNote</span><span class="p">.</span><span class="n">ACL</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseACL</span><span class="p">(</span><span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">);</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">privateNote</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>This note will then only be accessible to the current user, although it will be accessible to any device where that user is signed in. This functionality is useful for applications where you want to enable access to user data across multiple devices, like a personal todo list.</p>

<p>Permissions can also be granted on a per-user basis. You can add permissions individually to a <code class="highlighter-rouge">ParseACL</code> using <code class="highlighter-rouge">SetReadAccess</code> and <code class="highlighter-rouge">SetWriteAccess</code>. For example, let’s say you have a message that will be sent to a group of several users, where each of them have the rights to read and delete that message:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">groupMessage</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"Message"</span><span class="p">);</span>
<span class="n">var</span> <span class="n">groupACL</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseACL</span><span class="p">();</span>

<span class="c1">// userList is an IEnumerable&lt;ParseUser&gt; with the users we are sending
// this message to.
</span><span class="k">foreach</span> <span class="p">(</span><span class="n">var</span> <span class="n">user</span> <span class="k">in</span> <span class="n">userList</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">groupACL</span><span class="p">.</span><span class="nf">SetReadAccess</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
    <span class="n">groupACL</span><span class="p">.</span><span class="nf">SetWriteAccess</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">groupMessage</span><span class="p">.</span><span class="n">ACL</span> <span class="p">=</span> <span class="n">groupACL</span><span class="p">;</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">groupMessage</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>You can also grant permissions to all users at once using the <code class="highlighter-rouge">PublicReadAccess</code> and <code class="highlighter-rouge">PublicWriteAccess</code> properties. This allows patterns like posting comments on a message board. For example, to create a post that can only be edited by its author, but can be read by anyone:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">publicPost</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"Post"</span><span class="p">);</span>
<span class="n">var</span> <span class="n">postACL</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseACL</span><span class="p">(</span><span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">PublicReadAccess</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
    <span class="n">PublicWriteAccess</span> <span class="p">=</span> <span class="k">false</span>
<span class="p">};</span>
<span class="n">publicPost</span><span class="p">.</span><span class="n">ACL</span> <span class="p">=</span> <span class="n">postACL</span><span class="p">;</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">publicPost</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>Operations that are forbidden, such as deleting an object that you do not have write access to, result in a <code class="highlighter-rouge">ParseException</code> with an <code class="highlighter-rouge">OtherCause</code> error code. For security purposes, this prevents clients from distinguishing which object ids exist but are secured, versus which object ids do not exist at all.</p>

<h2 id="resetting-passwords">Resetting Passwords</h2>

<p>As soon as you introduce passwords into a system, users will forget them. In such cases, our library provides a way to let them securely reset their password.</p>

<p>To kick off the password reset flow, ask the user for their email address, and call:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">Task</span> <span class="n">requestPasswordTask</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="nf">RequestPasswordResetAsync</span><span class="p">(</span><span class="s">"email@example.com"</span><span class="p">);</span>
</code></pre>
</div>

<p>This will attempt to match the given email with the user’s email or username field, and will send them a password reset email. By doing this, you can opt to have users use their email as their username, or you can collect it separately and store it in the email field.</p>

<p>The flow for password reset is as follows:</p>

<ol>
  <li>User requests that their password be reset by typing in their email.</li>
  <li>Parse sends an email to their address, with a special password reset link.</li>
  <li>User clicks on the reset link, and is directed to a special Parse page that will allow them type in a new password.</li>
  <li>User types in a new password. Their password has now been reset to a value they specify.</li>
</ol>

<p>Note that the messaging in this flow will reference your app by the name that you specified when you created this app on Parse.</p>

<h2 id="querying">Querying</h2>

<p>To query for users, you need to use the special user query:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseUser</span><span class="p">.</span><span class="n">Query</span>
    <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"gender"</span><span class="p">,</span> <span class="s">"female"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseUser</span><span class="p">&gt;</span> <span class="n">women</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
    <span class="p">});</span>
</code></pre>
</div>

<p>In addition, you can use <code class="highlighter-rouge">GetAsync</code> to get a <code class="highlighter-rouge">ParseUser</code> by id.</p>

<h2 id="associations">Associations</h2>

<p>Associations involving a <code class="highlighter-rouge">ParseUser</code> work right out of the box. For example, let’s say you’re making a blogging app. To store a new post for a user and retrieve all their posts:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Make a new post
</span><span class="n">var</span> <span class="n">post</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"Post"</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"title"</span><span class="p">,</span> <span class="s">"My New Post"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"body"</span><span class="p">,</span> <span class="s">"This is some great content."</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">"user"</span><span class="p">,</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span> <span class="p">}</span>
<span class="p">};</span>
<span class="n">post</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="c1">// Find all posts by the current user
</span>    <span class="k">return</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Post"</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"user"</span><span class="p">,</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">FindAsync</span><span class="p">();</span>
<span class="p">}).</span><span class="nf">Unwrap</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">userPosts</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
</div>

<h2 id="facebook-users">Facebook Users</h2>

<p>Parse provides an easy way to integrate Facebook with your application. The <code class="highlighter-rouge">ParseFacebookUtils</code> class integrates with <code class="highlighter-rouge">ParseUser</code> to make linking your users to their Facebook identities easy.</p>

<p>Using our Facebook integration, you can associate an authenticated Facebook user with a <code class="highlighter-rouge">ParseUser</code>. With just a few lines of code, you’ll be able to provide a “log in with Facebook” option in your app, and be able to save their data to Parse.</p>

<h3 id="setup">Setup</h3>

<p>To start using Facebook with Parse, you need to:</p>

<ol>
  <li><a href="https://developers.facebook.com/apps">Set up a Facebook app</a>, if you haven’t already. In the “Advanced” tab of your app’s settings page, Make sure that your app’s “App Type” (in the “Authentication” section) is set to “Native/Desktop” and “Is your App Secret embedded?” is set to No.</li>
  <li>Add your application’s Facebook Application ID on your Parse application’s settings page.</li>
</ol>

<p>There are two main ways to use Facebook with your Parse users: (1) logging in as a Facebook user and creating a <code class="highlighter-rouge">ParseUser</code>, or (2) linking Facebook to an existing <code class="highlighter-rouge">ParseUser</code>.</p>

<h3 id="login--signup">Login &amp; Signup</h3>

<p><code class="highlighter-rouge">ParseFacebookUtils</code> provides a way to allow your <code class="highlighter-rouge">ParseUser</code>s to log in or sign up through Facebook. This is accomplished using the <code class="highlighter-rouge">LogInAsync()</code> method. Use the Facebook Unity SDK to log into Facebook, then call <code class="highlighter-rouge">LogInAsync()</code> with the access token information:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">Task</span><span class="p">&lt;</span><span class="n">ParseUser</span><span class="p">&gt;</span> <span class="n">logInTask</span> <span class="p">=</span> <span class="n">ParseFacebookUtils</span><span class="p">.</span><span class="nf">LogInAsync</span><span class="p">(</span><span class="n">userId</span><span class="p">,</span> <span class="n">accessToken</span><span class="p">,</span> <span class="n">tokenExpiration</span><span class="p">);</span>
</code></pre>
</div>

<p>When this code is run, our SDK receives the Facebook data and saves it to a <code class="highlighter-rouge">ParseUser</code>. If it’s a new user based on the Facebook ID, then that user is created.</p>

<p>When this code is run, the following happens:</p>

<ol>
  <li>The user is shown the Facebook login dialog.</li>
  <li>The user authenticates via Facebook, and your app receives a callback.</li>
  <li>Our SDK receives the user’s Facebook access data and saves it to a <code class="highlighter-rouge">ParseUser</code>. If no <code class="highlighter-rouge">ParseUser</code> exists with the same Facebook ID, then a new <code class="highlighter-rouge">ParseUser</code> is created.</li>
  <li>The current user reference will be updated to this user.</li>
</ol>

<h3 id="linking">Linking</h3>

<p>If you want to associate an existing <code class="highlighter-rouge">ParseUser</code> with a Facebook account, you can link it like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(!</span><span class="n">ParseFacebookUtils</span><span class="p">.</span><span class="nf">IsLinked</span><span class="p">(</span><span class="n">user</span><span class="p">))</span>
<span class="p">{</span>
    <span class="n">Task</span> <span class="n">linkTask</span> <span class="p">=</span> <span class="n">ParseFacebookUtils</span><span class="p">.</span><span class="nf">LinkAsync</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">userId</span><span class="p">,</span> <span class="n">accessToken</span><span class="p">,</span> <span class="n">tokenExpiration</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>

<p>The steps that happen when linking are very similar to log in. The difference is that on successful login, the existing <code class="highlighter-rouge">ParseUser</code> is updated with the Facebook information. Future logins via Facebook will now log the user into their existing account.</p>

<p>If you want to unlink a Facebook account from a user, simply do this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">Task</span> <span class="n">unlinkTask</span> <span class="p">=</span> <span class="n">ParseFacebookUtils</span><span class="p">.</span><span class="nf">UnlinkAsync</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
</code></pre>
</div>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="sessions">Sessions</h1>

<p>Sessions represent an instance of a user logged into a device. Sessions are automatically created when users log in or sign up. They are automatically deleted when users log out. There is one distinct <code class="highlighter-rouge">Session</code> object for each user-installation pair; if a user issues a login request from a device they’re already logged into, that user’s previous <code class="highlighter-rouge">Session</code> object for that Installation is automatically deleted. <code class="highlighter-rouge">Session</code> objects are stored on Parse in the Session class, and you can view them on the Parse.com Data Browser. We provide a set of APIs to manage <code class="highlighter-rouge">Session</code> objects in your app.</p>

<p><code class="highlighter-rouge">Session</code> is a subclass of a Parse <code class="highlighter-rouge">Object</code>, so you can query, update, and delete sessions in the same way that you manipulate normal objects on Parse. Because the Parse Cloud automatically creates sessions when you log in or sign up users, you should not manually create <code class="highlighter-rouge">Session</code> objects unless you are building a “Parse for IoT” app (e.g. Arduino or Embedded C). Deleting a <code class="highlighter-rouge">Session</code> will log the user out of the device that is currently using this session’s token.</p>

<p>Unlike other Parse objects, the <code class="highlighter-rouge">Session</code> class does not have Cloud Code triggers. So you cannot register a <code class="highlighter-rouge">beforeSave</code> or <code class="highlighter-rouge">afterSave</code> handler for the Session class.</p>

<h2 id="properties">Properties</h2>

<p>The <code class="highlighter-rouge">Session</code> object has these special fields:</p>

<ul>
  <li><code class="highlighter-rouge">sessionToken</code> (readonly): String token for authentication on Parse API requests. In the response of <code class="highlighter-rouge">Session</code> queries, only your current <code class="highlighter-rouge">Session</code> object will contain a session token.</li>
  <li><code class="highlighter-rouge">user</code>: (readonly) Pointer to the <code class="highlighter-rouge">User</code> object that this session is for.</li>
  <li><code class="highlighter-rouge">createdWith</code> (readonly): Information about how this session was created (e.g. <code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"login"</span><span class="p">,</span><span class="w"> </span><span class="nt">"authProvider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">}</span></code>).
    <ul>
      <li><code class="highlighter-rouge">action</code> could have values: <code class="highlighter-rouge">login</code>, <code class="highlighter-rouge">signup</code>, <code class="highlighter-rouge">create</code>, or <code class="highlighter-rouge">upgrade</code>. The <code class="highlighter-rouge">create</code> action is when the developer manually creates the session by saving a <code class="highlighter-rouge">Session</code> object.  The <code class="highlighter-rouge">upgrade</code> action is when the user is upgraded to revocable session from a legacy session token.</li>
      <li><code class="highlighter-rouge">authProvider</code> could have values: <code class="highlighter-rouge">password</code>, <code class="highlighter-rouge">anonymous</code>, <code class="highlighter-rouge">facebook</code>, or <code class="highlighter-rouge">twitter</code>.</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">restricted</code> (readonly): Boolean for whether this session is restricted.
    <ul>
      <li>Restricted sessions do not have write permissions on <code class="highlighter-rouge">User</code>, <code class="highlighter-rouge">Session</code>, and <code class="highlighter-rouge">Role</code> classes on Parse. Restricted sessions also cannot read unrestricted sessions.</li>
      <li>All sessions that the Parse Cloud automatically creates during user login/signup will be unrestricted. All sessions that the developer manually creates by saving a new <code class="highlighter-rouge">Session</code> object from the client (only needed for “Parse for IoT” apps) will be restricted.</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">expiresAt</code> (readonly): Approximate UTC date when this <code class="highlighter-rouge">Session</code> object will be automatically deleted. You can configure session expiration settings (either 1-year inactivity expiration or no expiration) in your app’s Parse.com dashboard settings page.</li>
  <li><code class="highlighter-rouge">installationId</code> (can be set only once): String referring to the <code class="highlighter-rouge">Installation</code> where the session is logged in from. For Parse SDKs, this field will be automatically set when users log in or sign up.
All special fields except <code class="highlighter-rouge">installationId</code> can only be set automatically by the Parse Cloud. You can add custom fields onto <code class="highlighter-rouge">Session</code> objects, but please keep in mind that any logged-in device (with session token) can read other sessions that belong to the same user (unless you disable Class-Level Permissions, see below).</li>
</ul>

<h2 id="handling-invalid-session-token-error">Handling Invalid Session Token Error</h2>

<p>Apps created on Parse.com before March 25, 2015 use legacy session tokens until you <a href="https://www.parse.com/tutorials/session-migration-tutorial">migrate them to use the new revocable sessions</a>. On API requests with legacy tokens, if the token is invalid (e.g. User object was deleted), then the request is executed as a non-logged in user and no error was returned. On API requests with revocable session tokens, an invalid session token will always fail with the “invalid session token” error. This new behavior lets you know when you need to ask the user to log in again.</p>

<p>With revocable sessions, your current session token could become invalid if its corresponding <code class="highlighter-rouge">Session</code> object is deleted from the Parse Cloud. This could happen if you implement a Session Manager UI that lets users log out of other devices, or if you manually delete the session via Cloud Code, REST API, or Data Browser. Sessions could also be deleted due to automatic expiration (if configured in app settings). When a device’s session token no longer corresponds to a <code class="highlighter-rouge">Session</code> object on the Parse Cloud, all API requests from that device will fail with “Error 209: invalid session token”.</p>

<p>To handle this error, we recommend writing a global utility function that is called by all of your Parse request error callbacks. You can then handle the “invalid session token” error in this global function. You should prompt the user to login again so that they can obtain a new session token. This code could look like this:</p>

<div class="common-lang-block objectivec highlighter-rouge"><pre class="highlight"><code><span class="c1">// Objective-C
</span><span class="k">@interface</span> <span class="nc">ParseErrorHandlingController</span> <span class="p">:</span> <span class="nc">NSObject</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">handleParseError</span><span class="p">:(</span><span class="n">NSError</span> <span class="o">*</span><span class="p">)</span><span class="nv">error</span><span class="p">;</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">ParseErrorHandlingController</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">handleParseError</span><span class="p">:(</span><span class="n">NSError</span> <span class="o">*</span><span class="p">)</span><span class="nv">error</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">[</span><span class="n">error</span><span class="p">.</span><span class="n">domain</span> <span class="nf">isEqualToString</span><span class="p">:</span><span class="n">PFParseErrorDomain</span><span class="p">])</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">switch</span> <span class="p">(</span><span class="n">error</span><span class="p">.</span><span class="n">code</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">kPFErrorInvalidSessionToken</span><span class="p">:</span> <span class="p">{</span>
      <span class="p">[</span><span class="n">self</span> <span class="nf">_handleInvalidSessionTokenError</span><span class="p">];</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">...</span> <span class="c1">// Other Parse API Errors that you want to explicitly handle.
</span>  <span class="p">}</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">_handleInvalidSessionTokenError</span> <span class="p">{</span>
  <span class="c1">//--------------------------------------
</span>  <span class="c1">// Option 1: Show a message asking the user to log out and log back in.
</span>  <span class="c1">//--------------------------------------
</span>  <span class="c1">// If the user needs to finish what they were doing, they have the opportunity to do so.
</span>  <span class="c1">//
</span>  <span class="c1">// UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Invalid Session"
</span>  <span class="c1">//                                                     message:@"Session is no longer valid, please log out and log in again."
</span>  <span class="c1">//                                                    delegate:self
</span>  <span class="c1">//                                           cancelButtonTitle:@"Not Now"
</span>  <span class="c1">//                                           otherButtonTitles:@"OK"];
</span>  <span class="c1">// [alertView show];
</span>
  <span class="c1">//--------------------------------------
</span>  <span class="c1">// Option #2: Show login screen so user can re-authenticate.
</span>  <span class="c1">//--------------------------------------
</span>  <span class="c1">// You may want this if the logout button is inaccessible in the UI.
</span>  <span class="c1">//
</span>  <span class="c1">// UIViewController *presentingViewController = [UIApplication sharedApplication].keyWindow.rootViewController;
</span>  <span class="c1">// PFLogInViewController *logInViewController = [[PFLogInViewController alloc] init];
</span>  <span class="c1">// [presentingViewController presentViewController:logInViewController animated:YES completion:nil];
</span><span class="p">}</span>

<span class="k">@end</span>

<span class="c1">// In all API requests, call the global error handler, e.g.
</span><span class="p">[[</span><span class="n">PFQuery</span> <span class="nf">queryWithClassName</span><span class="p">:</span><span class="s">@"Object"</span><span class="p">]</span> <span class="nf">findInBackgroundWithBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="n">objects</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Query succeeded - continue your app logic here.
</span>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Query failed - handle an error.
</span>    <span class="p">[</span><span class="n">ParseErrorHandlingController</span> <span class="nf">handleParseError</span><span class="p">:</span><span class="n">error</span><span class="p">]</span><span class="err">;</span>
  <span class="p">}</span>
<span class="p">}];</span>
</code></pre>
</div>

<div class="common-lang-block swift highlighter-rouge"><pre class="highlight"><code>// Swift
class ParseErrorHandlingController {
  class func handleParseError(error: NSError) {
    if error.domain != PFParseErrorDomain {
      return
    }

    switch (error.code) {
    case kPFErrorInvalidSessionToken:
      handleInvalidSessionTokenError()

    ... // Other Parse API Errors that you want to explicitly handle.
  }

  private class func handleInvalidSessionTokenError() {
    //--------------------------------------
    // Option 1: Show a message asking the user to log out and log back in.
    //--------------------------------------
    // If the user needs to finish what they were doing, they have the opportunity to do so.
    //
    // let alertView = UIAlertView(
    //   title: "Invalid Session",
    //   message: "Session is no longer valid, please log out and log in again.",
    //   delegate: nil,
    //   cancelButtonTitle: "Not Now",
    //   otherButtonTitles: "OK"
    // )
    // alertView.show()

    //--------------------------------------
    // Option #2: Show login screen so user can re-authenticate.
    //--------------------------------------
    // You may want this if the logout button is inaccessible in the UI.
    //
    // let presentingViewController = UIApplication.sharedApplication().keyWindow?.rootViewController
    // let logInViewController = PFLogInViewController()
    // presentingViewController?.presentViewController(logInViewController, animated: true, completion: nil)
  }
}

// In all API requests, call the global error handler, e.g.
let query = PFQuery(className: "Object")
query.findObjectsInBackgroundWithBlock { (objects: [AnyObject]!, error: NSError!) -&gt; Void in
  if error == nil {
    // Query Succeeded - continue your app logic here.
  } else {
    // Query Failed - handle an error.
    ParseErrorHandlingController.handleParseError(error)
  }
}
</code></pre>
</div>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ParseErrorHandler</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">handleParseError</span><span class="o">(</span><span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">switch</span> <span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getCode</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">case</span> <span class="nl">INVALID_SESSION_TOKEN:</span> <span class="n">handleInvalidSessionToken</span><span class="o">()</span>
        <span class="k">break</span><span class="o">;</span>

      <span class="o">...</span> <span class="c1">// Other Parse API errors that you want to explicitly handle</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">handleInvalidSessionToken</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">//--------------------------------------</span>
    <span class="c1">// Option 1: Show a message asking the user to log out and log back in.</span>
    <span class="c1">//--------------------------------------</span>
    <span class="c1">// If the user needs to finish what they were doing, they have the opportunity to do so.</span>
    <span class="c1">//</span>
    <span class="c1">// new AlertDialog.Builder(getActivity())</span>
    <span class="c1">//   .setMessage("Session is no longer valid, please log out and log in again.")</span>
    <span class="c1">//   .setCancelable(false).setPositiveButton("OK", ...).create().show();</span>

    <span class="c1">//--------------------------------------</span>
    <span class="c1">// Option #2: Show login screen so user can re-authenticate.</span>
    <span class="c1">//--------------------------------------</span>
    <span class="c1">// You may want this if the logout button could be inaccessible in the UI.</span>
    <span class="c1">//</span>
    <span class="c1">// startActivityForResult(new ParseLoginBuilder(getActivity()).build(), 0);</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// In all API requests, call the global error handler, e.g.</span>
<span class="n">query</span><span class="o">.</span><span class="na">findInBackground</span><span class="o">(</span><span class="k">new</span> <span class="n">FindCallback</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">results</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">e</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// Query successful, continue other app logic</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="c1">// Query failed</span>
      <span class="n">ParseErrorHandler</span><span class="o">.</span><span class="na">handleParseError</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">handleParseError</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">code</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Error</span><span class="p">.</span><span class="nx">INVALID_SESSION_TOKEN</span><span class="err">:</span>
      <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">logOut</span><span class="p">();</span>
      <span class="p">...</span> <span class="c1">// If web browser, render a log in screen</span>
      <span class="p">...</span> <span class="c1">// If Express.js, redirect the user to the log in route</span>
      <span class="k">break</span><span class="p">;</span>

    <span class="p">...</span> <span class="c1">// Other Parse API errors that you want to explicitly handle</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// For each API request, call the global error handler</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">handleParseError</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ParseErrorHandler</span> <span class="p">{</span>
  <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">HandleParseError</span><span class="p">(</span><span class="n">ParseException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Code</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="n">ParseException</span><span class="p">.</span><span class="n">ErrorCode</span><span class="p">.</span><span class="n">InvalidSessionToken</span><span class="p">:</span>
        <span class="nf">HandleInvalidSessionToken</span><span class="p">()</span>
        <span class="k">break</span><span class="p">;</span>

      <span class="p">...</span> <span class="c1">// Other Parse API errors that you want to explicitly handle
</span>    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">HandleInvalidSessionToken</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//--------------------------------------
</span>    <span class="c1">// Option 1: Show a message asking the user to log out and log back in.
</span>    <span class="c1">//--------------------------------------
</span>    <span class="c1">// If the user needs to finish what they were doing, they have the opportunity to do so.
</span>
    <span class="c1">//--------------------------------------
</span>    <span class="c1">// Option #2: Show login screen so user can re-authenticate.
</span>    <span class="c1">//--------------------------------------
</span>    <span class="c1">// You may want this if the logout button is inaccessible in the UI.
</span>  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// In all API requests, call the global error handler, e.g.
</span><span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">IsFaulted</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Query Failed - handle an error.
</span>    <span class="n">ParseErrorHandler</span><span class="p">.</span><span class="nf">HandleParseError</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">Exception</span><span class="p">.</span><span class="n">InnerException</span> <span class="k">as</span> <span class="n">ParseException</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Query Succeeded - continue your app logic here.
</span>  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>public class ParseErrorHandler {
  public static handleParseError(ParseException $e) {
    $code = $e-&gt;getCode();
    switch ($code) {
      case: 209: // INVALID_SESSION_TOKEN
        ParseUser::logOut();
        ... // Redirect the to login page.
        break;

      ... // Other Parse API errors that you want to explicitly handle
    }
  }
});

// For each API request, call the global error handler
try {
  $results = $query-&gt;find();
  // ...
} catch (ParseException $e) {
  ParseErrorHandler::handleParseError($e)
}
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code>// No <span class="nb">command </span>line example
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<h2 id="security">Security</h2>

<p><code class="highlighter-rouge">Session</code> objects can only be accessed by the user specified in the user field. All <code class="highlighter-rouge">Session</code> objects have an ACL that is read and write by that user only. You cannot change this ACL. This means querying for sessions will only return objects that match the current logged-in user.</p>

<p>When you log in a user via a <code class="highlighter-rouge">User</code> login method, Parse will automatically create a new unrestricted <code class="highlighter-rouge">Session</code> object in the Parse Cloud. Same for signups and Facebook/Twitter logins.</p>

<p>Session objects manually created from client SDKs (by creating an instance of <code class="highlighter-rouge">Session</code>, and saving it) are always restricted. You cannot manually create an unrestricted sessions using the object creation API.</p>

<p>Restricted sessions are prohibited from creating, modifying, or deleting any data in the <code class="highlighter-rouge">User</code>, <code class="highlighter-rouge">Session</code>, and <code class="highlighter-rouge">Role</code> classes. Restricted session also cannot read unrestricted sessions. Restricted Sessions are useful for “Parse for IoT” devices (e.g Arduino or Embedded C) that may run in a less-trusted physical environment than mobile apps. However, please keep in mind that restricted sessions can still read data on <code class="highlighter-rouge">User</code>, <code class="highlighter-rouge">Session</code>, and <code class="highlighter-rouge">Role</code> classes, and can read/write data in any other class just like a normal session. So it is still important for IoT devices to be in a safe physical environment and ideally use encrypted storage to store the session token.</p>

<p>If you want to prevent restricted Sessions from modifying classes other than <code class="highlighter-rouge">User</code>, <code class="highlighter-rouge">Session</code>, or <code class="highlighter-rouge">Role</code>, you can write a Cloud Code <code class="highlighter-rouge">beforeSave</code> handler for that class:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">beforeSave</span><span class="p">(</span><span class="s2">"MyClass"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Parse</span><span class="p">.</span><span class="nx">Session</span><span class="p">.</span><span class="nx">current</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">session</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'restricted'</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'write operation not allowed'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>
<p>You can configure Class-Level Permissions (CLPs) for the Session class just like other classes on Parse. CLPs restrict reading/writing of sessions via the <code class="highlighter-rouge">Session</code> API, but do not restrict Parse Cloud’s automatic session creation/deletion when users log in, sign up, and log out. We recommend that you disable all CLPs not needed by your app. Here are some common use cases for Session CLPs:</p>

<ul>
  <li><strong>Find</strong>, <strong>Delete</strong> — Useful for building a UI screen that allows users to see their active session on all devices, and log out of sessions on other devices. If your app does not have this feature, you should disable these permissions.</li>
  <li><strong>Create</strong> — Useful for “Parse for IoT” apps (e.g. Arduino or Embedded C) that provision restricted user sessions for other devices from the phone app. You should disable this permission when building apps for mobile and web. For “Parse for IoT” apps, you should check whether your IoT device actually needs to access user-specific data. If not, then your IoT device does not need a user session, and you should disable this permission.</li>
  <li><strong>Get</strong>, <strong>Update</strong>, <strong>Add Field</strong> — Unless you need these operations, you should disable these permissions.</li>
</ul>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="roles">Roles</h1>

<p>As your app grows in scope and user-base, you may find yourself needing more coarse-grained control over access to pieces of your data than user-linked ACLs can provide. To address this requirement, Parse supports a form of <a href="http://en.wikipedia.org/wiki/Role-based_access_control">Role-based Access Control</a>. Roles provide a logical way of grouping users with common access privileges to your Parse data. Roles are named objects that contain users and other roles.  Any permission granted to a role is implicitly granted to its users as well as to the users of any roles that it contains.</p>

<p>For example, in your application with curated content, you may have a number of users that are considered “Moderators” and can modify and delete content created by other users.  You may also have a set of users that are “Administrators” and are allowed all of the same privileges as Moderators, but can also modify the global settings for the application. By adding users to these roles, you can ensure that new users can be made moderators or administrators, without having to manually grant permission to every resource for each user.</p>

<p>We provide a specialized class called <code class="highlighter-rouge">ParseRole</code> that represents these role objects in your client code.  <code class="highlighter-rouge">ParseRole</code> is a subclass of <code class="highlighter-rouge">ParseObject</code>, and has all of the same features, such as a flexible schema, automatic persistence, and a key value interface.  All the methods that are on <code class="highlighter-rouge">ParseObject</code> also exist on <code class="highlighter-rouge">ParseRole</code>.  The difference is that <code class="highlighter-rouge">ParseRole</code> has some additions specific to management of roles.</p>

<h2 id="properties">Properties</h2>

<p><code class="highlighter-rouge">ParseRole</code> has several properties that set it apart from <code class="highlighter-rouge">ParseObject</code>:</p>

<ul>
  <li>name: The name for the role.  This value is required, must be unique, and can only be set once as a role is being created.  The name must consist of alphanumeric characters, spaces, -, or _.  This name will be used to identify the Role without needing its objectId.</li>
  <li>users: A <a href="#objects-pointers">relation</a> to the set of users that will inherit permissions granted to the containing role.</li>
  <li>roles: A <a href="#objects-pointers">relation</a> to the set of roles whose users and roles will inherit permissions granted to the containing role.</li>
</ul>

<h2 id="security-for-role-objects">Security for Role Objects</h2>

<p>The <code class="highlighter-rouge">ParseRole</code> uses the same security scheme (ACLs) as all other objects on Parse, except that it requires an ACL to be set explicitly. Generally, only users with greatly elevated privileges (e.g. a master user or Administrator) should be able to create or modify a Role, so you should define its ACLs accordingly.  Remember, if you give write-access to a <code class="highlighter-rouge">ParseRole</code> to a user, that user can add other users to the role, or even delete the role altogether.</p>

<p>To create a new <code class="highlighter-rouge">ParseRole</code>, you would write:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// By specifying no write privileges for the ACL, we can ensure the role cannot be altered.
</span><span class="n">var</span> <span class="n">roleACL</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseACL</span><span class="p">();</span>
<span class="n">roleACL</span><span class="p">.</span><span class="n">PublicReadAccess</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="n">var</span> <span class="n">role</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseRole</span><span class="p">(</span><span class="s">"Administrator"</span><span class="p">,</span> <span class="n">roleACL</span><span class="p">);</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">role</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>You can add users and roles that should inherit your new role’s permissions through the “users” and “roles” relations on <code class="highlighter-rouge">ParseRole</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">role</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseRole</span><span class="p">(</span><span class="n">roleName</span><span class="p">,</span> <span class="n">roleACL</span><span class="p">);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="n">ParseUser</span> <span class="n">user</span> <span class="k">in</span> <span class="n">usersToAddToRole</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">role</span><span class="p">.</span><span class="n">Users</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">foreach</span> <span class="p">(</span><span class="n">ParseRole</span> <span class="n">childRole</span> <span class="k">in</span> <span class="n">rolesToAddToRole</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">role</span><span class="p">.</span><span class="n">Roles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">childRole</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">role</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>Take great care when assigning ACLs to your roles so that they can only be modified by those who should have permissions to modify them.</p>

<h2 id="security-for-other-objects">Security for Other Objects</h2>

<p>Now that you have created a set of roles for use in your application, you can use them with ACLs to define the privileges that their users will receive. Each <code class="highlighter-rouge">ParseObject</code> can specify a <code class="highlighter-rouge">ParseACL</code>, which provides an access control list that indicates which users and roles should be granted read or write access to the object.</p>

<p>Giving a role read or write permission to an object is straightforward.  You can either use the <code class="highlighter-rouge">ParseRole</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseRole</span><span class="p">.</span><span class="n">Query</span>
    <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"name"</span><span class="p">,</span> <span class="s">"Moderators"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">FirstAsync</span><span class="p">()</span>
    <span class="p">.</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">var</span> <span class="n">moderators</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
        <span class="n">var</span> <span class="n">wallPost</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"WallPost"</span><span class="p">);</span>
        <span class="n">var</span> <span class="n">postACL</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseACL</span><span class="p">();</span>
        <span class="n">postACL</span><span class="p">.</span><span class="nf">SetRoleWriteAccess</span><span class="p">(</span><span class="n">moderators</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
        <span class="n">wallPost</span><span class="p">.</span><span class="n">ACL</span> <span class="p">=</span> <span class="n">postACL</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">wallPost</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
    <span class="p">});</span>
</code></pre>
</div>

<p>You can avoid querying for a role by specifying its name for the ACL:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">wallPost</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"WallPost"</span><span class="p">);</span>
<span class="n">var</span> <span class="n">postACL</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseACL</span><span class="p">();</span>
<span class="n">postACL</span><span class="p">.</span><span class="nf">SetRoleWriteAccess</span><span class="p">(</span><span class="s">"Moderators"</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
<span class="n">wallPost</span><span class="p">.</span><span class="n">ACL</span> <span class="p">=</span> <span class="n">postACL</span><span class="p">;</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">wallPost</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<h2 id="role-hierarchy">Role Hierarchy</h2>

<p>As described above, one role can contain another, establishing a parent-child relationship between the two roles. The consequence of this relationship is that any permission granted to the parent role is implicitly granted to all of its child roles.</p>

<p>These types of relationships are commonly found in applications with user-managed content, such as forums. Some small subset of users are “Administrators”, with the highest level of access to tweaking the application’s settings, creating new forums, setting global messages, and so on. Another set of users are “Moderators”, who are responsible for ensuring that the content created by users remains appropriate. Any user with Administrator privileges should also be granted the permissions of any Moderator. To establish this relationship, you would make your “Administrators” role a child role of “Moderators”, like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseRole</span> <span class="n">administrators</span> <span class="p">=</span> <span class="cm">/* Your "Administrators" role */</span><span class="p">;</span>
<span class="n">ParseRole</span> <span class="n">moderators</span> <span class="p">=</span> <span class="cm">/* Your "Moderators" role */</span><span class="p">;</span>
<span class="n">moderators</span><span class="p">.</span><span class="n">Roles</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">administrators</span><span class="p">);</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">moderators</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="files">Files</h1>

<h2 id="the-parsefile">The ParseFile</h2>

<p><code class="highlighter-rouge">ParseFile</code> lets you store application files in the cloud that would otherwise be too large or cumbersome to fit into a regular <code class="highlighter-rouge">ParseObject</code>. The most common use case is storing images but you can also use it for documents, videos, music, and any other binary data (up to 10 megabytes).</p>

<p>Getting started with <code class="highlighter-rouge">ParseFile</code> is easy. First, you’ll need to have the data in <code class="highlighter-rouge">byte[]</code> or <code class="highlighter-rouge">Stream</code> form and then create a <code class="highlighter-rouge">ParseFile</code> with it. In this example, we’ll just use a string:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kt">byte</span><span class="p">[]</span> <span class="n">data</span> <span class="p">=</span> <span class="n">System</span><span class="p">.</span><span class="n">Text</span><span class="p">.</span><span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="s">"Working at Parse is great!"</span><span class="p">);</span>
<span class="n">ParseFile</span> <span class="n">file</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseFile</span><span class="p">(</span><span class="s">"resume.txt"</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
</code></pre>
</div>

<p>Notice in this example that we give the file a name of <code class="highlighter-rouge">resume.txt</code>. There’s two things to note here:</p>

<ul>
  <li>You don’t need to worry about filename collisions. Each upload gets a unique identifier so there’s no problem with uploading multiple files named <code class="highlighter-rouge">resume.txt</code>.</li>
  <li>It’s important that you give a name to the file that has a file extension. This lets Parse figure out the file type and handle it accordingly. So, if you’re storing PNG images, make sure your filename ends with <code class="highlighter-rouge">.png</code>.</li>
</ul>

<p>Next you’ll want to save the file up to the cloud. As with <code class="highlighter-rouge">ParseObject</code>, you can call <code class="highlighter-rouge">SaveAsync</code> to save the file to Parse.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">file</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>Finally, after the save completes, you can assign a <code class="highlighter-rouge">ParseFile</code> into a <code class="highlighter-rouge">ParseObject</code> just like any other piece of data:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">jobApplication</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"JobApplication"</span><span class="p">);</span>
<span class="n">jobApplication</span><span class="p">[</span><span class="s">"applicantName"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"Joe Smith"</span><span class="p">;</span>
<span class="n">jobApplication</span><span class="p">[</span><span class="s">"applicantResumeFile"</span><span class="p">]</span> <span class="p">=</span> <span class="n">file</span><span class="p">;</span>
<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">jobApplication</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>Retrieving it back involves downloading the resource at the <code class="highlighter-rouge">ParseFile</code>’s <code class="highlighter-rouge">Url</code>. Here we retrieve the resume file off another JobApplication object:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">applicantResumeFile</span> <span class="p">=</span> <span class="n">anotherApplication</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">ParseFile</span><span class="p">&gt;(</span><span class="s">"applicantResumeFile"</span><span class="p">);</span>
<span class="n">var</span> <span class="n">resumeTextRequest</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">WWW</span><span class="p">(</span><span class="n">applicantResumeFile</span><span class="p">.</span><span class="n">Url</span><span class="p">.</span><span class="n">AbsoluteUri</span><span class="p">);</span>
<span class="k">yield</span> <span class="k">return</span> <span class="n">resumeTextRequest</span><span class="p">;</span>
<span class="kt">string</span> <span class="n">resumeText</span> <span class="p">=</span> <span class="n">resumeTextRequest</span><span class="p">.</span><span class="n">text</span><span class="p">;</span>
<span class="p">&lt;/</span><span class="n">code</span><span class="p">&gt;&lt;/</span><span class="n">pre</span><span class="p">&gt;</span>

<span class="err">##</span> <span class="n">Progress</span>

<span class="n">It</span><span class="err">'</span><span class="n">s</span> <span class="n">easy</span> <span class="n">to</span> <span class="k">get</span> <span class="n">the</span> <span class="n">progress</span> <span class="n">of</span> <span class="err">`</span><span class="n">ParseFile</span><span class="err">`</span> <span class="n">uploads</span> <span class="n">by</span> <span class="n">passing</span> <span class="n">a</span> <span class="err">`</span><span class="n">Progress</span><span class="err">`</span> <span class="kt">object</span> <span class="n">to</span> <span class="err">`</span><span class="n">SaveAsync</span><span class="err">`</span><span class="p">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">:</span>

<span class="err">```</span><span class="n">cs</span>
<span class="kt">byte</span><span class="p">[]</span> <span class="n">data</span> <span class="p">=</span> <span class="n">System</span><span class="p">.</span><span class="n">Text</span><span class="p">.</span><span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="s">"Working at Parse is great!"</span><span class="p">);</span>
<span class="n">ParseFile</span> <span class="n">file</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseFile</span><span class="p">(</span><span class="s">"resume.txt"</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>

<span class="n">Task</span> <span class="n">saveTask</span> <span class="p">=</span> <span class="n">file</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">(</span><span class="k">new</span> <span class="n">Progress</span><span class="p">&lt;</span><span class="n">ParseUploadProgressEventArgs</span><span class="p">&gt;(</span><span class="n">e</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Check e.Progress to get the progress of the file upload
</span><span class="p">}));</span>
</code></pre>
</div>

<p>You can delete files that are referenced by objects using the <a href="/docs/rest#files-deleting">REST API</a>. You will need to provide the master key in order to be allowed to delete a file.</p>

<p>If your files are not referenced by any object in your app, it is not possible to delete them through the REST API. You may request a cleanup of unused files in your app’s Settings page. Keep in mind that doing so may break functionality which depended on accessing unreferenced files through their URL property. Files that are currently associated with an object will not be affected.</p>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="geopoints">GeoPoints</h1>

<p>Parse allows you to associate real-world latitude and longitude coordinates with an object.  Adding a <code class="highlighter-rouge">ParseGeoPoint</code> to a <code class="highlighter-rouge">ParseObject</code> allows queries to take into account the proximity of an object to a reference point.  This allows you to easily do things like find out what user is closest to another user or which places are closest to a user.</p>

<h2 id="parsegeopoint">ParseGeoPoint</h2>

<p>To associate a point with an object you first need to create a <code class="highlighter-rouge">ParseGeoPoint</code>.  For example, to create a point with latitude of 40.0 degrees and -30.0 degrees longitude:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">point</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseGeoPoint</span><span class="p">(</span><span class="m">40.0</span><span class="p">,</span> <span class="p">-</span><span class="m">30.0</span><span class="p">);</span>
</code></pre>
</div>

<p>This point is then stored in the object as a regular field.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">placeObject</span><span class="p">[</span><span class="s">"location"</span><span class="p">]</span> <span class="p">=</span> <span class="n">point</span><span class="p">;</span>
</code></pre>
</div>

<p>Note: Currently only one key in a class may be a <code class="highlighter-rouge">ParseGeoPoint</code>.</p>

<h2 id="geo-queries">Geo Queries</h2>

<p>Now that you have a bunch of objects with spatial coordinates, it would be nice to find out which objects are closest to a point.  This can be done by adding another restriction to a <code class="highlighter-rouge">ParseQuery</code> using <code class="highlighter-rouge">WhereNear</code>.  Getting a list of ten places that are closest to a user may look something like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// User's location
</span><span class="n">var</span> <span class="n">userGeoPoint</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">ParseGeoPoint</span><span class="p">&gt;(</span><span class="s">"location"</span><span class="p">);</span>
<span class="c1">// Create a query for places
</span><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"PlaceObject"</span><span class="p">);</span>
<span class="c1">//Interested in locations near user.
</span><span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">WhereNear</span><span class="p">(</span><span class="s">"location"</span><span class="p">,</span> <span class="n">userGeoPoint</span><span class="p">);</span>
<span class="c1">// Limit what could be a lot of points.
</span><span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">Limit</span><span class="p">(</span><span class="m">10</span><span class="p">);</span>
<span class="c1">// Final list of nearby places
</span><span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">nearbyPlaces</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
</div>

<p>At this point <code class="highlighter-rouge">placesObjects</code> will be an <code class="highlighter-rouge">IEnumerable&lt;ParseObject&gt;</code> of <code class="highlighter-rouge">PlaceObject</code>s ordered by distance (nearest to farthest) from <code class="highlighter-rouge">userGeoPoint</code>.</p>

<p>To limit the results using distance check out <code class="highlighter-rouge">WhereWithinDistance</code>,.</p>

<p>It’s also possible to query for the set of objects that are contained within a particular area.  To find the objects in a rectangular bounding box, add the <code class="highlighter-rouge">WhereWithinGeoBox</code> restriction to your <code class="highlighter-rouge">ParseQuery</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">swOfSF</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseGeoPoint</span><span class="p">(</span><span class="m">37.708813</span><span class="p">,</span> <span class="p">-</span><span class="m">122.526398</span><span class="p">);</span>
<span class="n">var</span> <span class="n">neOfSF</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseGeoPoint</span><span class="p">(</span><span class="m">37.822802</span><span class="p">,</span> <span class="p">-</span><span class="m">122.373962</span><span class="p">);</span>
<span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"PizzaPlaceObject"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereWithinGeoBox</span><span class="p">(</span><span class="s">"location"</span><span class="p">,</span> <span class="n">swOfSF</span><span class="p">,</span> <span class="n">neOfSF</span><span class="p">);</span>
<span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">pizzaPlacesInSF</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
</div>

<h2 id="geo-distances">Geo Distances</h2>

<p>Parse makes it easy to find the distance between two GeoPoints and query based upon that distance. For example, to get a distance in kilometers between two points, you can use the <code class="highlighter-rouge">DistanceTo</code> method:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseGeoPoint</span> <span class="n">p1</span> <span class="p">=</span> <span class="cm">/* Some location */</span><span class="p">;</span>
<span class="n">ParseGeoPoint</span> <span class="n">p2</span> <span class="p">=</span> <span class="cm">/* Some other location */</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">distanceInKm</span> <span class="p">=</span> <span class="n">p1</span><span class="p">.</span><span class="nf">DistanceTo</span><span class="p">(</span><span class="n">p2</span><span class="p">).</span><span class="n">Kilometers</span><span class="p">;</span>
</code></pre>
</div>

<p>You can also query for <code class="highlighter-rouge">ParseObject</code>s within a radius using a <code class="highlighter-rouge">ParseGeoDistance</code>. For example, to find all places within 5 miles of a user, you would use the <code class="highlighter-rouge">WhereWithinDistance</code> method:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseGeoPoint</span> <span class="n">userGeoPoint</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">ParseGeoPoint</span><span class="p">&gt;(</span><span class="s">"location"</span><span class="p">);</span>
<span class="n">ParseQuery</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"PlaceObject"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereWithinDistance</span><span class="p">(</span><span class="s">"location"</span><span class="p">,</span> <span class="n">userGeoPoint</span><span class="p">,</span> <span class="n">ParseGeoDistance</span><span class="p">.</span><span class="nf">FromMiles</span><span class="p">(</span><span class="m">5</span><span class="p">));</span>
<span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">nearbyLocations</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
    <span class="c1">// nearbyLocations contains PlaceObjects within 5 miles of the user's location
</span><span class="p">});</span>
</code></pre>
</div>

<p>At this point, <code class="highlighter-rouge">nearbyLocations</code> will be an array of objects ordered by distance (nearest to farthest) from <code class="highlighter-rouge">userGeoPoint</code>. Note that if an additional <code class="highlighter-rouge">OrderBy()</code> constraint is applied, it will take precedence over the distance ordering.</p>

<h2 id="caveats">Caveats</h2>

<p>At the moment there are a couple of things to watch out for:</p>

<ol>
  <li>Each ParseObject class may only have one key with a ParseGeoPoint object.</li>
  <li>Using the <code class="highlighter-rouge">WhereNear</code> constraint will also limit results to within 100 miles.</li>
  <li>Points should not equal or exceed the extreme ends of the ranges.  Latitude should not be -90.0 or 90.0.  Longitude should not be -180.0 or 180.0.  Attempting to set latitude or longitude out of bounds will cause an error.</li>
</ol>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="push-notifications">Push Notifications</h1>

<p>Push Notifications are a great way to keep your users engaged and informed about your app. You can reach your entire user base quickly and effectively. This guide will help you through the setup process and the general usage of Parse to send push notifications.</p>

<p>If you haven’t installed the SDK yet, please <a href="https://github.com/ParsePlatform/parse-server/wiki/Push#quick-start">head over to the Push QuickStart</a> to get our SDK up and running.</p>

<div class="tip info"><div>
The Unity SDK can send push notifications from all runtimes, but only iOS and Android apps can receive pushes from APNS and GCM push servers.
</div></div>

<h2 id="setting-up-push">Setting Up Push</h2>

<p>Currently, only two platforms are supported to receive push from Parse, Unity iOS and Unity Android.
* If you want to start using push on Unity iOS, start by completing the <a href="https://github.com/ParsePlatform/parse-server/wiki/Push#quick-start">iOS Push QuickStart</a> to learn how to configure your push certificate.
* If you want to start using push on Unity Android, start by completing <a href="https://github.com/ParsePlatform/parse-server/wiki/Push#quick-start">Android Push QuickStart</a> to learn how to configure your app.
Come back to this guide afterwards to learn more about the push features offered by Parse.</p>

<h2 id="installations">Installations</h2>

<p>Every Parse application installed on a device registered for push notifications has an associated <code class="highlighter-rouge">Installation</code> object. The <code class="highlighter-rouge">Installation</code> object is where you store all the data needed to target push notifications. For example, in a baseball app, you could store the teams a user is interested in to send updates about their performance. Saving the <code class="highlighter-rouge">Installation</code> object is also required for tracking push-related app open events.</p>

<p>On Unity, <code class="highlighter-rouge">Installation</code> objects are available through the <code class="highlighter-rouge">ParseInstallation</code> class, a subclass of <code class="highlighter-rouge">ParseObject</code>. It uses the <a href="/docs/windows/guide#objects">same API</a> for storing and retrieving data. To access the current <code class="highlighter-rouge">Installation</code> object from your .NET app, use the <code class="highlighter-rouge">ParseInstallation.CurrentInstallation</code> property.</p>

<p>While it is possible to modify a <code class="highlighter-rouge">ParseInstallation</code> just like you would a <code class="highlighter-rouge">ParseObject</code>, there are several special fields that help manage and target devices.</p>

<ul>
  <li><strong><code class="highlighter-rouge">channels</code></strong>:
An <code class="highlighter-rouge">IEnumerable&lt;string&gt;</code> of the channels to which a device is currently subscribed. In .NET, this field is accessible through the <code class="highlighter-rouge">Channels</code> property.</li>
  <li><strong><code class="highlighter-rouge">timeZone</code></strong>: The current time zone where the target device is located. This field is readonly and can be accessed via the <code class="highlighter-rouge">TimeZone</code> property. This value is synchronized every time an <code class="highlighter-rouge">Installation</code> object is saved from the device.</li>
  <li><strong><code class="highlighter-rouge">localeIdentifier</code></strong>: The locale identifier of the device in the format [language code]-[COUNTRY CODE]. The language codes are two-letter lowercase ISO language codes (such as “en”) as defined by <a href="http://en.wikipedia.org/wiki/ISO_639-1">ISO 639-1</a>. The country codes are two-letter uppercase ISO country codes (such as “US”) as defined by <a href="&quot;http://en.wikipedia.org/wiki/ISO_3166-1_alpha-3&quot;">ISO 3166-1</a>. This value is synchronized every time a <code class="highlighter-rouge">ParseInstallation</code> object is saved from the device <em>(readonly)</em>.</li>
  <li><strong><code class="highlighter-rouge">deviceType</code></strong>: The type of device, “ios”, “android”, “winrt”, “winphone”, or “dotnet”. This field is readonly and can be accessed via the <code class="highlighter-rouge">DeviceType</code> property.</li>
  <li><strong><code class="highlighter-rouge">pushType</code></strong>: This field is reserved for directing Parse to the push delivery network to be used. If the device is registered to receive pushes via GCM, this field will be marked “gcm”. If this device is not using GCM, and is using Parse’s push notification service, it will be blank <em>(readonly)</em>.</li>
  <li><strong><code class="highlighter-rouge">installationId</code></strong>: Unique Id for the device used by Parse. This field is readonly and can be accessed via the <code class="highlighter-rouge">InstallationId</code> property.</li>
  <li><strong><code class="highlighter-rouge">installationId</code></strong>: Unique Id for the device used by Parse. This field is readonly and can be accessed via the <code class="highlighter-rouge">InstallationId</code> property.</li>
  <li><strong><code class="highlighter-rouge">channelUris</code></strong>: The Microsoft-generated push URIs for Windows devices. This field is readonly and can be accessed via the <code class="highlighter-rouge">DeviceUris</code> property.</li>
  <li><strong><code class="highlighter-rouge">appName</code></strong>: The display name of the client application to which this installation belongs. This field is readonly and can be accessed via the <code class="highlighter-rouge">AppName</code> property.</li>
  <li><strong><code class="highlighter-rouge">appVersion</code></strong>: The version string of the client application to which this installation belongs. This field is readonly and can be accessed via the <code class="highlighter-rouge">AppVersion</code> property.</li>
  <li><strong><code class="highlighter-rouge">parseVersion</code></strong>: The version of the Parse SDK which this installation uses. This field is readonly and can be accessed via the <code class="highlighter-rouge">ParseVersion</code> property.</li>
  <li><strong><code class="highlighter-rouge">appIdentifier</code></strong>: A unique identifier for this installation’s client application. This field is readonly and can be accessed via the <code class="highlighter-rouge">AppIdentifier</code> property. On Windows 8, this is the <code class="highlighter-rouge">Windows.ApplicationModel.Package</code> id; on Windows Phone 8 this is the ProductId; in other .NET applications, this is the <code class="highlighter-rouge">ApplicationIdentity</code> of the current <code class="highlighter-rouge">AppDomain</code></li>
</ul>

<h2 id="sending-pushes">Sending Pushes</h2>

<p>There are two ways to send push notifications using Parse: <a href="#push-notifications-using-channels">channels</a> and <a href="#push-notifications-using-advanced-targeting">advanced targeting</a>. Channels offer a simple and easy to use model for sending pushes, while advanced targeting offers a more powerful and flexible model. Both are fully compatible with each other and will be covered in this section.</p>

<p>Sending notifications is often done from the Parse.com push console, the <a href="#sending/REST">REST API</a> or from <a href="#sending/JavaScript">Cloud Code</a>. However, push notifications can also be triggered by the existing client SDKs. If you decide to send notifications from the client SDKs, you will need to set <strong>Client Push Enabled</strong> in the Push Notifications settings of your Parse app.</p>

<p>However, be sure you understand that enabling Client Push can lead to a security vulnerability in your app, as outlined <a href="http://blog.parse.com/2014/09/03/the-dangerous-world-of-client-push/">on our blog</a>. We recommend that you enable Client Push for testing purposes only, and move your push notification logic into Cloud Code when your app is ready to go into production.</p>

<p><img src="/docs/assets/images/client_push_settings.png" alt="" /></p>

<p>You can view your past push notifications on the Parse.com push console for up to 30 days after creating your push. For pushes scheduled in the future, you can delete the push on the push console as long as no sends have happened yet. After you send the push, the push console shows push analytics graphs.</p>

<h3 id="using-channels">Using Channels</h3>

<p>The simplest way to start sending notifications is using channels. This allows you to use a publisher-subscriber model for sending pushes. Devices start by subscribing to one or more channels, and notifications can later be sent to these subscribers. The channels subscribed to by a given <code class="highlighter-rouge">Installation</code> are stored in the <code class="highlighter-rouge">channels</code> field of the <code class="highlighter-rouge">Installation</code> object.</p>

<h4 id="subscribing-to-channels">Subscribing to Channels</h4>

<p>A channel is identified by a string that starts with a letter and consists of alphanumeric characters, underscores, and dashes. It doesn’t need to be explicitly created before it can be used and each <code class="highlighter-rouge">Installation</code> can subscribe to any number of channels at a time.</p>

<p>An installation’s channels can be set using the <code class="highlighter-rouge">Channels</code> property of <code class="highlighter-rouge">ParseInstallation</code>. For example, in a baseball score app, we could do:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// When users indicate they are Giants fans, we subscribe them to that channel.
</span><span class="n">var</span> <span class="n">installation</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">CurrentInstallation</span><span class="p">;</span>
<span class="n">installation</span><span class="p">.</span><span class="n">Channels</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="p">{</span> <span class="s">"Giants"</span> <span class="p">};</span>
<span class="n">installation</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>Alternatively, you can insert a channel into <code class="highlighter-rouge">Channels</code> without affecting the existing channels using the <code class="highlighter-rouge">AddUniqueToList</code> method of <code class="highlighter-rouge">ParseObject</code> using the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">installation</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">CurrentInstallation</span><span class="p">;</span>
<span class="n">installation</span><span class="p">.</span><span class="nf">AddUniqueToList</span><span class="p">(</span><span class="s">"channels"</span><span class="p">,</span> <span class="s">"Giants"</span><span class="p">);</span>
<span class="n">installation</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>Finally, <code class="highlighter-rouge">ParsePush</code> provides a shorthand for inserting a channel into <code class="highlighter-rouge">Channels</code> and saving:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParsePush</span><span class="p">.</span><span class="nf">SubscribeAsync</span><span class="p">(</span><span class="s">"Giants"</span><span class="p">);</span>
</code></pre>
</div>

<p>Once subscribed to the “Giants” channel, your <code class="highlighter-rouge">Installation</code> object should have an updated <code class="highlighter-rouge">channels</code> field.</p>

<p><img src="/docs/assets/images/installation_channel.png" alt="" /></p>

<p>Unsubscribing from a channel is just as easy:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">installation</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">CurrentInstallation</span><span class="p">;</span>
<span class="n">installation</span><span class="p">.</span><span class="nf">RemoveAllFromList</span><span class="p">(</span><span class="s">"channels"</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="p">{</span> <span class="s">"Giants"</span> <span class="p">});</span>
<span class="n">installation</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>Or, using ParsePush:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParsePush</span><span class="p">.</span><span class="nf">UnsubscribeAsync</span><span class="p">(</span><span class="s">"Giants"</span><span class="p">);</span>
</code></pre>
</div>

<p>The set of subscribed channels is cached in the <code class="highlighter-rouge">CurrentInstallation</code> object:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">installation</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">CurrentInstallation</span>
<span class="n">IEnumerable</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">subscribedChannels</span> <span class="p">=</span> <span class="n">installation</span><span class="p">.</span><span class="n">Channels</span><span class="p">;</span>
</code></pre>
</div>

<p>If you plan on changing your channels from Cloud Code or the data browser, note that you’ll need to call <code class="highlighter-rouge">FetchAsync</code> prior to this line in order to get the most recent channels.</p>

<h4 id="sending-pushes-to-channels">Sending Pushes to Channels</h4>

<p>In the .NET SDK, the following code can be used to alert all subscribers of the “Giants” channel that their favorite team just scored. This will display a toast notification to Windows users. iOS users will receive a notification in the notification center and Android users will receive a notification in the system tray.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Send a notification to all devices subscribed to the "Giants" channel.
</span><span class="n">var</span> <span class="n">push</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParsePush</span><span class="p">();</span>
<span class="n">push</span><span class="p">.</span><span class="n">Channels</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="p">{</span><span class="s">"Giants"</span><span class="p">};</span>
<span class="n">push</span><span class="p">.</span><span class="n">Alert</span> <span class="p">=</span> <span class="s">"The Giants just scored!"</span><span class="p">;</span>
<span class="n">push</span><span class="p">.</span><span class="nf">SendAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>If you want to target multiple channels with a single push notification, you can use any <code class="highlighter-rouge">IEnumerable&lt;string&gt;</code> of channels.</p>

<h3 id="using-advanced-targeting">Using Advanced Targeting</h3>

<p>While channels are great for many applications, sometimes you need more precision when targeting the recipients of your pushes. Parse allows you to write a query for any subset of your <code class="highlighter-rouge">Installation</code> objects using the <a href="/docs/unity/guide#queries">querying API</a> and to send them a push.</p>

<p>Since <code class="highlighter-rouge">ParseInstallation</code> is a subclass of <code class="highlighter-rouge">ParseObject</code>, you can save any data you want and even create relationships between <code class="highlighter-rouge">Installation</code> objects and your other objects. This allows you to send pushes to a very customized and dynamic segment of your user base.</p>

<h4 id="saving-installation-data">Saving Installation Data</h4>

<p>Storing data on an <code class="highlighter-rouge">Installation</code> object is just as easy as storing <a href="/docs/unity/guide#objects">any other data</a> on Parse. In our Baseball app, we could allow users to get pushes about game results, scores and injury reports.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Store the category of push notifications the user would like to receive.
</span><span class="n">var</span> <span class="n">installation</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">CurrentInstallation</span><span class="p">;</span>
<span class="n">installation</span><span class="p">[</span><span class="s">"scores"</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="n">installation</span><span class="p">[</span><span class="s">"gameResults"</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="n">installation</span><span class="p">[</span><span class="s">"injuryReports"</span><span class="p">]</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="n">installation</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>You can even create relationships between your <code class="highlighter-rouge">Installation</code> objects and other classes saved on Parse. To associate an Installation with a particular user, for example, you can simply store the current user on the <code class="highlighter-rouge">ParseInstallation</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Associate the device with a user
</span><span class="n">var</span> <span class="n">installation</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">CurrentInstallation</span><span class="p">;</span>
<span class="n">installation</span><span class="p">[</span><span class="s">"user"</span><span class="p">]</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">;</span>
<span class="n">installation</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<h4 id="sending-pushes-to-queries">Sending Pushes to Queries</h4>

<p>Once you have your data stored on your <code class="highlighter-rouge">Installation</code> objects, you can use a <code class="highlighter-rouge">ParseQuery</code> to target a subset of these devices. <code class="highlighter-rouge">Installation</code> queries work just like any other <a href="/docs/unity/guide#queries">Parse query</a>, but we use the special static property <code class="highlighter-rouge">ParseInstallation.Query</code> to create it. We set this query on our <code class="highlighter-rouge">ParsePush</code> object, before sending the notification.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">push</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParsePush</span><span class="p">();</span>
<span class="n">push</span><span class="p">.</span><span class="n">Query</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">Query</span>
             <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"injuryReports"</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
<span class="n">push</span><span class="p">.</span><span class="n">Alert</span> <span class="p">=</span> <span class="s">"Willie Hayes injured by own pop fly."</span><span class="p">;</span>
<span class="n">push</span><span class="p">.</span><span class="nf">SendAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>We can even use channels with our query. To send a push to all subscribers of the “Giants” channel but filtered by those who want score update, we can do the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">push</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParsePush</span><span class="p">();</span>
<span class="n">push</span><span class="p">.</span><span class="n">Query</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">Query</span>
             <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"scores"</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
<span class="n">push</span><span class="p">.</span><span class="n">Channels</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="p">{</span> <span class="s">"Giants"</span> <span class="p">};</span>
<span class="n">push</span><span class="p">.</span><span class="n">Alert</span> <span class="p">=</span> <span class="s">"Giants scored against the A's! It's now 2-2."</span><span class="p">;</span>
<span class="n">push</span><span class="p">.</span><span class="nf">SendAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>Alternatively, we can use a query that constrains “channels” directly:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">push</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParsePush</span><span class="p">();</span>
<span class="n">push</span><span class="p">.</span><span class="n">Query</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">Query</span>
             <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"scores"</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
             <span class="p">.</span><span class="nf">WhereContainsAll</span><span class="p">(</span><span class="s">"channels"</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"Giants"</span> <span class="p">});</span>
<span class="n">push</span><span class="p">.</span><span class="n">Alert</span> <span class="p">=</span> <span class="s">"Giants scored against the A's! It's now 2-2."</span><span class="p">;</span>
<span class="n">push</span><span class="p">.</span><span class="nf">SendAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>If we store relationships to other objects in our <code class="highlighter-rouge">Installation</code> class, we can also use those in our query. For example, we could send a push notification to all users near a given location like this.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Find users in the Seattle metro area
</span><span class="n">var</span> <span class="n">userQuery</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">Query</span><span class="p">.</span><span class="nf">WhereWithinDistance</span><span class="p">(</span>
    <span class="s">"location"</span><span class="p">,</span>
    <span class="n">marinersStadium</span><span class="p">,</span>
    <span class="n">ParseGeoDistance</span><span class="p">.</span><span class="nf">FromMiles</span><span class="p">(</span><span class="m">1</span><span class="p">));</span>
<span class="n">var</span> <span class="n">push</span><span class="p">=</span> <span class="k">new</span> <span class="nf">ParsePush</span><span class="p">();</span>
<span class="n">push</span><span class="p">.</span><span class="n">Query</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">Query</span>
             <span class="p">.</span><span class="nf">WhereMatchesQuery</span><span class="p">(</span><span class="s">"user"</span><span class="p">,</span> <span class="n">userQuery</span><span class="p">);</span>
<span class="n">push</span><span class="p">.</span><span class="n">Alert</span> <span class="p">=</span> <span class="s">"Mariners lost? Free conciliatory hotdogs at the Parse concession stand!"</span><span class="p">;</span>
<span class="n">push</span><span class="p">.</span><span class="nf">SendAsync</span><span class="p">();</span>
</code></pre>
</div>

<h2 id="sending-options">Sending Options</h2>

<p>Push notifications can do more than just send a message. On Unity, pushes can also include a title, as well as any custom data you wish to send. An expiration date can also be set for the notification in case it is time sensitive.</p>

<h3 id="customizing-your-notifications">Customizing your Notifications</h3>

<p>If you want to send more than just a message, you will need to use an <code class="highlighter-rouge">IDictionary&lt;string, object&gt;</code> to package all of the data. There are some reserved fields that have a special meaning.</p>

<ul>
  <li><strong><code class="highlighter-rouge">alert</code></strong>: the notification’s message.</li>
  <li><strong><code class="highlighter-rouge">badge</code></strong>: <em>(iOS only)</em> the value indicated in the top right corner of the app icon. This can be set to a value or to <code class="highlighter-rouge">Increment</code> in order to increment the current value by 1.</li>
  <li><strong><code class="highlighter-rouge">sound</code></strong>: <em>(iOS only)</em> the name of a sound file in the application bundle.</li>
  <li><strong><code class="highlighter-rouge">content-available</code></strong>: <em>(iOS only)</em> If you are a writing a <a href="http://developer.apple.com/library/iOS/#technotes/tn2280/_index.html">Newsstand</a> app, or an app using the Remote Notification Background Mode <a href="https://developer.apple.com/library/ios/releasenotes/General/WhatsNewIniOS/Articles/iOS7.html#//apple_ref/doc/uid/TP40013162-SW10">introduced in iOS7</a> (a.k.a. “Background Push”), set this value to 1 to trigger a background download.</li>
  <li><strong><code class="highlighter-rouge">category</code></strong>: <em>(iOS only)</em> the identifier of the <a href="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIUserNotificationCategory_class/index.html#//apple_ref/occ/cl/UIUserNotificationCategory"><code class="highlighter-rouge">UIUserNotificationCategory</code></a> for this push notification.</li>
  <li><strong><code class="highlighter-rouge">uri</code></strong>: <em>(Android only)</em> an optional field that contains a URI. When the notification is opened, an <code class="highlighter-rouge">Activity</code> associated with opening the URI is launched.</li>
  <li><strong><code class="highlighter-rouge">title</code></strong>: <em>(Android, Windows 8, and Windows Phone 8 only)</em> the value displayed in the Android system tray or Windows toast notification.</li>
</ul>

<p>For example, to send a notification that contains a title, you can do the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">push</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParsePush</span><span class="p">();</span>
<span class="n">push</span><span class="p">.</span><span class="n">Channels</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="p">{</span><span class="s">"Mets"</span><span class="p">};</span>
<span class="n">push</span><span class="p">.</span><span class="n">Data</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="p">{</span><span class="s">"title"</span><span class="p">,</span> <span class="s">"Score Alert"</span><span class="p">}</span>
  <span class="p">{</span><span class="s">"alert"</span><span class="p">,</span> <span class="s">"The Mets scored! The game is now tied 1-1!"</span><span class="p">},</span>
<span class="p">};</span>
<span class="n">push</span><span class="p">.</span><span class="nf">SendAsync</span><span class="p">();</span>
</code></pre>
</div>

<h3 id="setting-an-expiration-date">Setting an Expiration Date</h3>

<p>When a user’s device is turned off or not connected to the internet, push notifications cannot be delivered. If you have a time sensitive notification that is not worth delivering late, you can set an expiration date. This avoids needlessly alerting users of information that may no longer be relevant.</p>

<p>There are two properties provided by the <code class="highlighter-rouge">ParsePush</code> class to allow setting an expiration date for your notification. The first is <code class="highlighter-rouge">Expiration</code> which simply takes a <code class="highlighter-rouge">DateTime?</code> specifying when Parse should stop trying to send the notification.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">push</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParsePush</span><span class="p">();</span>
<span class="n">push</span><span class="p">.</span><span class="n">Expiration</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2015</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">14</span><span class="p">);</span>
<span class="n">push</span><span class="p">.</span><span class="n">Alert</span> <span class="p">=</span> <span class="s">"Season tickets on sale until August 14th!"</span><span class="p">;</span>
<span class="n">push</span><span class="p">.</span><span class="nf">SendAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>There is however a caveat with this method. Since device clocks are not guaranteed to be accurate, you may end up with inaccurate results. For this reason, the <code class="highlighter-rouge">ParsePush</code> class also provides the <code class="highlighter-rouge">ExpirationInterval</code> property which accepts a <code class="highlighter-rouge">TimeSpan</code>. The notification will expire after the specified interval has elapsed.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">push</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParsePush</span><span class="p">();</span>
<span class="n">push</span><span class="p">.</span><span class="n">ExpirationInterval</span> <span class="p">=</span> <span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromDays</span><span class="p">(</span><span class="m">7</span><span class="p">);</span>
<span class="n">push</span><span class="p">.</span><span class="n">Alert</span> <span class="p">=</span> <span class="s">"Season tickets on sale until next week!"</span><span class="p">;</span>
<span class="n">push</span><span class="p">.</span><span class="nf">SendAsync</span><span class="p">();</span>
</code></pre>
</div>

<h3 id="targeting-by-platform">Targeting by Platform</h3>

<p>If you build a cross platform app, it is possible you may only want to target one operating system. There are two methods provided to filter which of these devices are targeted. Note that all platforms are targeted by default.</p>

<p>The following example would send a different notification to Android, iOS, and Windows users.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Notification for Android users
</span><span class="n">var</span> <span class="n">androidPush</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParsePush</span><span class="p">();</span>
<span class="n">androidPush</span><span class="p">.</span><span class="n">Query</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">Query</span>
                    <span class="p">.</span><span class="nf">WhereContainsAll</span><span class="p">(</span><span class="s">"channels"</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"suitcaseOwners"</span> <span class="p">})</span>
                    <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"deviceType"</span><span class="p">,</span> <span class="s">"android"</span><span class="p">);</span>
<span class="n">androidPush</span><span class="p">.</span><span class="nf">SendAsync</span><span class="p">();</span>

<span class="c1">// Notification for iOS users
</span><span class="p">+</span><span class="n">var</span> <span class="n">iosPush</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParsePush</span><span class="p">();</span>
<span class="n">iosPush</span><span class="p">.</span><span class="n">Alert</span> <span class="p">=</span> <span class="s">"Your suitcase has been filled with tiny apples!"</span><span class="p">;</span>
<span class="n">iosPush</span><span class="p">.</span><span class="n">Query</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">Query</span>
                <span class="p">.</span><span class="nf">WhereContainsAll</span><span class="p">(</span><span class="s">"channels"</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"suitcaseOwners"</span> <span class="p">})</span>
                <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"deviceType"</span><span class="p">,</span> <span class="s">"ios"</span><span class="p">);</span>
<span class="n">iosPush</span><span class="p">.</span><span class="nf">SendAsync</span><span class="p">();</span>

<span class="c1">// Notification for Windows 8 users
</span><span class="n">var</span> <span class="n">winPush</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParsePush</span><span class="p">();</span>
<span class="n">winPush</span><span class="p">.</span><span class="n">Alert</span> <span class="p">=</span> <span class="s">"Your suitcase has been filled with tiny glass!"</span><span class="p">;</span>
<span class="n">winPush</span><span class="p">.</span><span class="n">Query</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">Query</span>
                <span class="p">.</span><span class="nf">WhereContainsAll</span><span class="p">(</span><span class="s">"channels"</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"suitcaseOwners"</span> <span class="p">})</span>
                <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"deviceType"</span><span class="p">,</span> <span class="s">"winrt"</span><span class="p">);</span>
<span class="n">winPush</span><span class="p">.</span><span class="nf">SendAsync</span><span class="p">();</span>

<span class="c1">// Notification for Windows Phone 8 users
</span><span class="n">var</span> <span class="n">wpPush</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParsePush</span><span class="p">();</span>
<span class="n">wpPush</span><span class="p">.</span><span class="n">Alert</span> <span class="p">=</span> <span class="s">"Your suitcase is very hip; very metro."</span><span class="p">;</span>
<span class="n">wpPush</span><span class="p">.</span><span class="n">Query</span> <span class="p">=</span> <span class="n">ParseInstallation</span><span class="p">.</span><span class="n">Query</span>
               <span class="p">.</span><span class="nf">WhereContainsAll</span><span class="p">(</span><span class="s">"channels"</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"suitcaseOwners"</span> <span class="p">})</span>
               <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"deviceType"</span><span class="p">,</span> <span class="s">"winphone"</span><span class="p">);</span>
<span class="n">wpPush</span><span class="p">.</span><span class="nf">SendAsync</span><span class="p">();</span>
</code></pre>
</div>

<h2 id="scheduling-pushes">Scheduling Pushes</h2>

<p>Sending scheduled push notifications is not currently supported by the .NET SDK. Take a look at the <a href="#scheduled/REST">REST API</a>, <a href="#scheduled/JavaScript">JavaScript SDK</a> or the Parse.com push console.</p>

<h2 id="receiving-pushes">Receiving Pushes</h2>

<p>If your app is running while a push notification is received, the <code class="highlighter-rouge">ParsePush.ParsePushNotificationReceived</code> event is fired. You can register for this event. This event provides <code class="highlighter-rouge">ParsePushNotificationEventArgs</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParsePush</span><span class="p">.</span><span class="n">ParsePushNotificationReceived</span> <span class="p">+=</span> <span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="n">var</span> <span class="n">payload</span> <span class="p">=</span> <span class="n">args</span><span class="p">.</span><span class="n">Payload</span><span class="p">;</span>
  <span class="kt">object</span> <span class="n">objectId</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">payload</span><span class="p">.</span><span class="nf">TryGetValue</span><span class="p">(</span><span class="s">"objectId"</span><span class="p">,</span> <span class="k">out</span> <span class="n">objectId</span><span class="p">))</span> <span class="p">{</span>
    <span class="nf">DisplayRichMessageWithObjectId</span><span class="p">(</span><span class="n">objectId</span> <span class="k">as</span> <span class="kt">string</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre>
</div>

<p>In Unity Android, we provide a helper method that you can utilize as a handler to display a notification. If the app is in background it will display a notification by default.
```cs
ParsePush.ParsePushNotificationReceived += (sender, args) =&gt; {
#if UNITY_ANDROID
	AndroidJavaClass parseUnityHelper = new AndroidJavaClass(“com.parse.ParsePushUnityHelper”);
	AndroidJavaClass unityPlayer = new AndroidJavaClass(“com.unity3d.player.UnityPlayer”);
	AndroidJavaObject currentActivity = unityPlayer.GetStatic<androidjavaobject>("currentActivity");</androidjavaobject></p>

<div class="highlighter-rouge"><pre class="highlight"><code>// Call default behavior.
parseUnityHelper.CallStatic("handleParsePushNotificationReceived", currentActivity, args.StringPayload); #endif } ```
</code></pre>
</div>

<h3 id="tracking-pushes-and-app-opens">Tracking Pushes and App Opens</h3>

<p>Tracking push opens is not supported on Unity now. You can track app opens with</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseAnalytics</span><span class="p">.</span><span class="nf">TrackAppOpenedAsync</span><span class="p">();</span>
</code></pre>
</div>

<h2 id="push-experiments">Push Experiments</h2>

<p>You can A/B test your push notifications to figure out the best way to keep your users engaged. With A/B testing, you can simultaneously send two versions of your push notification to different devices, and use each version’s push open rates to figure out which one is better.  You can test by either message or send time.</p>

<h3 id="ab-testing">A/B Testing</h3>

<p>Our web push console guides you through every step of setting up an A/B test.</p>

<p>For each push campaign sent through the Parse web push console, you can allocate a subset of your devices to be in the experiment’s test audience, which Parse will automatically split into two equally-sized experiment groups. For each experiment group, you can specify a different push message. The remaining devices will be saved so that you can send the winning message to them later. Parse will randomly assign devices to each group to minimize the chance for a test to affect another test’s results (although we still don’t recommend running multiple A/B tests over the same devices on the same day).</p>

<p><img src="/docs/assets/images/experiment_enable.png" alt="" /></p>

<p>After you send the push, you can come back to the push console to see in real time which version resulted in more push opens, along with other metrics such as statistical confidence interval. It’s normal for the number of recipients in each group to be slightly different because some devices that we had originally allocated to that experiment group may have uninstalled the app. It’s also possible for the  random group assignment to be slightly uneven when the test audience size is small. Since we calculate open rate separately for each group based on recipient count, this should not significantly affect your experiment results.</p>

<p><img src="/docs/assets/images/experiment_results.png" alt="" /></p>

<p>If you are happy with the way one message performed, you can send that to the rest of your app’s devices (i.e. the “Launch Group”). This step only applies to A/B tests where you vary the message.</p>

<p><img src="/docs/assets/images/experiment_launch.png" alt="" /></p>

<p>Push experiments are supported on all recent Parse SDKs (iOS v1.2.13+, Android v1.4.0+, .NET v1.2.7+). Before running experiments, you must instrument your app with <a href="#receiving-tracking">push open tracking</a>.</p>

<h3 id="experiment-statistics">Experiment Statistics</h3>

<p>Parse provides guidance on how to run experiments to achieve statistically significant results.</p>

<h4 id="test-audience-size">Test Audience Size</h4>

<p>When you setup a push message experiment, we’ll recommend the minimum size of your test audience. These recommendations are generated through simulations based on your app’s historical push open rates. For big push campaigns (e.g. 100k+ devices), this recommendation is usually small subset of your devices. For smaller campaigns (e.g. &lt; 5k devices), this recommendation is usually all devices. Using all devices for your test audience will not leave any remaining devices for the launch group, but you can still gain valuable insight into what type of messaging works better so you can implement similar messaging in your next push campaign.</p>

<h4 id="confidence-interval">Confidence Interval</h4>

<p>After you send your pushes to experiment groups, we’ll also provide a statistical confidence interval when your experiment has collected enough data to have statistically significant results. This confidence interval is in absolute percentage points of push open rate (e.g. if the open rates for groups A and B are 3% and 5%, then the difference is reported as 2 percentage points). This confidence interval is a measure of how much difference you would expect to see between the two groups if you repeat the same experiment many times.</p>

<p>Just after a push send, when only a small number of users have opened their push notifications, the open rate difference you see between groups A and B could be due to random chance, so it might not be reproducible if you run the same experiment again. After your experiment collects more data over time, we become increasingly confident that the observed difference is a true difference. As this happens, the confidence interval will become narrower, allowing us to more accurately estimate the true difference between groups A and B. Therefore, we recommend that you wait until there is enough data to generate a statistical confidence interval before deciding which group’s push is better.</p>

<h2 id="push-localization">Push Localization</h2>

<p>Localizing your app’s content is a proven way to drive greater engagement. We’ve made it easy to localize your push messages with Push Localization. The latest version of the Parse .NET SDK will detect and store the user’s language in the installation object, and via the web push console you’ll be able to send localized push messages to your users in a single broadcast.</p>

<h3 id="setup">Setup</h3>

<p>To take advantage of  Push Localization you will need to make sure you’ve published your app with the Parse .NET SDK version 1.5.5 or greater. Any users of your application running the Parse .NET SDK version 1.5.5 or greater will then be targetable by Push Localization via the web push console.</p>

<p>It’s important to note that for developers who have users running apps with versions of the Parse .NET SDK earlier than 1.5.5 that targeting information for Localized Push will not be available and these users will receive the default message from the push console.</p>

<h3 id="sending-a-localized-push">Sending a localized push</h3>

<p>Our web push console guides you through every step of setting up a Localized Push.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>Setting up Push Notifications is often a source of frustration for developers. The process is complicated and invites problems to happen along the way. If you run into issues, try some of these troubleshooting tips.</p>

<ul>
  <li>If you’re receiving push from Unity iOS, refer to <a href="/docs/ios/guide#push-notifications-troubleshooting">iOS Push Troubleshooting Guide</a>.</li>
  <li>If you’re receiving push from Unity Android, refer to <a href="/docs/android/guide#push-notifications-troubleshooting">Android Push Troubleshooting Guide</a>.</li>
</ul>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="config">Config</h1>

<h2 id="parse-config">Parse Config</h2>

<p><code class="highlighter-rouge">ParseConfig</code> is a way to configure your applications remotely by storing a single configuration object on Parse. It enables you to add things like feature gating or a simple “Message of the Day”. To start using <code class="highlighter-rouge">ParseConfig</code> you need to add a few key/value pairs (parameters) to your app on the Parse Config Dashboard.</p>

<p><img src="/docs/assets/images/config_editor.png" alt="" /></p>

<p>After that you will be able to fetch the <code class="highlighter-rouge">ParseConfig</code> on the client, like in this example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseConfig</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">isFaulted</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Something went wrong (e.g. request timed out)
</span>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">ParseConfig</span> <span class="n">config</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre>
</div>

<h2 id="retrieving-config">Retrieving Config</h2>

<p><code class="highlighter-rouge">ParseConfig</code> is built to be as robust and reliable as possible, even in the face of poor internet connections. Caching is used by default to ensure that the latest successfully fetched config is always available. In the below example we use <code class="highlighter-rouge">GetAsync</code> to retrieve the latest version of config from the server, and if the fetch fails we can simply fall back to the version that we successfully fetched before via <code class="highlighter-rouge">CurrentConfig</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseConfig</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
  <span class="n">ParseConfig</span> <span class="n">config</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">isFaulted</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Failed to fetch. Using Cached Config."</span><span class="p">);</span>
    <span class="n">config</span> <span class="p">=</span> <span class="n">ParseConfig</span><span class="p">.</span><span class="n">CurrentConfig</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">config</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kt">string</span> <span class="n">welcomeMessage</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="n">result</span> <span class="p">=</span> <span class="n">config</span><span class="p">.</span><span class="nf">TryGetValue</span><span class="p">(</span><span class="s">"welcomeMessage"</span><span class="p">,</span> <span class="k">out</span> <span class="n">welcomeMessage</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(!</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Falling back to default message."</span><span class="p">);</span>
    <span class="n">welcomeMessage</span> <span class="p">=</span> <span class="s">"Welcome!"</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="s">"Welcome Messsage From Config = {0}"</span><span class="p">,</span> <span class="n">welcomeMessage</span><span class="p">));</span>
<span class="p">})</span>
</code></pre>
</div>

<h2 id="current-config">Current Config</h2>

<p>Every <code class="highlighter-rouge">ParseConfig</code> instance that you get is always immutable. When you retrieve a new <code class="highlighter-rouge">ParseConfig</code> in the future from the network, it will not modify any existing <code class="highlighter-rouge">ParseConfig</code> instance, but will instead create a new one and make it available via <code class="highlighter-rouge">ParseConfig.CurrentConfig</code>. Therefore, you can safely pass around any <code class="highlighter-rouge">ParseConfig</code> object and safely assume that it will not automatically change.</p>

<p>It might be troublesome to retrieve the config from the server every time you want to use it. You can avoid this by simply using the cached <code class="highlighter-rouge">CurrentConfig</code> object and fetching the config only once in a while.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Helper</span>
<span class="p">{</span>
  <span class="k">private</span> <span class="k">static</span> <span class="n">TimeSpan</span> <span class="n">configRefreshInterval</span> <span class="p">=</span> <span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromHours</span><span class="p">(</span><span class="m">12</span><span class="p">);</span>
  <span class="k">private</span> <span class="k">static</span> <span class="n">DateTime</span><span class="p">?</span> <span class="n">lastFetchedDate</span><span class="p">;</span>

  <span class="c1">// Fetches the config at most once every 12 hours per app runtime
</span>  <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">FetchConfigIfNeeded</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">lastFetchedDate</span> <span class="p">==</span> <span class="k">null</span> <span class="p">||</span>
        <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span> <span class="p">-</span> <span class="n">lastFetchedDate</span> <span class="p">&gt;</span> <span class="n">configRefreshInterval</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">lastFetchedDate</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">;</span>
      <span class="n">ParseConfig</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<h2 id="parameters">Parameters</h2>

<p><code class="highlighter-rouge">ParseConfig</code>  supports most of the data types supported by <code class="highlighter-rouge">ParseObject</code>:</p>

<ul>
  <li>string</li>
  <li>bool/int/double/long</li>
  <li>DateTime</li>
  <li>ParseFile</li>
  <li>ParseGeoPoint</li>
  <li>IList&lt;string, T&gt; (even nested)</li>
  <li>IDictionary<t> (even nested)</t></li>
</ul>

<p>We currently allow up to <strong>100</strong> parameters in your config and a total size of <strong>128KB</strong> across all parameters.</p>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="analytics">Analytics</h1>

<p>Parse provides a number of hooks for you to get a glimpse into the ticking heart of your app. We understand that it’s important to understand what your app is doing, how frequently, and when.</p>

<p>While this section will cover different ways to instrument your app to best take advantage of Parse’s analytics backend, developers using Parse to store and retrieve data can already take advantage of metrics on Parse.</p>

<p>Without having to implement any client-side logic, you can view real-time graphs and breakdowns (by device type, Parse class name, or REST verb) of your API Requests in your app’s dashboard and save these graph filters to quickly access just the data you’re interested in.</p>

<h2 id="app-open-analytics">App-Open Analytics</h2>

<p>Our initial analytics hook allows you to track your application being launched. By adding the following line to your Launching event handler, you’ll be able to collect data on when and how often your application is opened.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseAnalytics</span><span class="p">.</span><span class="nf">TrackAppOpenedAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>Graphs and breakdowns of your statistics are accessible from your app’s Dashboard.</p>

<h2 id="custom-analytics">Custom Analytics</h2>

<p><code class="highlighter-rouge">ParseAnalytics</code> also allows you to track free-form events, with a handful of <code class="highlighter-rouge">string</code> keys and values. These extra dimensions allow segmentation of your custom events via your app’s Dashboard.</p>

<p>Say your app offers search functionality for apartment listings, and you want to track how often the feature is used, with some additional metadata.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">dimensions</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="c1">// Define ranges to bucket data points into meaningful segments
</span>  <span class="p">{</span> <span class="s">"priceRange"</span><span class="p">,</span> <span class="s">"1000-1500"</span> <span class="p">},</span>
  <span class="c1">// Did the user filter the query?
</span>  <span class="p">{</span> <span class="s">"source"</span><span class="p">,</span> <span class="s">"craigslist"</span> <span class="p">},</span>
  <span class="c1">// Do searches happen more often on weekdays or weekends?
</span>  <span class="p">{</span> <span class="s">"dayType"</span><span class="p">,</span> <span class="s">"weekday"</span> <span class="p">}</span>
<span class="p">};</span>
<span class="c1">// Send the dimensions to Parse along with the 'search' event
</span><span class="n">ParseAnalytics</span><span class="p">.</span><span class="nf">TrackEventAsync</span><span class="p">(</span><span class="s">"search"</span><span class="p">,</span> <span class="n">dimensions</span><span class="p">);</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">ParseAnalytics</code> can even be used as a lightweight error tracker — simply invoke the following and you’ll have access to an overview of the rate and frequency of errors, broken down by error code, in your application:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">errDimensions</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="p">{</span> <span class="s">"code"</span><span class="p">,</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="n">error</span><span class="p">.</span><span class="n">Code</span><span class="p">)</span> <span class="p">}</span>
<span class="p">};</span>
<span class="n">ParseAnalytics</span><span class="p">.</span><span class="nf">TrackEventAsync</span><span class="p">(</span><span class="s">"error"</span><span class="p">,</span> <span class="n">errDimensions</span> <span class="p">);</span>
</code></pre>
</div>

<p>Note that Parse currently only stores the first eight dimension pairs per call to <code class="highlighter-rouge">ParseAnalytics.TrackEventAsync()</code>.</p>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="data">Data</h1>

<p>We’ve designed the Parse SDKs so that you typically don’t need to worry about how data is saved while using the client SDKs. Simply add data to the Parse <code class="highlighter-rouge">Object</code>, and it’ll be saved correctly.</p>

<p>Nevertheless, there are some cases where it’s useful to be aware of how data is stored on the Parse platform.</p>

<h2 id="data-storage">Data Storage</h2>

<p>Internally, Parse stores data as JSON, so any datatype that can be converted to JSON can be stored on Parse. Refer to the <a href="#objects-data-types">Data Types in Objects</a> section of this guide to see platform-specific examples.</p>

<p>Keys including the characters <code class="highlighter-rouge">$</code> or <code class="highlighter-rouge">.</code>, along with the key <code class="highlighter-rouge">__type</code> key, are reserved for the framework to handle additional types, so don’t use those yourself. Key names must contain only numbers, letters, and underscore, and must start with a letter. Values can be anything that can be JSON-encoded.</p>

<h2 id="data-type-lock-in">Data Type Lock-in</h2>

<p>When a class is initially created, it doesn’t have an inherent schema defined. This means that for the first object, it could have any types of fields you want.</p>

<p>However, after a field has been set at least once, that field is locked into the particular type that was saved. For example, if a <code class="highlighter-rouge">User</code> object is saved with field <code class="highlighter-rouge">name</code> of type <code class="highlighter-rouge">String</code>, that field will be restricted to the <code class="highlighter-rouge">String</code> type only (the server will return an error if you try to save anything else).</p>

<p>One special case is that any field can be set to <code class="highlighter-rouge">null</code>, no matter what type it is.</p>

<h2 id="the-data-browser">The Data Browser</h2>

<p>The Data Browser is the web UI where you can update and create objects in each of your apps. Here, you can see the raw JSON values that are saved that represents each object in your class.</p>

<p>When using the interface, keep in mind the following:</p>

<ul>
  <li>The <code class="highlighter-rouge">objectId</code>, <code class="highlighter-rouge">createdAt</code>, <code class="highlighter-rouge">updatedAt</code> fields cannot be edited (these are set automatically).</li>
  <li>The value “(empty)” denotes that the field has not been set for that particular object (this is different than <code class="highlighter-rouge">null</code>).</li>
  <li>You can remove a field’s value by hitting your Delete key while the value is selected.</li>
</ul>

<p>The Data Browser is also a great place to test the Cloud Code validations contained in your Cloud Code functions (such as <code class="highlighter-rouge">beforeSave</code>). These are run whenever a value is changed or object is deleted from the Data Browser, just as they would be if the value was changed or deleted from your client code.</p>

<h2 id="importing-data">Importing Data</h2>

<p>You may import data into your Parse app by using CSV or JSON files. To create a new class with data from a CSV or JSON file, go to the Data Browser and click the “Import” button on the left hand column.</p>

<p>The JSON format is an array of objects in our REST format or a JSON object with a <code class="highlighter-rouge">results</code> that contains an array of objects. It must adhere to the <a href="http://json.org/">JSON standard</a>. A file containing regular objects could look like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span> <span class="s2">"results"</span><span class="err">:</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">"score"</span><span class="p">:</span> <span class="mi">1337</span><span class="p">,</span>
    <span class="s2">"playerName"</span><span class="p">:</span> <span class="s2">"Sean Plott"</span><span class="p">,</span>
    <span class="s2">"cheatMode"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">"createdAt"</span><span class="p">:</span> <span class="s2">"2012-07-11T20:56:12.347Z"</span><span class="p">,</span>
    <span class="s2">"updatedAt"</span><span class="p">:</span> <span class="s2">"2012-07-11T20:56:12.347Z"</span><span class="p">,</span>
    <span class="s2">"objectId"</span><span class="p">:</span> <span class="s2">"fchpZwSuGG"</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Objects in either format should contain keys and values that also satisfy the following:</p>

<ul>
  <li>Key names must contain only numbers, letters, and underscore, and must start with a letter.</li>
  <li>No value may contain a hard newline ‘<code class="highlighter-rouge">\n</code>’.</li>
</ul>

<p>Normally, when objects are saved to Parse, they are automatically assigned a unique identifier through the <code class="highlighter-rouge">objectId</code> field, as well as a <code class="highlighter-rouge">createdAt</code> field and <code class="highlighter-rouge">updatedAt</code> field which represent the time that the object was created and last modified in the Parse Cloud. These fields can be manually set when data is imported from a JSON file. Please keep in mind the following:</p>

<ul>
  <li>Use a unique 10 character alphanumeric string as the value of your <code class="highlighter-rouge">objectId</code> fields.</li>
  <li>Use a UTC timestamp in the ISO 8601 format when setting a value for the <code class="highlighter-rouge">createdAt</code> field or the <code class="highlighter-rouge">updatedAt</code> field.</li>
</ul>

<p>In addition to the exposed fields, objects in the Parse User class can also have the <code class="highlighter-rouge">bcryptPassword</code> field set. The value of this field is a <code class="highlighter-rouge">String</code> that is the bcrypt hashed password + salt in the modular crypt format described in this <a href="http://stackoverflow.com/a/5882472/1351961">StackOverflow answer</a>. Most OpenSSL based bcrypt implementations should have built-in methods to produce these strings.</p>

<p>A file containing a <code class="highlighter-rouge">User</code> object could look like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span> <span class="s2">"results"</span><span class="err">:</span>
  <span class="p">[{</span>
    <span class="s2">"username"</span><span class="p">:</span> <span class="s2">"cooldude"</span><span class="p">,</span>
    <span class="s2">"createdAt"</span><span class="p">:</span> <span class="s2">"1983-09-13T22:42:30.548Z"</span><span class="p">,</span>
    <span class="s2">"updatedAt"</span><span class="p">:</span> <span class="s2">"2015-09-04T10:12:42.137Z"</span><span class="p">,</span>
    <span class="s2">"objectId"</span><span class="p">:</span> <span class="s2">"ttttSEpfXm"</span><span class="p">,</span>
    <span class="s2">"sessionToken"</span><span class="p">:</span> <span class="s2">"dfwfq3dh0zwe5y2sqv514p4ib"</span><span class="p">,</span>
    <span class="s2">"bcryptPassword"</span><span class="p">:</span> <span class="s2">"$2a$10$ICV5UeEf3lICfnE9W9pN9.O9Ved/ozNo7G83Qbdk5rmyvY8l16MIK"</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Note that in CSV the import field types are limited to <code class="highlighter-rouge">String</code>, <code class="highlighter-rouge">Boolean</code>, and <code class="highlighter-rouge">Number</code>.</p>

<h2 id="exporting-your-data">Exporting your Data</h2>

<p>You can request an export of your data at any time from your app’s Settings page. The data export runs at a lower priority than production queries, so if your app is still serving queries, production traffic will always be given a higher priority, which may slow down the delivery of your data export.</p>

<h3 id="export-formats">Export Formats</h3>

<p>Each collection will be exported in the same JSON format used by our REST API and delivered in a single zipped file. Since data is stored internally as JSON, this allows us to ensure that the export closely matches how the data is saved to Parse. Other formats such as CSV cannot represent all of the data types supported by Parse without losing information. If you’d like to work with your data in CSV format, you can use any of the JSON-to-CSV converters available widely on the web.</p>

<h3 id="offline-analysis">Offline Analysis</h3>

<p>For offline analysis of your data, we highly recommend using alternate ways to access your data that do not require extracting the entire collection at once. For example, you can try exporting only the data that has changed since your last export. Here are some ways of achieving this:</p>

<ul>
  <li>
    <p>Use the JavaScript SDK in a node app. <code class="highlighter-rouge">Parse.Query.each()</code> will allow you to extract every single object that matches a query. You can use date constraints to make sure the query only matches data that has been updated since you last ran this app. Your node app can write this data to disk for offline analysis.</p>
  </li>
  <li>
    <p>Use the REST API in a script. You can run queries against your class and use skip/limit to page through results, which can then be written to disk for offline analysis. You can again use date constraints to make sure only newly updated data is extracted.</p>
  </li>
  <li>
    <p>If the above two options do not fit your needs, you can try using the Data Browser to export data selectively. Use the Funnel icon to create a filter for the specific data that you need to export, such as newly updated objects. Once the filter has been applied, click on the Export data icon on the upper right of your Data Browser. This type of export will only include the objects that match your criteria.</p>
  </li>
</ul>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="relations">Relations</h1>

<p>There are three kinds of relationships. One-to-one relationships enable one object to be associated with another object. One-to-many relationships enable one object to have many related objects. Finally, many-to-many relationships enable complex relationships among many objects.</p>

<p>There are four ways to build relationships in Parse:</p>

<h2 id="one-to-many">One-to-Many</h2>

<p>When you’re thinking about one-to-many relationships and whether to implement Pointers or Arrays, there are several factors to consider. First, how many objects are involved in this relationship? If the “many” side of the relationship could contain a very large number (greater than 100 or so) of objects, then you have to use Pointers. If the number of objects is small (fewer than 100 or so), then Arrays may be more convenient, especially if you typically need to get all of the related objects (the “many” in the “one-to-many relationship”) at the same time as the parent object.</p>

<h3 id="using-pointers">Using Pointers</h3>

<p>Let’s say we have a game app. The game keeps track of the player’s score and achievements every time she chooses to play. In Parse, we can store this data in a single <code class="highlighter-rouge">Game</code> object. If the game becomes incredibly successful, each player will store thousands of <code class="highlighter-rouge">Game</code> objects in the system. For circumstances like this, where the number of relationships can be arbitrarily large, Pointers are the best option.</p>

<p>Suppose in this game app, we want to make sure that every <code class="highlighter-rouge">Game</code> object is associated with a Parse User. We can implement this like so:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseObject</span> <span class="n">game</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ParseObject</span><span class="o">(</span><span class="s">"Game"</span><span class="o">);</span>
<span class="n">game</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"createdBy"</span><span class="o">,</span> <span class="n">ParseUser</span><span class="o">.</span><span class="na">getCurrentUser</span><span class="o">());</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFObject *game= [PFObject objectWithClassName:@"Game"];
[game setObject:[PFUser currentUser] forKey:@"createdBy"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let game = PFObject(className:"Game")
game["createdBy"] = PFUser.currentUser()
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>$game = ParseObject::create("Game");
$game-&gt;set("createdBy", ParseUser::getCurrentUser());
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">game</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"Game"</span><span class="p">);</span>
<span class="n">game</span><span class="p">[</span><span class="s">"createdBy"</span><span class="p">]</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">;</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">game</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="s2">"Game"</span><span class="p">);</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">"createdBy"</span><span class="p">,</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">());</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>We can obtain all of the <code class="highlighter-rouge">Game</code> objects created by a Parse User with a query:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">gameQuery</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"Game"</span><span class="o">);</span>
<span class="n">gameQuery</span><span class="o">.</span><span class="na">whereEqualTo</span><span class="o">(</span><span class="s">"createdBy"</span><span class="o">,</span> <span class="n">ParseUser</span><span class="o">.</span><span class="na">getCurrentUser</span><span class="o">());</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFQuery *gameQuery = [PFQuery queryWithClassName:@"Game"];
[gameQuery whereKey:@"createdBy" equalTo:[PFUser currentUser]];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let gameQuery = PFQuery(className:"Game")
if let user = PFUser.currentUser() {
  gameQuery.whereKey("createdBy", equalTo: user)
}
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>$gameQuery = new ParseQuery("Game");
$gameQuery-&gt;equalTo("createdBy", ParseUser::getCurrentUser());
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">getQuery</span><span class="p">(</span><span class="s">"Game"</span><span class="p">).</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"createdBy"</span><span class="p">,</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="s2">"Game"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="s2">"createdBy"</span><span class="p">,</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">());</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>And, if we want to find the Parse User who created a specific <code class="highlighter-rouge">Game</code>, that is a lookup on the <code class="highlighter-rouge">createdBy</code> key:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// say we have a Game object</span>
<span class="n">ParseObject</span> <span class="n">game</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1">// getting the user who created the Game</span>
<span class="n">ParseUser</span> <span class="n">createdBy</span> <span class="o">=</span> <span class="n">game</span><span class="o">.</span><span class="na">getUser</span><span class="o">(</span><span class="s">"createdBy"</span><span class="o">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// say we have a Game object
PFObject *game = ...

// getting the user who created the Game
PFUser *createdBy = [game objectForKey@"createdBy"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// say we have a Game object
let game = ...

// getting the user who created the Game
let createdBy = game["createdBy"]
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// say we have a Game object
$game = ...

// getting the user who created the Game
$user = $game["createdBy"];
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// say we have a Game object
</span><span class="n">ParseObject</span> <span class="n">game</span> <span class="p">=</span> <span class="p">...</span>

<span class="c1">// getting the user who created the Game
</span><span class="n">ParseUser</span> <span class="n">user</span> <span class="p">=</span> <span class="n">game</span><span class="p">[</span><span class="s">"createdBy"</span><span class="p">];</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="c1">// say we have a Game object</span>
<span class="kd">var</span> <span class="nx">game</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// getting the user who created the Game</span>
<span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"createdBy"</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>For most scenarios, Pointers will be your best bet for implementing one-to-many relationships.</p>

<h3 id="using-arrays">Using Arrays</h3>

<p>Arrays are ideal when we know that the number of objects involved in our one-to-many relationship are going to be small. Arrays will also provide some productivity benefit via the <code class="highlighter-rouge">includeKey</code> parameter. Supplying the parameter will enable you to obtain all of the “many” objects in the “one-to-many” relationship at the same time that you obtain the “one” object. However, the response time will be slower if the number of objects involved in the relationship turns out to be large.</p>

<p>Suppose in our game, we enabled players to keep track of all the weapons their character has accumulated as they play, and there can only be a dozen or so weapons. In this example, we know that the number of weapons is not going to be very large. We also want to enable the player to specify the order in which the weapons will appear on screen. Arrays are ideal here because the size of the array is going to be small and because we also want to preserve the order the user has set each time they play the game:</p>

<p>Let’s start by creating a column on our Parse User object called <code class="highlighter-rouge">weaponsList</code>.</p>

<p>Now let’s store some <code class="highlighter-rouge">Weapon</code> objects in the <code class="highlighter-rouge">weaponsList</code>:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// let's say we have four weapons</span>
<span class="n">ParseObject</span> <span class="n">scimitar</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">ParseObject</span> <span class="n">plasmaRifle</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">ParseObject</span> <span class="n">grenade</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">ParseObject</span> <span class="n">bunnyRabbit</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1">// stick the objects in an array</span>
<span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">weapons</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;();</span>
<span class="n">weapons</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">scimitar</span><span class="o">);</span>
<span class="n">weapons</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">plasmaRifle</span><span class="o">);</span>
<span class="n">weapons</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">grenade</span><span class="o">);</span>
<span class="n">weapons</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bunnyRabbit</span><span class="o">);</span>

<span class="c1">// store the weapons for the user</span>
<span class="n">ParseUser</span><span class="o">.</span><span class="na">getCurrentUser</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">"weaponsList"</span><span class="o">,</span> <span class="n">weapons</span><span class="o">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// let's say we have four weapons
PFObject *scimitar = ...
PFObject *plasmaRifle = ...
PFObject *grenade = ...
PFObject *bunnyRabbit = ...

// stick the objects in an array
NSArray *weapons = @[scimitar, plasmaRifle, grenade, bunnyRabbit];

// store the weapons for the user
[[PFUser currentUser] setObject:weapons forKey:@weaponsList"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// let's say we have four weapons
let scimitar = ...
let plasmaRifle = ...
let grenade = ...
let bunnyRabbit = ...

// stick the objects in an array
let weapons = [scimitar, plasmaRifle, grenade, bunnyRabbit]

// store the weapons for the user
let user = PFUser.currentUser()
user["weaponsList"] = weapons
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// let's say we have four weapons
$scimitar = ...
$plasmaRifle = ...
$grenade = ...
$bunnyRabbit = ...

// stick the objects in an array
$weapons = [$scimitar, $plasmaRifle, $grenade, $bunnyRabbit];

// store the weapons for the user
$user = ParseUser::getCurrentUser();
$user-&gt;set("weaponsList", weapons);
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// let's say we have four weapons
</span><span class="n">var</span> <span class="n">scimitar</span> <span class="p">=</span> <span class="p">...</span>
<span class="n">var</span> <span class="n">plasmaRifle</span> <span class="p">=</span> <span class="p">...</span>
<span class="n">var</span> <span class="n">grenade</span> <span class="p">=</span> <span class="p">...</span>
<span class="n">var</span> <span class="n">bunnyRabbit</span> <span class="p">=</span> <span class="p">...</span>

<span class="c1">// stick the objects in an array
</span><span class="n">var</span> <span class="n">weapons</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;();</span>
<span class="n">weapons</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">scimitar</span><span class="p">);</span>
<span class="n">weapons</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">plasmaRifle</span><span class="p">);</span>
<span class="n">weapons</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">grenade</span><span class="p">);</span>
<span class="n">weapons</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">bunnyRabbit</span><span class="p">);</span>

<span class="c1">// store the weapons for the user
</span><span class="n">var</span> <span class="n">user</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">;</span>
<span class="n">user</span><span class="p">.</span><span class="nf">AddRangeToList</span><span class="p">(</span><span class="s">"weaponsList"</span><span class="p">,</span> <span class="n">weapons</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="c1">// let's say we have four weapons</span>
<span class="kd">var</span> <span class="nx">scimitar</span> <span class="o">=</span> <span class="p">...</span>
<span class="kd">var</span> <span class="nx">plasmaRifle</span> <span class="o">=</span> <span class="p">...</span>
<span class="kd">var</span> <span class="nx">grenade</span> <span class="o">=</span> <span class="p">...</span>
<span class="kd">var</span> <span class="nx">bunnyRabbit</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// stick the objects in an array</span>
<span class="kd">var</span> <span class="nx">weapons</span> <span class="o">=</span> <span class="p">[</span><span class="nx">scimitar</span><span class="p">,</span> <span class="nx">plasmaRifle</span><span class="p">,</span> <span class="nx">grenade</span><span class="p">,</span> <span class="nx">bunnyRabbit</span><span class="p">];</span>

<span class="c1">// store the weapons for the user</span>
<span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">"weaponsList"</span><span class="p">,</span> <span class="nx">weapons</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Later, if we want to retrieve the <code class="highlighter-rouge">Weapon</code> objects, it’s just one line of code:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">weapons</span> <span class="o">=</span> <span class="n">ParseUser</span><span class="o">.</span><span class="na">getCurrentUser</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">"weaponsList"</span><span class="o">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
NSArray *weapons = [[PFUser currentUser] objectForKey:@"weaponsList"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let weapons = PFUser.currentUser()?.objectForKey("weaponsList")
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>$weapons = ParseUser::getCurrentUser()-&gt;get("weaponsList");
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">weapons</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">IList</span><span class="p">&lt;</span><span class="n">Object</span><span class="p">&gt;&gt;(</span><span class="s">"weaponsList"</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">weapons</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="s2">"weaponsList"</span><span class="p">)</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Sometimes, we will want to fetch the “many” objects in our one-to-many relationship at the same time as we fetch the “one” object. One trick we could employ is to use the <code class="highlighter-rouge">includeKey</code> (or <code class="highlighter-rouge">include</code> in Android) parameter whenever we use a Parse Query to also fetch the array of <code class="highlighter-rouge">Weapon</code> objects (stored in the <code class="highlighter-rouge">weaponsList</code> column) along with the Parse User object:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// set up our query for a User object</span>
<span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseUser</span><span class="o">&gt;</span> <span class="n">userQuery</span> <span class="o">=</span> <span class="n">ParseUser</span><span class="o">.</span><span class="na">getQuery</span><span class="o">();</span>

<span class="c1">// configure any constraints on your query...</span>
<span class="c1">// for example, you may want users who are also playing with or against you</span>
<span class="c1">// tell the query to fetch all of the Weapon objects along with the user</span>
<span class="c1">// get the "many" at the same time that you're getting the "one"</span>
<span class="n">userQuery</span><span class="o">.</span><span class="na">include</span><span class="o">(</span><span class="s">"weaponsList"</span><span class="o">);</span>

<span class="c1">// execute the query</span>
<span class="n">userQuery</span><span class="o">.</span><span class="na">findInBackground</span><span class="o">(</span><span class="k">new</span> <span class="n">FindCallback</span><span class="o">&lt;</span><span class="n">ParseUser</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ParseUser</span><span class="o">&gt;</span> <span class="n">userList</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// userList contains all of the User objects, and their associated Weapon objects, too</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// set up our query for a User object
PFQuery *userQuery = [PFUser query];

// configure any constraints on your query...
// for example, you may want users who are also playing with or against you

// tell the query to fetch all of the Weapon objects along with the user
// get the "many" at the same time that you're getting the "one"
[userQuery includeKey:@"weaponsList"];

// execute the query
[userQuery findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
    // objects contains all of the User objects, and their associated Weapon objects, too
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// set up our query for a User object
let userQuery = PFUser.query();

// configure any constraints on your query...
// for example, you may want users who are also playing with or against you

// tell the query to fetch all of the Weapon objects along with the user
// get the "many" at the same time that you're getting the "one"
userQuery?.includeKey("weaponsList");

// execute the query
userQuery?.findObjectsInBackgroundWithBlock {
    (objects: [AnyObject]?, error: NSError?) -&gt; Void in
    // objects contains all of the User objects, and their associated Weapon objects, too
}
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// set up our query for a User object
$userQuery = ParseUser::query();

// configure any constraints on your query...
// for example, you may want users who are also playing with or against you

// tell the query to fetch all of the Weapon objects along with the user
// get the "many" at the same time that you're getting the "one"
$userQuery-&gt;includeKey("weaponsList");

// execute the query
$results = $userQuery-&gt;find();
// results contains all of the User objects, and their associated Weapon objects, too
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// set up our query for a User object
</span><span class="n">var</span> <span class="n">userQuery</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">Query</span><span class="p">;</span>

<span class="c1">// configure any constraints on your query...
// for example, you may want users who are also playing with or against you
</span>
<span class="c1">// tell the query to fetch all of the Weapon objects along with the user
// get the "many" at the same time that you're getting the "one"
</span><span class="n">userQuery</span> <span class="p">=</span> <span class="n">userQuery</span><span class="p">.</span><span class="nf">Include</span><span class="p">(</span><span class="s">"weaponsList"</span><span class="p">);</span>

<span class="c1">// execute the query
</span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseUser</span><span class="p">&gt;</span> <span class="n">results</span> <span class="p">=</span> <span class="n">await</span> <span class="n">userQuery</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">();</span>
<span class="c1">// results contains all of the User objects, and their associated Weapon objects, too
</span></code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="c1">// set up our query for a User object</span>
<span class="kd">var</span> <span class="nx">userQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span>

<span class="c1">// configure any constraints on your query...</span>
<span class="c1">// for example, you may want users who are also playing with or against you</span>

<span class="c1">// tell the query to fetch all of the Weapon objects along with the user</span>
<span class="c1">// get the "many" at the same time that you're getting the "one"</span>
<span class="nx">userQuery</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="s2">"weaponsList"</span><span class="p">);</span>

<span class="c1">// execute the query</span>
<span class="nx">userQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">){</span>
    <span class="c1">// results contains all of the User objects, and their associated Weapon objects, too</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>You can also get the “one” side of the one-to-many relationship from the “many” side. For example, if we want to find all Parse User objects who also have a given <code class="highlighter-rouge">Weapon</code>, we can write a constraint for our query like this:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// add a constraint to query for whenever a specific Weapon is in an array</span>
<span class="n">userQuery</span><span class="o">.</span><span class="na">whereEqualTo</span><span class="o">(</span><span class="s">"weaponsList"</span><span class="o">,</span> <span class="n">scimitar</span><span class="o">);</span>

<span class="c1">// or query using an array of Weapon objects...</span>
<span class="n">userQuery</span><span class="o">.</span><span class="na">whereEqualTo</span><span class="o">(</span><span class="s">"weaponsList"</span><span class="o">,</span> <span class="n">arrayOfWeapons</span><span class="o">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// add a constraint to query for whenever a specific Weapon is in an array
[userQuery whereKey:@"weaponsList" equalTo:scimitar];

// or query using an array of Weapon objects...
[userQuery whereKey:@"weaponsList" containedIn:arrayOfWeapons];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// add a constraint to query for whenever a specific Weapon is in an array
userQuery?.whereKey("weaponsList", equalTo: scimitar);

// or query using an array of Weapon objects...
userQuery?.whereKey("weaponsList", containedIn: arrayOfWeapons)
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// add a constraint to query for whenever a specific Weapon is in an array
$userQuery-&gt;equalTo("weaponsList", $scimitar);

// or query using an array of Weapon objects...
$userQuery-&gt;containedIn("weaponsList", $arrayOfWeapons);
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// add a constraint to query for whenever a specific Weapon is in an array
</span><span class="n">userQuery</span> <span class="p">=</span> <span class="n">userQuery</span><span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"weaponsList"</span><span class="p">,</span> <span class="n">scimitar</span><span class="p">);</span>

<span class="c1">// or query using an array of Weapon objects...
</span><span class="n">userQuery</span> <span class="p">=</span> <span class="n">userQuery</span><span class="p">.</span><span class="nf">WhereContainedIn</span><span class="p">(</span><span class="s">"weaponsList"</span><span class="p">,</span> <span class="n">arrayOfWeapons</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="c1">// add a constraint to query for whenever a specific Weapon is in an array</span>
<span class="nx">userQuery</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="s2">"weaponsList"</span><span class="p">,</span> <span class="nx">scimitar</span><span class="p">);</span>

<span class="c1">// or query using an array of Weapon objects...</span>
<span class="nx">userQuery</span><span class="p">.</span><span class="nx">containedIn</span><span class="p">(</span><span class="s2">"weaponsList"</span><span class="p">,</span> <span class="nx">arrayOfWeapons</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<h2 id="many-to-many">Many-to-Many</h2>

<p>Now let’s tackle many-to-many relationships. Suppose we had a book reading app and we wanted to model <code class="highlighter-rouge">Book</code> objects and <code class="highlighter-rouge">Author</code> objects. As we know, a given author can write many books, and a given book can have multiple authors. This is a many-to-many relationship scenario where you have to choose between Arrays, Parse Relations, or creating your own Join Table.</p>

<p>The decision point here is whether you want to attach any metadata to the relationship between two entities. If you don’t, Parse Relation or using Arrays are going to be the easiest alternatives. In general, using arrays will lead to higher performance and require fewer queries. If either side of the many-to-many relationship could lead to an array with more than 100 or so objects, then, for the same reason Pointers were better for one-to-many relationships, Parse Relation or Join Tables will be better alternatives.</p>

<p>On the other hand, if you want to attach metadata to the relationship, then create a separate table (the “Join Table”) to house both ends of the relationship. Remember, this is information <strong>about the relationship</strong>, not about the objects on either side of the relationship. Some examples of metadata you may be interested in, which would necessitate a Join Table approach, include:</p>

<h3 id="using-parse-relations">Using Parse Relations</h3>

<p>Using Parse Relations, we can create a relationship between a <code class="highlighter-rouge">Book</code> and a few <code class="highlighter-rouge">Author</code> objects. In the Data Browser, you can create a column on the <code class="highlighter-rouge">Book</code> object of type relation and name it <code class="highlighter-rouge">authors</code>.</p>

<p>After that, we can associate a few authors with this book:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// let’s say we have a few objects representing Author objects</span>
<span class="n">ParseObject</span> <span class="n">authorOne</span> <span class="o">=</span>
<span class="n">ParseObject</span> <span class="n">authorTwo</span> <span class="o">=</span>
<span class="n">ParseObject</span> <span class="n">authorThree</span> <span class="o">=</span>

<span class="c1">// now we create a book object</span>
<span class="n">ParseObject</span> <span class="n">book</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ParseObject</span><span class="o">(</span><span class="s">"Book"</span><span class="o">);</span>

<span class="c1">// now let’s associate the authors with the book</span>
<span class="c1">// remember, we created a "authors" relation on Book</span>
<span class="n">ParseRelation</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">relation</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="na">getRelation</span><span class="o">(</span><span class="s">"authors"</span><span class="o">);</span>
<span class="n">relation</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">authorOne</span><span class="o">);</span>
<span class="n">relation</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">authorTwo</span><span class="o">);</span>
<span class="n">relation</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">authorThree</span><span class="o">);</span>

<span class="c1">// now save the book object</span>
<span class="n">book</span><span class="o">.</span><span class="na">saveInBackground</span><span class="o">();</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// let’s say we have a few objects representing Author objects
PFObject *authorOne = …
PFObject *authorTwo = …
PFObject *authorThree = …

// now we create a book object
PFObject *book= [PFObject objectWithClassName:@"Book"];

// now let’s associate the authors with the book
// remember, we created a "authors" relation on Book
PFRelation *relation = [book relationForKey:@"authors"];
[relation addObject:authorOne];
[relation addObject:authorTwo];
[relation addObject:authorThree];

// now save the book object
[book saveInBackground];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// let’s say we have a few objects representing Author objects
let authorOne = ...
let authorTwo = ...
let authorThree = ...

// now we create a book object
let book = PFObject(className: "Book")

// now let’s associate the authors with the book
// remember, we created a "authors" relation on Book
let relation = book.relationForKey("authors")
relation.addObject(authorOne)
relation.addObject(authorTwo)
relation.addObject(authorThree)

// now save the book object
book.saveInBackground()
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// let’s say we have a few objects representing Author objects
$authorOne = ...
$authorTwo = ...
$authorThree = ...

// now we create a book object
$book = new ParseObject("Book");

// now let’s associate the authors with the book
// remember, we created a "authors" relation on Book
$relation = $book-&gt;getRelation("authors");
$relation-&gt;add($authorOne);
$relation-&gt;add($authorTwo);
$relation-&gt;add($authorThree);

// now save the book object
$book-&gt;save();
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// let’s say we have a few objects representing Author objects
</span><span class="n">var</span> <span class="n">authorOne</span> <span class="p">=</span> <span class="p">...</span>
<span class="n">var</span> <span class="n">authorTwo</span> <span class="p">=</span> <span class="p">...</span>
<span class="n">var</span> <span class="n">authorThree</span> <span class="p">=</span> <span class="p">...</span>

<span class="c1">// now we create a book object
</span><span class="n">var</span> <span class="n">book</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"Book"</span><span class="p">);</span>

<span class="c1">// now let’s associate the authors with the book
// remember, we created a "authors" relation on Book
</span><span class="n">var</span> <span class="n">relation</span> <span class="p">=</span> <span class="n">book</span><span class="p">.</span><span class="n">GetRelation</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;(</span><span class="s">"authors"</span><span class="p">);</span>
<span class="n">relation</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">authorOne</span><span class="p">);</span>
<span class="n">relation</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">authorTwo</span><span class="p">);</span>
<span class="n">relation</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">authorThree</span><span class="p">);</span>

<span class="c1">// now save the book object
</span><span class="n">await</span> <span class="n">book</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="c1">// let’s say we have a few objects representing Author objects</span>
<span class="kd">var</span> <span class="nx">authorOne</span> <span class="o">=</span> <span class="p">...</span>
<span class="kd">var</span> <span class="nx">authorTwo</span> <span class="o">=</span> <span class="p">...</span>
<span class="kd">var</span> <span class="nx">authorThree</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// now we create a book object</span>
<span class="kd">var</span> <span class="nx">book</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="s2">"Book"</span><span class="p">);</span>

<span class="c1">// now let’s associate the authors with the book</span>
<span class="c1">// remember, we created a "authors" relation on Book</span>
<span class="kd">var</span> <span class="nx">relation</span> <span class="o">=</span> <span class="nx">book</span><span class="p">.</span><span class="nx">relation</span><span class="p">(</span><span class="s2">"authors"</span><span class="p">);</span>
<span class="nx">relation</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">authorOne</span><span class="p">);</span>
<span class="nx">relation</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">authorTwo</span><span class="p">);</span>
<span class="nx">relation</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">authorThree</span><span class="p">);</span>

<span class="c1">// now save the book object</span>
<span class="nx">book</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>To get the list of authors who wrote a book, create a query:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// suppose we have a book object</span>
<span class="n">ParseObject</span> <span class="n">book</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1">// create a relation based on the authors key</span>
<span class="n">ParseRelation</span> <span class="n">relation</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="na">getRelation</span><span class="o">(</span><span class="s">"authors"</span><span class="o">);</span>

<span class="c1">// generate a query based on that relation</span>
<span class="n">ParseQuery</span> <span class="n">query</span> <span class="o">=</span> <span class="n">relation</span><span class="o">.</span><span class="na">getQuery</span><span class="o">();</span>

<span class="c1">// now execute the query</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// suppose we have a book object
PFObject *book = ...

// create a relation based on the authors key
PFRelation *relation = [book relationForKey:@"authors"];

// generate a query based on that relation
PFQuery *query = [relation query];

// now execute the query
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// suppose we have a book object
let book = ...

// create a relation based on the authors key
let relation = book.relationForKey("authors")

// generate a query based on that relation
let query = relation.query()

// now execute the query
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// suppose we have a book object
$book = ...

// create a relation based on the authors key
$relation = $book-&gt;getRelation("authors");

// generate a query based on that relation
$query = $relation-&gt;getQuery();

// now execute the query
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// suppose we have a book object
</span><span class="n">var</span> <span class="n">book</span> <span class="p">=</span> <span class="p">...</span>

<span class="c1">// create a relation based on the authors key
</span><span class="n">var</span> <span class="n">relation</span> <span class="p">=</span> <span class="n">book</span><span class="p">.</span><span class="n">GetRelation</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;(</span><span class="s">"authors"</span><span class="p">);</span>

<span class="c1">// generate a query based on that relation
</span><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">relation</span><span class="p">.</span><span class="n">Query</span><span class="p">;</span>

<span class="c1">// now execute the query
</span></code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="c1">// suppose we have a book object</span>
<span class="kd">var</span> <span class="nx">book</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// create a relation based on the authors key</span>
<span class="kd">var</span> <span class="nx">relation</span> <span class="o">=</span> <span class="nx">book</span><span class="p">.</span><span class="nx">relation</span><span class="p">(</span><span class="s2">"authors"</span><span class="p">);</span>

<span class="c1">// generate a query based on that relation</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">relation</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>

<span class="c1">// now execute the query</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Perhaps you even want to get a list of all the books to which an author contributed. You can create a slightly different kind of query to get the inverse of the relationship:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// suppose we have a author object, for which we want to get all books</span>
<span class="n">ParseObject</span> <span class="n">author</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1">// first we will create a query on the Book object</span>
<span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"Book"</span><span class="o">);</span>

<span class="c1">// now we will query the authors relation to see if the author object we have</span>
<span class="c1">// is contained therein</span>
<span class="n">query</span><span class="o">.</span><span class="na">whereEqualTo</span><span class="o">(</span><span class="s">"authors"</span><span class="o">,</span> <span class="n">author</span><span class="o">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// suppose we have a author object, for which we want to get all books
PFObject *author = ...

// first we will create a query on the Book object
PFQuery *query = [PFQuery queryWithClassName:@"Book"];

// now we will query the authors relation to see if the author object
// we have is contained therein
[query whereKey:@"authors" equalTo:author];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// suppose we have a author object, for which we want to get all books
let author = ...

// first we will create a query on the Book object
let query = PFQuery(className: "Book")

// now we will query the authors relation to see if the author object
// we have is contained therein
query?.whereKey("authors", equalTo: author)
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// suppose we have a author object, for which we want to get all books
$author = ...

// first we will create a query on the Book object
$query = new ParseQuery("Book");

// now we will query the authors relation to see if the author object we have
// is contained therein
$query-&gt;equalTo("authors", $author);
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// suppose we have a author object, for which we want to get all books
</span><span class="n">var</span> <span class="n">author</span> <span class="p">=</span> <span class="p">...</span>

<span class="c1">// first we will create a query on the Book object
</span><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Book"</span><span class="p">);</span>

<span class="c1">// now we will query the authors relation to see if the author object we have
// is contained therein
</span><span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"authors"</span><span class="p">,</span> <span class="n">author</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="c1">// suppose we have a author object, for which we want to get all books</span>
<span class="kd">var</span> <span class="nx">author</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// first we will create a query on the Book object</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="s2">"Book"</span><span class="p">);</span>

<span class="c1">// now we will query the authors relation to see if the author object we have</span>
<span class="c1">// is contained therein</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="s2">"authors"</span><span class="p">,</span> <span class="nx">author</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<h3 id="using-join-tables">Using Join Tables</h3>

<p>There may be certain cases where we want to know more about a relationship. For example, suppose we were modeling a following/follower relationship between users: a given user can follow another user, much as they would in popular social networks. In our app, we not only want to know if User A is following User B, but we also want to know <strong>when</strong> User A started following User B. This information could not be contained in a Parse Relation. In order to keep track of this data, you must create a separate table in which the relationship is tracked. This table, which we will call <code class="highlighter-rouge">Follow</code>, would have a <code class="highlighter-rouge">from</code> column and a <code class="highlighter-rouge">to</code> column, each with a pointer to a Parse User. Alongside the relationship, you can also add a column with a <code class="highlighter-rouge">Date</code> object named <code class="highlighter-rouge">date</code>.</p>

<p>Now, when you want to save the following relationship between two users, create a row in the <code class="highlighter-rouge">Follow</code> table, filling in the <code class="highlighter-rouge">from</code>, <code class="highlighter-rouge">to</code>, and <code class="highlighter-rouge">date</code> keys appropriately:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// suppose we have a user we want to follow</span>
<span class="n">ParseUser</span> <span class="n">otherUser</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1">// create an entry in the Follow table</span>
<span class="n">ParseObject</span> <span class="n">follow</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ParseObject</span><span class="o">(</span><span class="s">"Follow"</span><span class="o">);</span>
<span class="n">follow</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"from"</span><span class="o">,</span> <span class="n">ParseUser</span><span class="o">.</span><span class="na">getCurrentUser</span><span class="o">());</span>
<span class="n">follow</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"to"</span><span class="o">,</span> <span class="n">otherUser</span><span class="o">);</span>
<span class="n">follow</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"date"</span><span class="o">,</span> <span class="n">Date</span><span class="o">());</span>
<span class="n">follow</span><span class="o">.</span><span class="na">saveInBackground</span><span class="o">();</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// suppose we have a user we want to follow
PFUser *otherUser = ...

// create an entry in the Follow table
PFObject *follow = [PFObject objectWithClassName:@"Follow"];
[follow setObject:[PFUser currentUser]  forKey:@"from"];
[follow setObject:otherUser forKey:@"to"];
[follow setObject:[NSDate date] forKey@"date"];
[follow saveInBackground];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// suppose we have a user we want to follow
let otherUser = ...

// create an entry in the Follow table
let follow = PFObject(className: "Follow")
follow.setObject(PFUser.currentUser()!, forKey: "from")
follow.setObject(otherUser, forKey: "to")
follow.setObject(NSDate(), forKey: "date")
follow.saveInBackground()
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// suppose we have a user we want to follow
$otherUser = ...

// create an entry in the Follow table
$follow = new ParseObject("Follow");
$follow-&gt;set("from", ParseUser::getCurrentUser());
$follow-&gt;set("to", $otherUser);
$follow-&gt;set("date", new DateTime());
$follow-&gt;save();
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// suppose we have a user we want to follow
</span><span class="n">ParseUser</span> <span class="n">otherUser</span> <span class="p">=</span> <span class="p">...</span>

<span class="c1">// create an entry in the Follow table
</span><span class="n">var</span> <span class="n">follow</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"Follow"</span><span class="p">);</span>
<span class="n">follow</span><span class="p">[</span><span class="s">"from"</span><span class="p">]</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">;</span>
<span class="n">follow</span><span class="p">[</span><span class="s">"to"</span><span class="p">]</span> <span class="p">=</span> <span class="n">otherUser</span><span class="p">;</span>
<span class="n">follow</span><span class="p">[</span><span class="s">"date"</span><span class="p">]</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">;</span>
<span class="n">await</span> <span class="n">follow</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">otherUser</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// create an entry in the Follow table</span>
<span class="kd">var</span> <span class="nx">follow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="s2">"Follow"</span><span class="p">);</span>
<span class="nx">follow</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">"from"</span><span class="p">,</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">());</span>
<span class="nx">follow</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">"to"</span><span class="p">,</span> <span class="nx">otherUser</span><span class="p">);</span>
<span class="nx">follow</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">"date"</span><span class="p">,</span> <span class="nb">Date</span><span class="p">());</span>
<span class="nx">follow</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>If we want to find all of the people we are following, we can execute a query on the <code class="highlighter-rouge">Follow</code> table:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// set up the query on the Follow table</span>
<span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"Follow"</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">whereEqualTo</span><span class="o">(</span><span class="s">"from"</span><span class="o">,</span> <span class="n">ParseUser</span><span class="o">.</span><span class="na">getCurrentUser</span><span class="o">());</span>

<span class="c1">// execute the query</span>
<span class="n">query</span><span class="o">.</span><span class="na">findInBackground</span><span class="o">(</span><span class="n">newFindCallback</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">followList</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// set up the query on the Follow table
PFQuery *query = [PFQuery queryWithClassName:@"Follow"];
[query whereKey:@"from" equalTo:[PFUser currentUser]];

// execute the query
[query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
  for(PFObject *o in objects) {
    // o is an entry in the Follow table
    // to get the user, we get the object with the to key
    PFUser *otherUser = [o objectForKey@"to"];

    // to get the time when we followed this user, get the date key
    PFObject *when = [o objectForKey@"date"];
  }
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// set up the query on the Follow table
let query = PFQuery(className: "Follow")
query.whereKey("from", equalTo: PFUser.currentUser()!)

// execute the query
query.findObjectsInBackgroundWithBlock{
	(objects: [AnyObject]?, error: NSError?) -&gt; Void in
    if let objects = objects {
        for o in objects {
            // o is an entry in the Follow table
            // to get the user, we get the object with the to key
            let otherUse = o.objectForKey("to") as? PFUser

            // to get the time when we followed this user, get the date key
            let when = o.objectForKey("date") as? PFObject
        }
    }
}
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// set up the query on the Follow table
$query = new ParseQuery("Follow");
$query-&gt;equalTo("from", ParseUser::getCurrentUser());

// execute the query
$results = $query-&gt;find();
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// set up the query on the Follow table
</span><span class="n">ParseQuery</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseQuery</span><span class="p">.</span><span class="nf">getQuery</span><span class="p">(</span><span class="s">"Follow"</span><span class="p">);</span>
<span class="n">query</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"from"</span><span class="p">,</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">);</span>

<span class="c1">// execute the query
</span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">results</span> <span class="p">=</span> <span class="n">await</span> <span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="s2">"Follow"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="s2">"from"</span><span class="p">,</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">());</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">users</span><span class="p">){</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>It’s also pretty easy to find all the users that are following the current user by querying on the <code class="highlighter-rouge">to</code> key:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// set up the query on the Follow table</span>
<span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"Follow"</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">whereEqualTo</span><span class="o">(</span><span class="s">"to"</span><span class="o">,</span> <span class="n">ParseUser</span><span class="o">.</span><span class="na">getCurrentUser</span><span class="o">());</span>

<span class="c1">// execute the query</span>
<span class="n">query</span><span class="o">.</span><span class="na">findInBackground</span><span class="o">(</span><span class="n">newFindCallback</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">followList</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// set up the query on the Follow table
PFQuery *query = [PFQuery queryWithClassName:@"Follow"];
[query whereKey:@"to" equalTo:[PFUser currentUser]];

[query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
  for(PFObject *o in objects) {
     // o is an entry in the Follow table
     // to get the user, we get the object with the from key
    PFUser *otherUser = [o objectForKey@"from"];

    // to get the time the user was followed, get the date key
    PFObject *when = [o objectForKey@"date"];
  }
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// set up the query on the Follow table
let query = PFQuery(className: "Follow")
query.whereKey("to", equalTo: PFUser.currentUser()!)

query.findObjectsInBackgroundWithBlock{
	(objects: [AnyObject]?, error: NSError?) -&gt; Void in
    if let objects = objects {
        for o in objects {
            // o is an entry in the Follow table
            // to get the user, we get the object with the to key
            let otherUse = o.objectForKey("to") as? PFUser

            // to get the time when we followed this user, get the date key
            let when = o.objectForKey("date") as? PFObject
        }

    }
}
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// create an entry in the Follow table
$query = new ParseQuery("Follow");
$query-&gt;equalTo("to", ParseUser::getCurrentUser());
$results = $query-&gt;find();
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// create an entry in the Follow table
</span><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Follow"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"to"</span><span class="p">,</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">);</span>
<span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">results</span> <span class="p">=</span> <span class="n">await</span> <span class="n">query</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="c1">// create an entry in the Follow table</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="s2">"Follow"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="s2">"to"</span><span class="p">,</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">());</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">users</span><span class="p">){</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<h3 id="using-an-array">Using an Array</h3>

<p>Arrays are used in Many-to-Many relationships in much the same way that they are for One-to-Many relationships. All objects on one side of the relationship will have an Array column containing several objects on the other side of the relationship.</p>

<p>Suppose we have a book reading app with <code class="highlighter-rouge">Book</code> and <code class="highlighter-rouge">Author</code> objects. The <code class="highlighter-rouge">Book</code> object will contain an Array of <code class="highlighter-rouge">Author</code> objects (with a key named <code class="highlighter-rouge">authors</code>). Arrays are a great fit for this scenario because it’s highly unlikely that a book will have more than 100 or so authors. We will put the Array in the <code class="highlighter-rouge">Book</code> object for this reason. After all, an author could write more than 100 books.</p>

<p>Here is how we save a relationship between a <code class="highlighter-rouge">Book</code> and an <code class="highlighter-rouge">Author</code>.</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// let's say we have an author</span>
<span class="n">ParseObject</span> <span class="n">author</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1">// and let's also say we have an book</span>
<span class="n">ParseObject</span> <span class="n">book</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1">// add the author to the authors list for the book</span>
<span class="n">book</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"authors"</span><span class="o">,</span> <span class="n">author</span><span class="o">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// let's say we have an author
PFObject *author = ...

// and let's also say we have an book
PFObject *book = ...

// add the author to the authors list for the book
[book addObject:author forKey:@"authors"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// let's say we have an author
let author = ...

// and let's also say we have an book
let book = ...

// add the author to the authors list for the book
book.addObject(author, forKey: "authors")
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// let's say we have an author
$author = ...

// and let's also say we have an book
$book = ...

// add the author to the authors list for the book
$book-&gt;addUnique("authors", array($author));
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// let's say we have an author
</span><span class="n">var</span> <span class="n">author</span> <span class="p">=</span> <span class="p">...</span>

<span class="c1">// and let's also say we have an book
</span><span class="n">var</span> <span class="n">book</span> <span class="p">=</span> <span class="p">...</span>

<span class="c1">// add the author to the authors list for the book
</span><span class="n">book</span><span class="p">.</span><span class="nf">AddToList</span><span class="p">(</span><span class="s">"authors"</span><span class="p">,</span> <span class="n">author</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="c1">// let's say we have an author</span>
<span class="kd">var</span> <span class="nx">author</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// and let's also say we have an book</span>
<span class="kd">var</span> <span class="nx">book</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// add the author to the authors list for the book</span>
<span class="nx">book</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">"authors"</span><span class="p">,</span> <span class="nx">author</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Because the author list is an Array, you should use the <code class="highlighter-rouge">includeKey</code> (or <code class="highlighter-rouge">include</code> on Android) parameter when fetching a <code class="highlighter-rouge">Book</code> so that Parse returns all the authors when it also returns the book:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// set up our query for the Book object</span>
<span class="n">ParseQuery</span> <span class="n">bookQuery</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"Book"</span><span class="o">);</span>

<span class="c1">// configure any constraints on your query...</span>
<span class="c1">// tell the query to fetch all of the Author objects along with the Book</span>
<span class="n">bookQuery</span><span class="o">.</span><span class="na">include</span><span class="o">(</span><span class="s">"authors"</span><span class="o">);</span>

<span class="c1">// execute the query</span>
<span class="n">bookQuery</span><span class="o">.</span><span class="na">findInBackground</span><span class="o">(</span><span class="n">newFindCallback</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">bookList</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// set up our query for the Book object
PFQuery *bookQuery = [PFQuery queryWithClassName:@"Book"];

// configure any constraints on your query...
// tell the query to fetch all of the Author objects along with the Book
[bookQuery includeKey:@"authors"];

// execute the query
[bookQuery findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
    // objects is all of the Book objects, and their associated
    // Author objects, too
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// set up our query for the Book object
let bookQuery = PFQuery(className: "Book")

// configure any constraints on your query...
// tell the query to fetch all of the Author objects along with the Book
bookQuery.includeKey("authors")

// execute the query
bookQuery.findObjectsInBackgroundWithBlock{
    (objects: [AnyObject]?, error: NSError?) -&gt; Void in
    // objects is all of the Book objects, and their associated
    // Author objects, too
}
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// set up our query for the Book object
$bookQuery = new ParseQuery("Book");

// configure any constraints on your query...
// tell the query to fetch all of the Author objects along with the Book
$bookQuery-&gt;includeKey("authors");

// execute the query
$books= $bookQuery-&gt;find();
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// set up our query for the Book object
</span><span class="n">var</span> <span class="n">bookQuery</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Book"</span><span class="p">);</span>

<span class="c1">// configure any constraints on your query...
// tell the query to fetch all of the Author objects along with the Book
</span><span class="n">bookQuery</span> <span class="p">=</span> <span class="n">bookQuery</span><span class="p">.</span><span class="nf">Include</span><span class="p">(</span><span class="s">"authors"</span><span class="p">);</span>

<span class="c1">// execute the query
</span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">books</span><span class="p">=</span> <span class="n">await</span> <span class="n">bookQuery</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="c1">// set up our query for the Book object</span>
<span class="kd">var</span> <span class="nx">bookQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="s2">"Book"</span><span class="p">);</span>

<span class="c1">// configure any constraints on your query...</span>
<span class="c1">// tell the query to fetch all of the Author objects along with the Book</span>
<span class="nx">bookQuery</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="s2">"authors"</span><span class="p">);</span>

<span class="c1">// execute the query</span>
<span class="nx">bookQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">books</span><span class="p">){</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>At that point, getting all the <code class="highlighter-rouge">Author</code> objects in a given <code class="highlighter-rouge">Book</code> is a pretty straightforward call:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">authorList</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="na">getList</span><span class="o">(</span><span class="s">"authors"</span><span class="o">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
NSArray *authorList = [book objectForKey@"authors"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let authorList = book.objectForKey("authors") as? NSArray
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>$authorList = $book-&gt;get("authors");
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">authorList</span> <span class="p">=</span> <span class="n">book</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;&gt;(</span><span class="s">"authors"</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">authorList</span> <span class="o">=</span> <span class="nx">book</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"authors"</span><span class="p">)</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Finally, suppose you have an <code class="highlighter-rouge">Author</code> and you want to find all the <code class="highlighter-rouge">Book</code> objects in which she appears. This is also a pretty straightforward query with an associated constraint:</p>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// set up our query for the Book object</span>
<span class="n">ParseQuery</span> <span class="n">bookQuery</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"Book"</span><span class="o">);</span>

<span class="c1">// configure any constraints on your query...</span>
<span class="n">booKQuery</span><span class="o">.</span><span class="na">whereEqualTo</span><span class="o">(</span><span class="s">"authors"</span><span class="o">,</span> <span class="n">author</span><span class="o">);</span>

<span class="c1">// tell the query to fetch all of the Author objects along with the Book</span>
<span class="n">bookQuery</span><span class="o">.</span><span class="na">include</span><span class="o">(</span><span class="s">"authors"</span><span class="o">);</span>

<span class="c1">// execute the query</span>
<span class="n">bookQuery</span><span class="o">.</span><span class="na">findInBackground</span><span class="o">(</span><span class="n">newFindCallback</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">bookList</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
// suppose we have an Author object
PFObject *author = ...

// set up our query for the Book object
PFQuery *bookQuery = [PFQuery queryWithClassName:@"Book"];

// configure any constraints on your query...
[bookQuery whereKey:@"authors" equalTo:author];

// tell the query to fetch all of the Author objects along with the Book
[bookQuery includeKey:@"authors"];

// execute the query
[bookQuery findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
    // objects is all of the Book objects, and their associated Author objects, too
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
// suppose we have an Author object
let author = ...

// set up our query for the Book object
let bookQuery = PFQuery(className: "Book")

// configure any constraints on your query...
bookQuery.whereKey("authors", equalTo: author)

// tell the query to fetch all of the Author objects along with the Book
bookQuery.includeKey("authors")

// execute the query
bookQuery.findObjectsInBackgroundWithBlock{
	(objects: [AnyObject]?, error: NSError?) -&gt; Void in
    // objects is all of the Book objects, and their associated Author objects, too
}
</code></pre>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>// set up our query for the Book object
$bookQuery = new ParseQuery("Book");

// configure any constraints on your query...
$bookQuery-&gt;equalTo("authors", $author);

// tell the query to fetch all of the Author objects along with the Book
$bookQuery-&gt;includeKey("authors");

// execute the query
$books = $bookQuery-&gt;find();
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// set up our query for the Book object
</span><span class="n">var</span> <span class="n">bookQuery</span> <span class="p">=</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Book"</span><span class="p">);</span>

<span class="c1">// configure any constraints on your query...
</span><span class="n">bookQuery</span> <span class="p">=</span> <span class="n">bookQuery</span><span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"authors"</span><span class="p">,</span> <span class="n">author</span><span class="p">);</span>

<span class="c1">// tell the query to fetch all of the Author objects along with the Book
</span><span class="n">bookQuery</span> <span class="p">=</span> <span class="n">bookQuery</span><span class="p">.</span><span class="nf">Include</span><span class="p">(</span><span class="s">"authors"</span><span class="p">);</span>

<span class="c1">// execute the query
</span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">ParseObject</span><span class="p">&gt;</span> <span class="n">books</span> <span class="p">=</span> <span class="n">await</span> <span class="n">bookQuery</span><span class="p">.</span><span class="nf">FindAsync</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="c1">// set up our query for the Book object</span>
<span class="kd">var</span> <span class="nx">bookQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="s2">"Book"</span><span class="p">);</span>

<span class="c1">// configure any constraints on your query...</span>
<span class="nx">bookQuery</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="s2">"authors"</span><span class="p">,</span> <span class="nx">author</span><span class="p">);</span>

<span class="c1">// tell the query to fetch all of the Author objects along with the Book</span>
<span class="nx">bookQuery</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="s2">"authors"</span><span class="p">);</span>

<span class="c1">// execute the query</span>
<span class="nx">bookQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">books</span><span class="p">){</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<h2 id="one-to-one">One-to-One</h2>

<p>In Parse, a one-to-one relationship is great for situations where you need to split one object into two objects. These situations should be rare, but two examples include:</p>

<ul>
  <li><strong>Limiting visibility of some user data.</strong> In this scenario, you would split the object in two, where one portion of the object contains data that is visible to other users, while the related object contains data that is private to the original user (and protected via ACLs).</li>
  <li><strong>Splitting up an object for size.</strong> In this scenario, your original object is greater than the 128K maximum size permitted for an object, so you decide to create a secondary object to house extra data. It is usually better to design your data model to avoid objects this large, rather than splitting them up. If you can’t avoid doing so, you can also consider storing large data in a Parse File.</li>
</ul>

<p>Thank you for reading this far. We apologize for the complexity. Modeling relationships in data is a hard subject, in general. But look on the bright side: it’s still easier than relationships with people.</p>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="handling-errors">Handling Errors</h1>

<p>Parse has a few simple patterns for surfacing errors and handling them in your code.</p>

<p>There are two types of errors you may encounter. The first is those dealing with logic errors in the way you’re using the SDK. These types of errors result in general <code class="highlighter-rouge">Exception</code> being raised. For an example take a look at the following code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">user</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseUser</span><span class="p">();</span>
<span class="n">user</span><span class="p">.</span><span class="nf">SignUpAsync</span><span class="p">();</span>
</code></pre>
</div>

<p>This will throw an <code class="highlighter-rouge">InvalidOperationException</code> because <code class="highlighter-rouge">SignUpAsync</code> was called without first setting the required properties (<code class="highlighter-rouge">Username</code> and <code class="highlighter-rouge">Password</code>).</p>

<p>The second type of error is one that occurs when interacting with the Parse Cloud over the network. These errors are either related to problems connecting to the cloud or problems performing the requested operation. For example, an error may result from an existing user trying to sign up. Here’s how you could handle this error as well as the previous SDK logic errors:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">try</span>
<span class="p">{</span>
    <span class="n">user</span><span class="p">.</span><span class="nf">SignUpAsync</span><span class="p">().</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">IsFaulted</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Errors from Parse Cloud and network interactions
</span>            <span class="k">using</span> <span class="p">(</span><span class="n">IEnumerator</span><span class="p">&lt;</span><span class="n">System</span><span class="p">.</span><span class="n">Exception</span><span class="p">&gt;</span> <span class="n">enumerator</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Exception</span><span class="p">.</span><span class="n">InnerExceptions</span><span class="p">.</span><span class="nf">GetEnumerator</span><span class="p">())</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">enumerator</span><span class="p">.</span><span class="nf">MoveNext</span><span class="p">())</span> <span class="p">{</span>
                    <span class="n">ParseException</span> <span class="n">error</span> <span class="p">=</span> <span class="p">(</span><span class="n">ParseException</span><span class="p">)</span> <span class="n">enumerator</span><span class="p">.</span><span class="n">Current</span><span class="p">;</span>
                    <span class="c1">// error.Message will contain an error message
</span>                    <span class="c1">// error.Code will return "OtherCause"
</span>                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">}</span>
<span class="k">catch</span> <span class="p">(</span><span class="n">InvalidOperationException</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Error from the SDK logic checks
</span>    <span class="c1">// e.Message will contain the specific error
</span>    <span class="c1">// ex: "Cannot sign up user with an empty name."
</span><span class="p">}</span>
</code></pre>
</div>

<p>At the moment there are a couple of things to watch out for:</p>

<ol>
  <li>Due to limitations with Unity’s <code class="highlighter-rouge">WWW</code> class, error details from Parse Cloud interactions are not passed back to the SDK. The error message in these scenarios is of the form ‘‘40x message’’ for example, ‘‘400 Bad Request’’ or ‘‘404 Not Found’’. You can implement a generic error handler for those scenarios.</li>
  <li>If you want finer grained control over your error handling, you could look into using <a href="#cloudfunctions">Cloud Functions</a> to wrap your calls and send back the error information via the Cloud Code success path. Sending the error information through the success path ensures that they are passed back to the SDK.</li>
</ol>

<p>Let’s take a look at another error handling example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Note"</span><span class="p">).</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"thisObjectIdDoesntExist"</span><span class="p">);</span>
</code></pre>
</div>

<p>In the above code, we try to fetch an object with a non-existent <code class="highlighter-rouge">ObjectId</code>. The Parse Cloud will return an error – so here’s how to handle it properly:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Note"</span><span class="p">).</span><span class="nf">GetAsync</span><span class="p">(</span><span class="n">someObjectId</span><span class="p">).</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">IsFaulted</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// One or more errors occurred.
</span>    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">// Everything went fine!
</span>    <span class="p">}</span>
<span class="p">})</span>
</code></pre>
</div>

<p>For a list of all possible <code class="highlighter-rouge">ErrorCode</code> types, scroll down to <a href="#errors">Error Codes</a>, or see the <code class="highlighter-rouge">ParseException.ErrorCode</code> section of the <a href="https://parse.com/docs/dotnet/api/html/T_Parse_ParseException_ErrorCode.htm">.NET API</a>.</p>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="security">Security</h1>

<p>As your app development progresses, you will want to use Parse’s security features in order to safeguard data. This document explains the ways in which you can secure your apps.</p>

<p>If your app is compromised, it’s not only you as the developer who suffers, but potentially the users of your app as well. Continue reading for our suggestions for sensible defaults and precautions to take before releasing your app into the wild.</p>

<h2 id="client-vs-server">Client vs. Server</h2>

<p>When an app first connects to Parse, it identifies itself with an Application ID and a Client key (or REST Key, or .NET Key, or JavaScript Key, depending on which platform you’re using). These are not secret and by themselves they do not secure an app. These keys are shipped as a part of your app, and anyone can decompile your app or proxy network traffic from their device to find your client key. This exploit is even easier with JavaScript — one can simply “view source” in the browser and immediately find your client key.</p>

<p>This is why Parse has many other security features to help you secure your data. The client key is given out to your users, so anything that can be done with just the client key is doable by the general public, even malicious hackers.</p>

<p>The master key, on the other hand, is definitely a security mechanism. Using the master key allows you to bypass all of your app’s security mechanisms, such as <a href="#security-class-level-permissions">class-level permissions</a> and <a href="#security-object-level-access-control">ACLs</a>. Having the master key is like having root access to your app’s servers, and you should guard your master key with the same zeal with which you would guard your production machines’ root password.</p>

<p>The overall philosophy is to limit the power of your clients (using client keys), and to perform any sensitive actions requiring the master key in Cloud Code. You’ll learn how to best wield this power in the section titled <a href="#security-implementing-business-logic-in-cloud-code">Implementing Business Logic in Cloud Code</a>.</p>

<p>A final note: All connections are made with HTTPS and SSL, and Parse will reject all non-HTTPS connections. As a result, you don’t need to worry about man-in-the-middle attacks.</p>

<h2 id="class-level-permissions">Class-Level Permissions</h2>

<p>The second level of security is at the schema and data level. Enforcing security measures at this level will restrict how and when client applications can access and create data on Parse. When you first begin developing your Parse application, all of the defaults are set so that you can be a more productive developer. For example:</p>

<ul>
  <li>A client application can create new classes on Parse</li>
  <li>A client application can add fields to classes</li>
  <li>A client application can modify or query for objects on Parse</li>
</ul>

<p>You can configure any of these permissions to apply to everyone, no one, or to specific users or roles in your app. Roles are groups that contain users or other roles, which you can assign to an object to restrict its use. Any permission granted to a role is also granted to any of its children, whether they are users or other roles, enabling you to create an access hierarchy for your apps. Each of <a href="/docs">the Parse guides</a> includes a detailed description of employing Roles in your apps.</p>

<p>Once you are confident that you have the right classes and relationships between classes in your app, you should begin to lock it down by doing the following:</p>

<p>Almost every class that you create should have these permissions tweaked to some degree. For classes where every object has the same permissions, class-level settings will be most effective. For example, one common use case entails having a class of static data that can be read by anyone but written by no one.</p>

<h3 id="restricting-class-creation">Restricting class creation</h3>

<p>As a start, you can configure your application so that clients cannot create new classes on Parse. This is done from the Settings tab on the Data Browser. Scroll down to the <strong>App Permissions</strong> section and turn off <strong>Allow client class creation</strong>. Once enabled, classes may only be created from the Data Browser. This will prevent attackers from filling your database with unlimited, arbitrary new classes.</p>

<p><img src="/docs/assets/images/client_class_creation.png" alt="" /></p>

<h3 id="configuring-class-level-permissions">Configuring Class-Level Permissions</h3>

<p>Parse lets you specify what operations are allowed per class. This lets you restrict the ways in which clients can access or modify your classes. To change these settings, go to the Data Browser, select a class, and click the “Security” button.</p>

<p>You can configure the client’s ability to perform each of the following operations for the selected class:</p>

<ul>
  <li>
    <p><strong>Read</strong>:</p>

    <ul>
      <li>
        <p><strong>Get</strong>: With Get permission, users can fetch objects in this table if they know their objectIds.</p>
      </li>
      <li>
        <p><strong>Find</strong>: Anyone with Find permission can query all of the objects in the table, even if they don’t know their objectIds. Any table with public Find permission will be completely readable by the public, unless you put an ACL on each object.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Write</strong>:</p>

    <ul>
      <li>
        <p><strong>Update</strong>: Anyone with Update permission can modify the fields of any object in the table that doesn’t have an ACL. For publicly readable data, such as game levels or assets, you should disable this permission.</p>
      </li>
      <li>
        <p><strong>Create</strong>: Like Update, anyone with Create permission can create new objects of a class. As with the Update permission, you’ll probably want to turn this off for publicly readable data.</p>
      </li>
      <li>
        <p><strong>Delete</strong>: With this permission, people can delete any object in the table that doesn’t have an ACL. All they need is its objectId.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Add fields</strong>: Parse classes have schemas that are inferred when objects are created. While you’re developing your app, this is great, because you can add a new field to your object without having to make any changes on the backend. But once you ship your app, it’s very rare to need to add new fields to your classes automatically. You should pretty much always turn off this permission for all of your classes when you submit your app to the public.</p>
  </li>
</ul>

<p>For each of the above actions, you can grant permission to all users (which is the default), or lock permissions down to a list of roles and users. For example, a class that should be available to all users would be set to read-only by only enabling get and find. A logging class could be set to write-only by only allowing creates. You could enable moderation of user-generated content by providing update and delete access to a particular set of users or roles.</p>

<h2 id="object-level-access-control">Object-Level Access Control</h2>

<p>Once you’ve locked down your schema and class-level permissions, it’s time to think about how data is accessed by your users. Object-level access control enables one user’s data to be kept separate from another’s, because sometimes different objects in a class need to be accessible by different people. For example, a user’s private personal data should be accessible only to them.</p>

<p>Parse also supports the notion of anonymous users for those apps that want to store and protect user-specific data without requiring explicit login.</p>

<p>When a user logs into an app, they initiate a session with Parse. Through this session they can add and modify their own data but are prevented from modifying other users’ data.</p>

<h3 id="access-control-lists">Access Control Lists</h3>

<p>The easiest way to control who can access which data is through access control lists, commonly known as ACLs. The idea behind an ACL is that each object has a list of users and roles along with what permissions that user or role has. A user needs read permissions (or must belong to a role that has read permissions) in order to retrieve an object’s data, and a user needs write permissions (or must belong to a role that has write permissions) in order to update or delete that object.</p>

<p>Once you have a User, you can start using ACLs. Remember: Users can be created through traditional username/password signup, through a third-party login system like Facebook or Twitter, or even by using Parse’s <a href="/docs/ios/guide#users-anonymous-users">automatic anonymous users</a> functionality. To set an ACL on the current user’s data to not be publicly readable, all you have to do is:</p>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFUser *user = [PFUser currentUser];
user.ACL = [PFACL ACLWithUser:user];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
if let user = PFUser.currentUser() {
    user.ACL = PFACL(user: user)
}
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseUser</span> <span class="n">user</span> <span class="o">=</span> <span class="n">ParseUser</span><span class="o">.</span><span class="na">getCurrentUser</span><span class="o">();</span>
<span class="n">user</span><span class="o">.</span><span class="na">setACL</span><span class="o">(</span><span class="k">new</span> <span class="n">ParseACL</span><span class="o">(</span><span class="n">user</span><span class="o">));</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">setACL</span><span class="p">(</span><span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">(</span><span class="nx">user</span><span class="p">));</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">user</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">;</span>
<span class="n">user</span><span class="p">.</span><span class="n">ACL</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseACL</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>$user = ParseUser::getCurrentUser();
$user-&gt;setACL(new ParseACL($user))
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No command line example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Most apps should do this. If you store any sensitive user data, such as email addresses or phone numbers, you need to set an ACL like this so that the user’s private information isn’t visible to other users. If an object doesn’t have an ACL, it’s readable and writeable by everyone. The only exception is the <code class="highlighter-rouge">_User</code> class. We never allow users to write each other’s data, but they can read it by default. (If you as the developer need to update other <code class="highlighter-rouge">_User</code> objects, remember that your master key can provide the power to do this.)</p>

<p>To make it super easy to create user-private ACLs for every object, we have a way to set a default ACL that will be used for every new object you create:</p>

<pre class="common-lang-block objectivec"><code class="objectivec">
[PFACL setDefaultACL:[PFACL ACL] withAccessForCurrentUser:YES];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
PFACL.setDefaultACL(PFACL(), withAccessForCurrentUser: true)
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseACL</span><span class="o">.</span><span class="na">setDefaultACL</span><span class="o">(</span><span class="k">new</span> <span class="n">ParseACL</span><span class="o">(),</span> <span class="kc">true</span><span class="o">);</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="c1">// not available in the JavaScript SDK</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// not available in the .NET SDK
</span></code></pre>
</div>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>ParseACL::setDefaultACL(new ParseACL(), true);
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No command line example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>If you want the user to have some data that is public and some that is private, it’s best to have two separate objects. You can add a pointer to the private data from the public one.</p>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFObject *privateData = [PFObject objectWithClassName:@"PrivateUserData"];
privateData.ACL = [PFACL ACLWithUser:[PFUser currentUser]];
[privateData setObject:@"555-5309" forKey:@"phoneNumber"];

[[PFUser currentUser] setObject:privateData forKey:@"privateData"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
if let currentUser = PFUser.currentUser() {
    let privateData = PFObject(className: "PrivateUserData")
    privateData.ACL = PFACL(user: currentUser)
    privateData.setObject("555-5309", forKey: "phoneNumber")
    currentUser.setObject(privateData, forKey: "privateData")
}
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseObject</span> <span class="n">privateData</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ParseObject</span><span class="o">(</span><span class="s">"PrivateUserData"</span><span class="o">);</span>
<span class="n">privateData</span><span class="o">.</span><span class="na">setACL</span><span class="o">(</span><span class="k">new</span> <span class="n">ParseACL</span><span class="o">(</span><span class="n">ParseUser</span><span class="o">.</span><span class="na">getCurrentUser</span><span class="o">()));</span>
<span class="n">privateData</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phoneNumber"</span><span class="o">,</span> <span class="s">"555-5309"</span><span class="o">);</span>

<span class="n">ParseUser</span><span class="o">.</span><span class="na">getCurrentUser</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">"privateData"</span><span class="o">,</span> <span class="n">privateData</span><span class="o">);</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">privateData</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s2">"PrivateUserData"</span><span class="p">);</span>
<span class="nx">privateData</span><span class="p">.</span><span class="nx">setACL</span><span class="p">(</span><span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">()));</span>
<span class="nx">privateData</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">"phoneNumber"</span><span class="p">,</span> <span class="s2">"555-5309"</span><span class="p">);</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">().</span><span class="nx">set</span><span class="p">(</span><span class="s2">"privateData"</span><span class="p">,</span> <span class="nx">privateData</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">privateData</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseObject</span><span class="p">(</span><span class="s">"PrivateUserData"</span><span class="p">);</span>
<span class="n">privateData</span><span class="p">.</span><span class="n">ACL</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseACL</span><span class="p">(</span><span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">);</span>
<span class="n">privateData</span><span class="p">[</span><span class="s">"phoneNumber"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"555-5309"</span><span class="p">;</span>

<span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">[</span><span class="s">"privateData"</span><span class="p">]</span> <span class="p">=</span>  <span class="n">privateData</span><span class="p">;</span>
</code></pre>
</div>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>$privateData = ParseObject::create("PrivateUserData");
$privateData-&gt;setACL(new ParseACL(ParseUser::getCurrentUser()));
$privateData-&gt;set("phoneNumber", "555-5309");

ParseUser::getCurrentUser()-&gt;set("privateData", $privateData);
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No command line example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Of course, you can set different read and write permissions on an object. For example, this is how you would create an ACL for a public post by a user, where anyone can read it:</p>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFACL *acl = [PFACL ACL];
[acl setPublicReadAccess:true];
[acl setWriteAccess:true forUser:[PFUser currentUser]];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let acl = PFACL()
acl.setPublicReadAccess(true)
if let currentUser = PFUser.currentUser() {
    acl.setWriteAccess(true, forUser: currentUser)
}
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseACL</span> <span class="n">acl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ParseACL</span><span class="o">();</span>
<span class="n">acl</span><span class="o">.</span><span class="na">setPublicReadAccess</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">acl</span><span class="o">.</span><span class="na">setWriteAccess</span><span class="o">(</span><span class="n">ParseUser</span><span class="o">.</span><span class="na">getCurrentUser</span><span class="o">(),</span> <span class="kc">true</span><span class="o">);</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">acl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">();</span>
<span class="nx">acl</span><span class="p">.</span><span class="nx">setPublicReadAccess</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="nx">acl</span><span class="p">.</span><span class="nx">setWriteAccess</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">().</span><span class="nx">id</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">acl</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseACL</span><span class="p">();</span>
<span class="n">acl</span><span class="p">.</span><span class="n">PublicReadAccess</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="n">acl</span><span class="p">.</span><span class="nf">SetRoleWriteAccess</span><span class="p">(</span><span class="n">ParseUser</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">.</span><span class="n">ObjectId</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>$acl = new ParseACL();
$acl-&gt;setPublicReadAccess(true);
$acl-&gt;setWriteAccess(ParseUser::getCurrentUser(), true);
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No command line example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Sometimes it’s inconvenient to manage permissions on a per-user basis, and you want to have groups of users who get treated the same (like a set of admins with special powers). Roles are are a special kind of object that let you create a group of users that can all be assigned to the ACL. The best thing about roles is that you can add and remove users from a role without having to update every single object that is restricted to that role. To create an object that is writeable only by admins:</p>

<pre class="common-lang-block objectivec"><code class="objectivec">
// Assuming you've already created a role called "admins"...
PFACL *acl = [PFACL ACL];
[acl setPublicReadAccess:true];
[acl setWriteAccess:true forRoleWithName:@"admins"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let acl = PFACL()
acl.setPublicReadAccess(true)
acl.setWriteAccess(true, forRoleWithName: "admins")
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="c1">// Assuming you've already created a role called "admins"...</span>
<span class="n">ParseACL</span> <span class="n">acl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ParseACL</span><span class="o">();</span>
<span class="n">acl</span><span class="o">.</span><span class="na">setPublicReadAccess</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">acl</span><span class="o">.</span><span class="na">setRoleWriteAccess</span><span class="o">(</span><span class="s">"admins"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
</code></pre>
</div>

<div class="common-lang-block js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">acl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">();</span>
<span class="nx">acl</span><span class="p">.</span><span class="nx">setPublicReadAccess</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="nx">acl</span><span class="p">.</span><span class="nx">setRoleWriteAccess</span><span class="p">(</span><span class="s2">"admins"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">acl</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ParseACL</span><span class="p">();</span>
<span class="n">acl</span><span class="p">.</span><span class="n">PublicReadAccess</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="n">acl</span><span class="p">.</span><span class="nf">SetRoleWriteAccess</span><span class="p">(</span><span class="s">"admins"</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block php highlighter-rouge"><pre class="highlight"><code>$acl = new ParseACL();
$acl-&gt;setPublicReadAccess(true);
$acl-&gt;setRoleWriteAccessWithName("admins", true);
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No command line example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Of course, this snippet assumes you’ve already created a role named “admins”. This is often reasonable when you have a small set of special roles set up while developing your app. Roles can also be created and updated on the fly — for example, adding new friends to a “friendOf___” role after each connection is made.</p>

<p>All this is just the beginning. Applications can enforce all sorts of complex access patterns through ACLs and class-level permissions. For example:</p>

<ul>
  <li>For private data, read and write access can be restricted to the owner.</li>
  <li>For a post on a message board, the author and members of the “Moderators” role can have “write” access, and the general public can have “read” access.</li>
  <li>For logging data that will only be accessed by the developer through the REST API using the master key, the ACL can deny all permissions.</li>
  <li>Data created by a privileged group of users or the developer, like a global message of the day, can have public read access but restrict write access to an “Administrators” role.</li>
  <li>A message sent from one user to another can give “read” and “write” access just to those users.</li>
</ul>

<p>For the curious, here’s the format for an ACL that restricts read and write permissions to the owner (whose <code class="highlighter-rouge">objectId</code> is identified by <code class="highlighter-rouge">"aSaMpLeUsErId"</code>) and enables other users to read the object:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"*"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"read"</span><span class="p">:</span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nt">"aSaMpLeUsErId"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"read"</span><span class="w"> </span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">"write"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>And here’s another example of the format of an ACL that uses a Role:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"role:RoleName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nt">"aSaMpLeUsErId"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">"write"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="pointer-permissions">Pointer Permissions</h3>

<p>Pointer permissions are a special type of class-level permission that create a virtual ACL on every object in a class, based on users stored in pointer fields on those objects. For example, given a class with an <code class="highlighter-rouge">owner</code> field, setting a read pointer permission on <code class="highlighter-rouge">owner</code> will make each object in the class only readable by the user in that object’s <code class="highlighter-rouge">owner</code> field. For a class with a <code class="highlighter-rouge">sender</code> and a <code class="highlighter-rouge">reciever</code> field, a read pointer permission on the <code class="highlighter-rouge">receiver</code> field and a read and write pointer permission on the <code class="highlighter-rouge">sender</code> field will make each object in the class readable by the user in the <code class="highlighter-rouge">sender</code> and <code class="highlighter-rouge">receiver</code> field, and writable only by the user in the <code class="highlighter-rouge">sender</code> field.</p>

<p>Given that objects often already have pointers to the user(s) that should have permissions on the object, pointer permissions provide a simple and fast solution for securing your app using data which is already there, that doesn’t require writing any client code or cloud code.</p>

<p>Pointer permissions are like virtual ACLs. They don’t appear in the ACL column, buf if you are familiar with how ACLs work, you can think of them like ACLs. In the above example with the <code class="highlighter-rouge">sender</code> and <code class="highlighter-rouge">receiver</code>, each object will act as if it has an ACL of:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"&lt;SENDER_USER_ID&gt;"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"write"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"&lt;RECEIVER_USER_ID&gt;"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Note that this ACL is not actually created on each object. Any existing ACLs will not be modified when you add or remove pointer permissions, and any user attempting to interact with an object can only interact with the object if both the virtual ACL created by the pointer permissions, and the real ACL already on the object allow the interaction. For this reason, it can sometimes be confusing to combine pointer permissions and ACLs, so we recommend using pointer permissions for classes that don’t have many ACLs set. Fortunately, it’s easy to remove pointer permissions if you later decide to use Cloud Code or ACLs to secure your app.</p>

<h3 id="requires-authentication-permission-requires-parse-server---230">Requires Authentication permission (requires parse-server  &gt;= 2.3.0)</h3>

<p>Starting version 2.3.0, parse-server introduces a new Class Level Permission <code class="highlighter-rouge">requiresAuthentication</code>.
This CLP prevents any non authenticated user from performing the action protected by the CLP.</p>

<p>For example, you want to allow your <strong>authenticated users</strong> to <code class="highlighter-rouge">find</code> and <code class="highlighter-rouge">get</code> <code class="highlighter-rouge">Announcement</code>’s from your application and your <strong>admin role</strong> to have all privileged, you would set the CLP:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>// POST http://my-parse-server.com/schemas/Announcement
// Set the X-Parse-Application-Id and X-Parse-Master-Key header
// body: 
{
  classLevelPermissions: 
  {
    "find": {
      "requireAuthentication": true,
      "role:admin": true
    },
    "get": {
      "requireAuthentication": true,
      "role:admin": true
    },
    "create": { "role:admin": true },
    "update": { "role:admin": true },
    "delete": { "role:admin": true },
  }
}
</code></pre>
</div>

<p>Effects:</p>

<ul>
  <li>Non authenticated users won’t be able to do anything.</li>
  <li>Authenticated users (any user with a valid sessionToken) will be able to read all the objects in that class</li>
  <li>Users belonging to the admin role, will be able to perform all operations.</li>
</ul>

<p>:warning: Note that this is in no way securing your content, if you allow anyone to login to your server, every client will still be able to query this object.</p>

<h3 id="clp-and-acl-interaction">CLP and ACL interaction</h3>

<p>Class-Level Permissions (CLPs) and Access Control Lists (ACLs) are both powerful tools for securing your app, but they don’t always interact exactly how you might expect. They actually represent two separate layers of security that each request has to pass through to return the correct information or make the intended change. These layers, one at the class level, and one at the object level, are shown below. A request must pass through BOTH layers of checks in order to be authorized. Note that despite acting similarly to ACLs, <a href="#security-pointer-permissions">Pointer Permissions</a> are a type of class level permission, so a request must pass the pointer permission check in order to pass the CLP check.</p>

<p><img src="/docs/assets/images/clp_vs_acl_diagram.png" alt="" /></p>

<p>As you can see, whether a user is authorized to make a request can become complicated when you use both CLPs and ACLs. Let’s look at an example to get a better sense of how CLPs and ACLs can interact. Say we have a <code class="highlighter-rouge">Photo</code> class, with an object, <code class="highlighter-rouge">photoObject</code>. There are 2 users in our app, <code class="highlighter-rouge">user1</code> and <code class="highlighter-rouge">user2</code>. Now lets say we set a Get CLP on the <code class="highlighter-rouge">Photo</code> class, disabling public Get, but allowing <code class="highlighter-rouge">user1</code> to perform Get. Now let’s also set an ACL on <code class="highlighter-rouge">photoObject</code> to allow Read - which includes GET - for only <code class="highlighter-rouge">user2</code>.</p>

<p>You may expect this will allow both <code class="highlighter-rouge">user1</code> and <code class="highlighter-rouge">user2</code> to Get <code class="highlighter-rouge">photoObject</code>, but because the CLP layer of authentication and the ACL layer are both in effect at all times, it actually makes it so <em>neither</em> <code class="highlighter-rouge">user1</code> nor <code class="highlighter-rouge">user2</code> can Get <code class="highlighter-rouge">photoObject</code>. If <code class="highlighter-rouge">user1</code> tries to Get <code class="highlighter-rouge">photoObject</code>, it will get through the CLP layer of authentication, but then will be rejected because it does not pass the ACL layer. In the same way, if <code class="highlighter-rouge">user2</code> tries to Get <code class="highlighter-rouge">photoObject</code>, it will also be rejected at the CLP layer of authentication.</p>

<p>Now lets look at example that uses Pointer Permissions. Say we have a <code class="highlighter-rouge">Post</code> class, with an object, <code class="highlighter-rouge">myPost</code>. There are 2 users in our app, <code class="highlighter-rouge">poster</code>, and <code class="highlighter-rouge">viewer</code>. Lets say we add a pointer permission that gives anyone in the <code class="highlighter-rouge">Creator</code> field of the <code class="highlighter-rouge">Post</code> class read and write access to the object, and for the <code class="highlighter-rouge">myPost</code> object, <code class="highlighter-rouge">poster</code> is the user in that field. There is also an ACL on the object that gives read access to <code class="highlighter-rouge">viewer</code>. You may expect that this will allow <code class="highlighter-rouge">poster</code> to read and edit <code class="highlighter-rouge">myPost</code>, and <code class="highlighter-rouge">viewer</code> to read it, but <code class="highlighter-rouge">viewer</code> will be rejected by the Pointer Permission, and <code class="highlighter-rouge">poster</code> will be rejected by the ACL, so again, neither user will be able to access the object.</p>

<p>Because of the complex interaction between CLPs, Pointer Permissions, and ACLs, we recommend being careful when using them together. Often it can be useful to use CLPs only to disable all permissions for a certain request type, and then using Pointer Permissions or ACLs for other request types. For example, you may want to disable Delete for a <code class="highlighter-rouge">Photo</code> class, but then put a Pointer Permission on <code class="highlighter-rouge">Photo</code> so the user who created it can edit it, just not delete it. Because of the especially complex way that Pointer Permissions and ACLs interact, we usually recommend only using one of those two types of security mechanisms.</p>

<h3 id="security-edge-cases">Security Edge Cases</h3>

<p>There are some special classes in Parse that don’t follow all of the same security rules as every other class. Not all classes follow <a href="#security-classes">Class-Level Permissions (CLPs)</a> or <a href="#security-objects">Access Control Lists (ACLs)</a> exactly how they are defined, and here those exceptions are documented. Here “normal behavior” refers to CLPs and ACLs working normally, while any other special behaviors are described in the footnotes.</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th><code class="highlighter-rouge">_User</code></th>
      <th><code class="highlighter-rouge">_Installation</code></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Get</td>
      <td>normal behaviour [1, 2, 3]</td>
      <td>ignores CLP, but not ACL</td>
    </tr>
    <tr>
      <td>Find</td>
      <td>normal behavior [3]</td>
      <td>master key only [6]</td>
    </tr>
    <tr>
      <td>Create</td>
      <td>normal behavior [4]</td>
      <td>ignores CLP</td>
    </tr>
    <tr>
      <td>Update</td>
      <td>normal behavior [5]</td>
      <td>ignores CLP, but not ACL [7]</td>
    </tr>
    <tr>
      <td>Delete</td>
      <td>normal behavior [5]</td>
      <td>master key only [7]</td>
    </tr>
    <tr>
      <td>Add Field</td>
      <td>normal behavior</td>
      <td>normal behavior</td>
    </tr>
  </tbody>
</table>

<ol>
  <li>
    <p>Logging in, or <code class="highlighter-rouge">/1/login</code> in the REST API, does not respect the Get CLP on the user class. Login works just based on username and password, and cannot be disabled using CLPs.</p>
  </li>
  <li>
    <p>Retrieving the current user, or becoming a User based on a session token, which are both <code class="highlighter-rouge">/1/users/me</code> in the REST API, do not respect the Get CLP on the user class.</p>
  </li>
  <li>
    <p>Read ACLs do not apply to the logged in user. For example, if all users have ACLs with Read disabled, then doing a find query over users will still return the logged in user. However, if the Find CLP is disabled, then trying to perform a find on users will still return an error.</p>
  </li>
  <li>
    <p>Create CLPs also apply to signing up. So disabling Create CLPs on the user class also disables people from signing up without the master key.</p>
  </li>
  <li>
    <p>Users can only Update and Delete themselves. Public CLPs for Update and Delete may still apply. For example, if you disable public Update for the user class, then users cannot edit themselves. But no matter what the write ACL on a user is, that user can still Update or Delete itself, and no other user can Update or Delete that user. As always, however, using the master key allows users to update other users, independent of CLPs or ACLs.</p>
  </li>
  <li>
    <p>Get requests on installations follow ACLs normally. Find requests without master key is not allowed unless you supply the <code class="highlighter-rouge">installationId</code> as a constraint.</p>
  </li>
  <li>
    <p>Update requests on installations do adhere to the ACL defined on the installation, but Delete requests are master-key-only. For more information about how installations work, check out the <a href="/docs/rest#installations">installations section of the REST guide</a>.</p>
  </li>
</ol>

<h2 id="data-integrity-in-cloud-code">Data Integrity in Cloud Code</h2>

<p>For most apps, care around keys, class-level permissions, and object-level ACLs are all you need to keep your app and your users’ data safe. Sometimes, though, you’ll run into an edge case where they aren’t quite enough. For everything else, there’s <a href="https://parse.com/docs/cloudcode/guide#cloud-code">Cloud Code</a>.</p>

<p>Cloud Code allows you to upload JavaScript to Parse’s servers, where we will run it for you. Unlike client code running on users’ devices that may have been tampered with, Cloud Code is guaranteed to be the code that you’ve written, so it can be trusted with more responsibility.</p>

<p>One particularly common use case for Cloud Code is preventing invalid data from being stored. For this sort of situation, it’s particularly important that a malicious client not be able to bypass the validation logic.</p>

<p>To create validation functions, Cloud Code allows you to implement a <code class="highlighter-rouge">beforeSave</code> trigger for your class. These triggers are run whenever an object is saved, and allow you to modify the object or completely reject a save. For example, this is how you create a <a href="https://parse.com/docs/cloudcode/guide#cloud-code-beforesave-triggers">Cloud Code beforeSave trigger</a> to make sure every user has an email address set:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">beforeSave</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">object</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"email"</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">"Every user must have an email address."</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<p>Our <a href="https://parse.com/docs/cloudcode/guide#cloud-code">Cloud Code guide</a> provides instructions on how to upload this trigger to our servers.</p>

<p>Validations can lock down your app so that only certain values are acceptable. You can also use <code class="highlighter-rouge">afterSave</code> validations to normalize your data (e.g. formatting all phone numbers or currency identically). You get to retain most of the productivity benefits of accessing Parse data directly from your client applications, but you can also enforce certain invariants for your data on the fly.</p>

<p>Common scenarios that warrant validation include:</p>

<ul>
  <li>Making sure phone numbers have the right format</li>
  <li>Sanitizing data so that its format is normalized</li>
  <li>Making sure that an email address looks like a real email address</li>
  <li>Requiring that every user specifies an age within a particular range</li>
  <li>Not letting users directly change a calculated field</li>
  <li>Not letting users delete specific objects unless certain conditions are met</li>
</ul>

<h2 id="implementing-business-logic-in-cloud-code">Implementing Business Logic in Cloud Code</h2>

<p>While validation often makes sense in Cloud Code, there are likely certain actions that are particularly sensitive, and should be as carefully guarded as possible. In these cases, you can remove permissions or the logic from clients entirely and instead funnel all such operations to Cloud Code functions.</p>

<p>When a Cloud Code function is called, it can invoke the <code class="highlighter-rouge">useMasterKey</code> function to gain the ability to modify user data. With the master key, your Cloud Code function can override any ACLs and write data. This means that it’ll bypass all the security mechanisms you’ve put in place in the previous sections.</p>

<p>Say you want to allow a user to “like” a <code class="highlighter-rouge">Post</code> object without giving them full write permissions on the object. You can do this by having the client call a Cloud Code function instead of modifying the Post itself:</p>

<p>The master key should be used carefully. When invoked, the master key is in effect for the duration of the Cloud Code function in which it is called:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">"like"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">useMasterKey</span><span class="p">();</span>
  <span class="c1">// Everything after this point will bypass ACLs and other security</span>
  <span class="c1">// even if I do things besides just updating a Post object.</span>
<span class="p">});</span>
</code></pre>
</div>

<p>A more prudent way to use the master key would be to pass it as a parameter on a per-function basis. For example, instead of the above, set <code class="highlighter-rouge">useMasterKey</code> to <code class="highlighter-rouge">true</code> in each individual API function:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">"like"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">post</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="s2">"Post"</span><span class="p">);</span>
  <span class="nx">post</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">postId</span><span class="p">;</span>
  <span class="nx">post</span><span class="p">.</span><span class="nx">increment</span><span class="p">(</span><span class="s2">"likes"</span><span class="p">);</span>
  <span class="nx">post</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span> <span class="na">useMasterKey</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// If I choose to do something else here, it won't be using</span>
    <span class="c1">// the master key and I'll be subject to ordinary security measures.</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">();</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>One very common use case for Cloud Code is sending push notifications to particular users. In general, clients can’t be trusted to send push notifications directly, because they could modify the alert text, or push to people they shouldn’t be able to. Your app’s settings will allow you to set whether “client push” is enabled or not; we recommend that you make sure it’s disabled. Instead, you should write Cloud Code functions that validate the data to be pushed and sent before sending a push.</p>

<h2 id="parse-security-summary">Parse Security Summary</h2>

<p>Parse provides a number of ways for you to secure data in your app. As you build your app and evaluate the kinds of data you will be storing, you can make the decision about which implementation to choose.</p>

<p>It is worth repeating that that the Parse User object is readable by all other users by default. You will want to set the ACL on your User object accordingly if you wish to prevent data contained in the User object (for example, the user’s email address) from being visible by other users.</p>

<p>Most classes in your app will fall into one of a couple of easy-to-secure categories. For fully public data, you can use class-level permissions to lock down the table to put publicly readable and writeable by no one. For fully private data, you can use ACLs to make sure that only the user who owns the data can read it. But occasionally, you’ll run into situations where you don’t want data that’s fully public or fully private. For example, you may have a social app, where you have data for a user that should be readable only to friends whom they’ve approved. For this you’ll need to a combination of the techniques discussed in this guide to enable exactly the sharing rules you desire.</p>

<p>We hope that you’ll use these tools to do everything you can   to keep your app’s data and your users’ data secure.   Together, we can make the web a safer place.</p>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="performance">Performance</h1>

<p>As your app scales, you will want to ensure that it performs well under increased load and usage. This document provides guidelines on how you can optimize your app’s performance. While you can use Parse Server for quick prototyping and not worry about performance, you will want to keep our performance guidelines in mind when you’re initially designing your app. We strongly advise that you make sure you’ve followed all suggestions before releasing your app.</p>

<p>You can improve your app’s performance by looking at the following:</p>

<ul>
  <li>Writing efficient queries.</li>
  <li>Writing restrictive queries.</li>
  <li>Using client-side caching.</li>
  <li>Using Cloud Code.</li>
  <li>Avoiding count queries.</li>
  <li>Using efficient search techniques.</li>
</ul>

<p>Keep in mind that not all suggestions may apply to your app. Let’s look into each one of these in more detail.</p>

<h2 id="write-efficient-queries">Write Efficient Queries</h2>

<p>Parse objects are stored in a database. A Parse query retrieves objects that you are interested in based on conditions you apply to the query. To avoid looking through all the data present in a particular Parse class for every query, the database can use an index. An index is a sorted list of items matching a given criteria. Indexes help because they allow the database to do an efficient search and return matching results without looking at all of the data. Indexes are typically smaller in size and available in memory, resulting in faster lookups.</p>

<h2 id="indexing">Indexing</h2>

<p>You are responsible for managing your database and maintaining indexes when using Parse Server. If your data is not indexed, every query will have to go through the the entire data for a class to return a query result. On the other hand, if your data is indexed appropriately, the number of documents scanned to return a correct query result should be low.</p>

<p>The order of a query constraint’s usefulness is:</p>

<ul>
  <li>Equal to</li>
  <li>Contained In</li>
  <li>Less than, Less than or Equal to, Greater than, Greater than or Equal to</li>
  <li>Prefix string matches</li>
  <li>Not equal to</li>
  <li>Not contained in</li>
  <li>Everything else</li>
</ul>

<p>Take a look at the following query to retrieve GameScore objects:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s2">"GameScore"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="s2">"score"</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">containedIn</span><span class="p">(</span><span class="s2">"playerName"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"Jonathan Walsh"</span><span class="p">,</span> <span class="s2">"Dario Wunsch"</span><span class="p">,</span> <span class="s2">"Shawn Simon"</span><span class="p">]);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFQuery *query = [PFQuery queryWithClassName:@"GameScore"];
[query whereKey:@"score" equalTo:@50];
[query whereKey:@"playerName"
    containedIn:@[@"Jonathan Walsh", @"Dario Wunsch", @"Shawn Simon"]];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let query = PFQuery.queryWithClassName("GameScore")
query.whereKey("score", equalTo: 50)
query.whereKey("playerName", containedIn: ["Jonathan Walsh", "Dario Wunsch", "Shawn Simon"])
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"GameScore"</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">whereEqualTo</span><span class="o">(</span><span class="s">"score"</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">whereContainedIn</span><span class="o">(</span><span class="s">"playerName"</span><span class="o">,</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"Jonathan Walsh"</span><span class="o">,</span> <span class="s">"Dario Wunsch"</span><span class="o">,</span> <span class="s">"Shawn Simon"</span><span class="o">));</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">names</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"Jonathan Walsh"</span><span class="p">,</span> <span class="s">"Dario Wunsch"</span><span class="p">,</span> <span class="s">"Shawn Simon"</span> <span class="p">};</span>
<span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"score"</span><span class="p">,</span> <span class="m">50</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereContainedIn</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">,</span> <span class="n">names</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Creating an index query based on the score field would yield a smaller search space in general than creating one on the <code class="highlighter-rouge">playerName</code> field.</p>

<p>When examining data types, booleans have a very low entropy and and do not make good indexes. Take the following query constraint:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="s2">"cheatMode"</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
[query whereKey:@"cheatMode" equalTo:@NO];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
query.whereKey("cheatMode", equalTo: false)
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="o">.</span><span class="na">whereEqualTo</span><span class="o">(</span><span class="s">"cheatMode"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"cheatMode"</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>The two possible values for <code class="highlighter-rouge">"cheatMode"</code> are <code class="highlighter-rouge">true</code> and <code class="highlighter-rouge">false</code>. If an index was added on this field it would be of little use because it’s likely that 50% of the records will have to be looked at to return query results.</p>

<p>Data types are ranked by their expected entropy of the value space for the key:</p>

<ul>
  <li>GeoPoints</li>
  <li>Array</li>
  <li>Pointer</li>
  <li>Date</li>
  <li>String</li>
  <li>Number</li>
  <li>Other</li>
</ul>

<p>Even the best indexing strategy can be defeated by suboptimal queries.</p>

<h2 id="efficient-query-design">Efficient Query Design</h2>

<p>Writing efficient queries means taking full advantage of indexes. Let’s take a look at some query constraints that negate the use of indexes:</p>

<ul>
  <li>Not Equal To</li>
  <li>Not Contained In</li>
</ul>

<p>Additionally, the following queries under certain scenarios may result in slow query responses if they can’t take advantage of indexes:</p>

<ul>
  <li>Regular Expressions</li>
  <li>Ordered By</li>
</ul>

<h3 id="not-equal-to">Not Equal To</h3>

<p>For example, let’s say you’re tracking high scores for a game in a GameScore class. Now say you want to retrieve the scores for all players except a certain one. You could create this query:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s2">"GameScore"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">notEqualTo</span><span class="p">(</span><span class="s2">"playerName"</span><span class="p">,</span> <span class="s2">"Michael Yabuti"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Retrieved scores successfully</span>
<span class="p">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFQuery *query = [PFQuery queryWithClassName:@"GameScore"];
[query whereKey:@"playerName" notEqualTo:@"Michael Yabuti"];
[query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
  if (!error) {
    // Retrieved scores successfully
  }
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let query = PFQuery.queryWithClassName("GameScore")
query.whereKey("playerName", notEqualTo: "Michael Yabuti")
query.findObjectsInBackgroundWithBlock {
  (objects, error) in
  if !error {
    // Retrieved scores successfully
  }
}
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"GameScore"</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">whereNotEqualTo</span><span class="o">(</span><span class="s">"playerName"</span><span class="o">,</span> <span class="s">"Michael Yabuti"</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">findInBackground</span><span class="o">(</span><span class="k">new</span> <span class="n">FindCallback</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">e</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// Retrieved scores successfully</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">results</span> <span class="p">=</span> <span class="n">await</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereNotEqualTo</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">,</span> <span class="s">"Michael Yabuti"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">FindAsync</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>This query can’t take advantage of indexes. The database has to look at all the objects in the <code class="highlighter-rouge">"GameScore"</code> class to satisfy the constraint and retrieve the results. As the number of entries in the class grows, the query takes longer to run.</p>

<p>Luckily, most of the time a “Not Equal To” query condition can be rewritten as a “Contained In” condition. Instead of querying for the absence of values, you ask for values which match the rest of the column values. Doing this allows the database to use an index and your queries will be faster.</p>

<p>For example if the User class has a column called state which has values “SignedUp”, “Verified”, and “Invited”, the slow way to find all users who have used the app at least once would be to run the query:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">notEqualTo</span><span class="p">(</span><span class="s2">"state"</span><span class="p">,</span> <span class="s2">"Invited"</span><span class="p">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFQuery *query = [PFUser query];
[query whereKey:@"state" notEqualTo:@"Invited"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
var query = PFUser.query()
query.whereKey("state", notEqualTo: "Invited")
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseUser</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="n">ParseUser</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">whereNotEqualTo</span><span class="o">(</span><span class="s">"state"</span><span class="o">,</span> <span class="s">"Invited"</span><span class="o">);</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">Query</span>
    <span class="p">.</span><span class="nf">WhereNotEqualTo</span><span class="p">(</span><span class="s">"state"</span><span class="p">,</span> <span class="s">"Invited"</span><span class="p">);</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>It would be faster to use the “Contained In” condition when setting up the query:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">query</span><span class="p">.</span><span class="nx">containedIn</span><span class="p">(</span><span class="s2">"state"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"SignedUp"</span><span class="p">,</span> <span class="s2">"Verified"</span><span class="p">]);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
[query whereKey:@"state"
    containedIn:@[@"SignedUp", @"Verified"]];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
query.whereKey("state", containedIn: ["SignedUp", "Verified"])
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="o">.</span><span class="na">whereContainedIn</span><span class="o">(</span><span class="s">"state"</span><span class="o">,</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"SignedUp"</span><span class="o">,</span> <span class="s">"Verified"</span><span class="o">));</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="p">.</span><span class="nf">WhereContainedIn</span><span class="p">(</span><span class="s">"state"</span><span class="p">,</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"SignedUp"</span><span class="p">,</span> <span class="s">"Verified"</span> <span class="p">});</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Sometimes, you may have to completely rewrite your query. Going back to the <code class="highlighter-rouge">"GameScore"</code> example, let’s say we were running that query to display players who had scored higher than the given player. We could do this differently, by first getting the given player’s high score and then using the following query:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s2">"GameScore"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="c1">// Previously retrieved highScore for Michael Yabuti</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">greaterThan</span><span class="p">(</span><span class="s2">"score"</span><span class="p">,</span> <span class="nx">highScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Retrieved scores successfully</span>
<span class="p">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFQuery *query = [PFQuery queryWithClassName:@"GameScore"];
// Previously retrieved highScore for Michael Yabuti
[query whereKey:@"score" greaterThan:highScore];
[query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
  if (!error) {
    // Retrieved scores successfully
  }
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let query = PFQuery.queryWithClassName("GameScore")
// Previously retrieved highScore for Michael Yabuti
query.whereKey("score", greaterThan: highScore)
query.findObjectsInBackgroundWithBlock {
  (objects, error) in
  if !error {
    // Retrieved scores successfully
  }
}
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"GameScore"</span><span class="o">);</span>
<span class="c1">// Previously retrieved highScore for Michael Yabuti</span>
<span class="n">query</span><span class="o">.</span><span class="na">whereGreaterThan</span><span class="o">(</span><span class="s">"score"</span><span class="o">,</span> <span class="n">highScore</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">findInBackground</span><span class="o">(</span><span class="k">new</span> <span class="n">FindCallback</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">e</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// Retrieved scores successfully</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="c1">// Previously retrieved highScore for Michael Yabuti
</span><span class="n">var</span> <span class="n">results</span> <span class="p">=</span> <span class="n">await</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereGreaterThan</span><span class="p">(</span><span class="s">"score"</span><span class="p">,</span> <span class="n">highScore</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">FindAsync</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>The new query you use depends on your use case. This may sometimes mean a redesign of your data model.</p>

<h3 id="not-contained-in">Not Contained In</h3>

<p>Similar to “Not Equal To”, the “Not Contained In” query constraint can’t use an index. You should try and use the complementary “Contained In” constraint. Building on the User example, if the state column had one more value, “Blocked”, to represent blocked users, a slow query to find active users would be:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">notContainedIn</span><span class="p">(</span><span class="s2">"state"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"Invited"</span><span class="p">,</span> <span class="s2">"Blocked"</span><span class="p">];</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFQuery *query = [PFUser query];
[query whereKey:@"state" notContainedIn:@[@"Invited", @"Blocked"]];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
var query = PFUser.query()
query.whereKey("state", notContainedIn: ["Invited", "Blocked"])
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseUser</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="n">ParseUser</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">whereNotContainedIn</span><span class="o">(</span><span class="s">"state"</span><span class="o">,</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"Invited"</span><span class="o">,</span> <span class="s">"Blocked"</span><span class="o">));</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">query</span> <span class="p">=</span> <span class="n">ParseUser</span><span class="p">.</span><span class="n">Query</span>
    <span class="p">.</span><span class="nf">WhereNotContainedIn</span><span class="p">(</span><span class="s">"state"</span><span class="p">,</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"Invited"</span><span class="p">,</span> <span class="s">"Blocked"</span> <span class="p">});</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Using a complimentary “Contained In” query constraint will always be faster:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">query</span><span class="p">.</span><span class="nx">containedIn</span><span class="p">(</span><span class="s2">"state"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"SignedUp"</span><span class="p">,</span> <span class="s2">"Verified"</span><span class="p">]);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
[query whereKey:@"state" containedIn:@[@"SignedUp", @"Verified"]];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
query.whereKey("state", containedIn: ["SignedUp", "Verified"])
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="o">.</span><span class="na">whereContainedIn</span><span class="o">(</span><span class="s">"state"</span><span class="o">,</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"SignedUp"</span><span class="o">,</span> <span class="s">"Verified"</span><span class="o">));</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="p">.</span><span class="nf">WhereContainedIn</span><span class="p">(</span><span class="s">"state"</span><span class="p">,</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"SignedUp"</span><span class="p">,</span> <span class="s">"Verified"</span><span class="p">});</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>This means rewriting your queries accordingly. Your query rewrites will depend on your schema set up. It may mean redoing that schema.</p>

<h3 id="regular-expressions">Regular Expressions</h3>

<p>Regular expression queries should be avoided due to performance considerations. MongoDB is not efficient for doing partial string matching except for the special case where you only want a prefix match. Queries that have regular expression constraints are therefore very expensive, especially for classes with over 100,000 records. Consider restricting how many such operations can be run on a particular app at any given time.</p>

<p>You should avoid using regular expression constraints that don’t use indexes. For example, the following query looks for data with a given string in the <code class="highlighter-rouge">"playerName"</code> field. The string search is case insensitive and therefore cannot be indexed:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">query</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="s2">"playerName"</span><span class="p">,</span> <span class="s2">"Michael"</span><span class="p">,</span> <span class="err">“</span><span class="nx">i</span><span class="err">”</span><span class="p">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
[query whereKey:@"playerName" matchesRegex:@"Michael" modifiers:@"i"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
query.whereKey("playerName", matchesRegex: "Michael", modifiers: "i")
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="o">.</span><span class="na">whereMatches</span><span class="o">(</span><span class="s">"playerName"</span><span class="o">,</span> <span class="s">"Michael"</span><span class="o">,</span> <span class="s">"i"</span><span class="o">);</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="p">.</span><span class="nf">WhereMatches</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">,</span> <span class="s">"Michael"</span><span class="p">,</span> <span class="s">"i"</span><span class="p">)</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>The following query, while case sensitive, looks for any occurrence of the string in the field and cannot be indexed:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">query</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s2">"playerName"</span><span class="p">,</span> <span class="s2">"Michael"</span><span class="p">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
[query whereKey:@"playerName" containsString:@"Michael"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
query.whereKey("playerName", containsString: "Michael")
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="o">.</span><span class="na">whereContains</span><span class="o">(</span><span class="s">"playerName"</span><span class="o">,</span> <span class="s">"Michael"</span><span class="o">);</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="p">.</span><span class="nf">WhereContains</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">,</span> <span class="s">"Michael"</span><span class="p">)</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>These queries are both slow. In fact, the <code class="highlighter-rouge">matches</code> and <code class="highlighter-rouge">contains</code> query constraints are not covered in our querying guides on purpose and we do not recommend using them. Depending on your use case, you should switch to using the following constraint that uses an index, such as:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">query</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s2">"playerName"</span><span class="p">,</span> <span class="s2">"Michael"</span><span class="p">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
[query whereKey:@"playerName" hasPrefix:@"Michael"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
query.whereKey("playerName", hasPrefix: "Michael")
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="o">.</span><span class="na">whereStartsWith</span><span class="o">(</span><span class="s">"playerName"</span><span class="o">,</span> <span class="s">"Michael"</span><span class="o">);</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="p">.</span><span class="nf">WhereStartsWith</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">,</span> <span class="s">"Michael"</span><span class="p">)</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>This looks for data that starts with the given string. This query will use the backend index, so it will be faster even for large datasets.</p>

<p>As a best practice, when you use regular expression constraints, you’ll want to ensure that other constraints in the query reduce the result set to the order of hundreds of objects to make the query efficient. If you must use the <code class="highlighter-rouge">matches</code> or <code class="highlighter-rouge">contains</code> constraints for legacy reasons, then use case sensitive, anchored queries where possible, for example:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">query</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="s2">"playerName"</span><span class="p">,</span> <span class="s2">"^Michael"</span><span class="p">);</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
[query whereKey:@"playerName" matchesRegex:@"^Michael"];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
query.whereKey("playerName", matchesRegex: "^Michael")
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="o">.</span><span class="na">whereMatches</span><span class="o">(</span><span class="s">"playerName"</span><span class="o">,</span> <span class="s">"^Michael"</span><span class="o">);</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="p">.</span><span class="nf">WhereMatches</span><span class="p">(</span><span class="s">"playerName"</span><span class="p">,</span> <span class="s">"^Michael"</span><span class="p">)</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>Most of the use cases around using regular expressions involve implementing search. A more performant way of implementing search is detailed later.</p>

<h2 id="write-restrictive-queries">Write Restrictive Queries</h2>

<p>Writing restrictive queries allows you to return only the data that the client needs. This is critical in a mobile environment were data usage can be limited and network connectivity unreliable. You also want your mobile app to appear responsive and this is directly affected by the objects you send back to the client. The <a href="#queries">Querying section</a> shows the types of constraints you can add to your existing queries to limit the data returned. When adding constraints, you want to pay attention and design efficient queries.</p>

<p>You can limit the number of query results returned. The limit is 100 by default but anything from 1 to 1000 is a valid limit:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">query</span><span class="p">.</span><span class="nx">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// limit to at most 10 results</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
query.limit = 10; // limit to at most 10 results
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
query.limit = 10 // limit to at most 10 results
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="o">.</span><span class="na">setLimit</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span> <span class="c1">// limit to at most 10 results</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">query</span><span class="p">.</span><span class="nf">Limit</span><span class="p">(</span><span class="m">10</span><span class="p">);</span> <span class="c1">// limit to at most 10 results
</span></code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>If you’re issuing queries on GeoPoints, make sure you specify a reasonable radius:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">PlaceObject</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">withinMiles</span><span class="p">(</span><span class="s2">"location"</span><span class="p">,</span> <span class="nx">userGeoPoint</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">placesObjects</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Get a list of objects within 10 miles of a user's location</span>
<span class="p">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFQuery *query = [PFQuery queryWithClassName:@"Place"];
[query whereKey:@"location" nearGeoPoint:userGeoPoint withinMiles:10.0];
[query findObjectsInBackgroundWithBlock:^(NSArray *places, NSError *error) {
  if (!error) {
    // List of objects within 10 miles of a user's location
  }
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let query = PFQuery.queryWithClassName("Place")
query.whereKey("location", nearGeoPoint: userGeoPoint, withinMiles: 10.0)
query.findObjectsInBackgroundWithBlock {
  (places, error) in
  if !error {
    // List of places within 10 miles of a user's location
  }
}
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"Place"</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">whereWithinMiles</span><span class="o">(</span><span class="s">"location"</span><span class="o">,</span> <span class="n">userGeoPoint</span><span class="o">,</span> <span class="mf">10.0</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">findInBackground</span><span class="o">(</span><span class="k">new</span> <span class="n">FindCallback</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">e</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// List of places within 10 miles of a user's location</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">results</span> <span class="p">=</span> <span class="n">await</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereWithinDistance</span><span class="p">(</span><span class="s">"location"</span><span class="p">,</span> <span class="n">userGeoPoint</span><span class="p">,</span> <span class="n">ParseGeoDistance</span><span class="p">.</span><span class="nf">FromMiles</span><span class="p">(</span><span class="m">10.0</span><span class="p">))</span>
    <span class="p">.</span><span class="nf">FindAsync</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>You can further limit the fields returned by calling select:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s2">"GameScore"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">"score"</span><span class="p">,</span> <span class="s2">"playerName"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// each of results will only have the selected fields available.</span>
<span class="p">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFQuery *query = [PFQuery queryWithClassName:@"GameScore"];
[query selectKeys:@[@"score", @"playerName"]];
[query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
  if (!error) {
    // each of results will only have the selected fields available.
  }
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let query = PFQuery.queryWithClassName("GameScore")
query.selectKeys(["score", "playerName"])
query.findObjectsInBackgroundWithBlock {
  (objects, error) in
  if !error {
    // each of results will only have the selected fields available.
  }
}
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"GameScore"</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">selectKeys</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"score"</span><span class="o">,</span> <span class="s">"playerName"</span><span class="o">));</span>
<span class="n">query</span><span class="o">.</span><span class="na">findInBackground</span><span class="o">(</span><span class="k">new</span> <span class="n">FindCallback</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">e</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// each of results will only have the selected fields available.</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">results</span> <span class="p">=</span> <span class="n">await</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"GameScore"</span><span class="p">)</span>
     <span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"score"</span><span class="p">,</span> <span class="s">"playerName"</span> <span class="p">})</span>
     <span class="p">.</span><span class="nf">FindAsync</span><span class="p">();</span>
<span class="c1">// each of results will only have the selected fields available.
</span></code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<h2 id="client-side-caching">Client-side Caching</h2>

<p>For queries run from iOS and Android, you can turn on query caching. See the <a href="/docs/ios/guide#queries-caching-queries">iOS</a> and <a href="/docs/android/guide#queries-caching-queries">Android</a> guides for more details. Caching queries will increase your mobile app’s performance especially in cases where you want to display cached data while fetching the latest data from Parse.</p>

<h2 id="use-cloud-code">Use Cloud Code</h2>

<p>Cloud Code allows you to run custom JavaScript logic on Parse Server instead of on the client.</p>

<p>You can use this to offload processing to the Parse servers thus increasing your app’s perceived performance.  You can create hooks that run whenever an object is saved or deleted. This is useful if you want to validate or sanitize your data. You can also use Cloud Code to modify related objects or kick off other processes such as sending off a push notification.</p>

<p>We saw examples of limiting the data returned by writing restrictive queries. You can also use <a href="/docs/cloudcode/guide#cloud-code-cloud-functions">Cloud Functions</a> to help limit the amount of data returned to your app. In the following example, we use a Cloud Function to get a movie’s average rating:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">"averageStars"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">Review</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s2">"Review"</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Review</span><span class="p">);</span>
  <span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="s2">"movie"</span><span class="p">,</span> <span class="nx">request</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">movie</span><span class="p">);</span>
  <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">get</span><span class="p">(</span><span class="s2">"stars"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="nx">sum</span> <span class="o">/</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">"movie lookup failed"</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>You could have ran a query on the Review class on the client, returned only the stars field data and computed the result on the client. As the number of reviews for a movie increases you can see that the data being returned to the device using this methodology also increases. Implementing the functionality through a Cloud Function returns the one result if successful.</p>

<p>As you look at optimizing your queries, you’ll find that you may have to change the queries - sometimes even after you’ve shipped your app to the App Store or Google Play. The ability to change your queries without a client update is possible if you use <a href="/docs/cloudcode/guide#cloud-code-cloud-functions">Cloud Functions</a>. Even if you have to redesign your schema, you could make all the changes in your Cloud Functions while keeping the client interface the same to avoid an app update. Take the average stars Cloud Function example from before, calling it from a client SDK would look like this:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="s2">"averageStars"</span><span class="p">,</span> <span class="p">{</span> <span class="s2">"movie"</span><span class="p">:</span> <span class="s2">"The Matrix"</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ratings</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ratings is 4.5</span>
<span class="p">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
[PFCloud callFunctionInBackground:@"averageStars"
                  withParameters:@{@"movie": @"The Matrix"}
                           block:^(NSNumber *ratings, NSError *error) {
  if (!error) {
    // ratings is 4.5
  }
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
PFCloud.callFunctionInBackground("averageStars", withParameters: ["movie": "The Matrix"]) {
  (ratings, error) in
  if !error {
    // ratings is 4.5
  }
}
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">();</span>
<span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"movie"</span><span class="o">,</span> <span class="s">"The Matrix"</span><span class="o">);</span>
<span class="n">ParseCloud</span><span class="o">.</span><span class="na">callFunctionInBackground</span><span class="o">(</span><span class="s">"averageStars"</span><span class="o">,</span> <span class="n">params</span><span class="o">,</span> <span class="k">new</span> <span class="n">FunctionCallback</span><span class="o">&lt;</span><span class="n">Float</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">Float</span> <span class="n">aFloat</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">e</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// ratings is 4.5</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">IDictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">dictionary</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="s">"movie"</span><span class="p">,</span> <span class="s">"The Matrix"</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">ParseCloud</span><span class="p">.</span><span class="n">CallFunctionAsync</span><span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;(</span><span class="s">"averageStars"</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">).</span><span class="nf">ContinueWith</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="n">var</span> <span class="n">result</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
  <span class="c1">// result is 4.5
</span><span class="p">});</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>If later on, you need to modify the underlying data model, your client call can remain the same, as long as you return back a number that represents the ratings result.</p>

<h2 id="avoid-count-operations">Avoid Count Operations</h2>

<p>For classes with over 1,000 objects, count operations are limited by timeouts. Thus, it is preferable to architect your application to avoid this count operation.</p>

<p>Suppose you are displaying movie information in your app and your data model consists of a Movie class and a Review class that contains a pointer to the corresponding movie. You might want to display the review count for each movie on the top-level navigation screen using a query like this:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Review</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s2">"Review"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="s2">"Review"</span><span class="p">);</span>
<span class="c1">// movieId corresponds to a given movie's id</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="err">“</span><span class="nx">movie</span><span class="err">”</span><span class="p">,</span> <span class="nx">movieId</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">count</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Request succeeded</span>
<span class="p">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFQuery *query = [PFQuery queryWithClassName:@"Review"];
// movieId corresponds to a given movie's id
[query whereKey:@"movie" equalTo:movieId];
[query countObjectsInBackgroundWithBlock:^(int number, NSError *error) {
  if (!error) {
    // Request succeeded
  }
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let query = PFQuery.queryWithClassName("Review")
// movieId corresponds to a given movie's id
query.whereKey("movie", equalTo: movieId)
query.countObjectsInBackgroundWithBlock {
  (number, error) in
  if !error {
    // Request succeeded
  }
}
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"Review"</span><span class="o">);</span>
<span class="c1">// movieId corresponds to a given movie's id</span>
<span class="n">query</span><span class="o">.</span><span class="na">whereEqualTo</span><span class="o">(</span><span class="s">"movie"</span><span class="o">,</span> <span class="n">movieId</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">countInBackground</span><span class="o">(</span><span class="k">new</span> <span class="n">CountCallback</span><span class="o">()</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">e</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// Request succeeded</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">count</span> <span class="p">=</span> <span class="n">await</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Review"</span><span class="p">)</span>
<span class="c1">// movieId corresponds to a given movie's id
</span>    <span class="p">.</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"movie"</span><span class="p">,</span> <span class="n">movieId</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">CountAsync</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>If you run the count query for each of the UI elements, they will not run efficiently on large data sets. One approach to avoid using the <code class="highlighter-rouge">count()</code> operator could be to add a field to the Movie class that represents the review count for that movie. When saving an entry to the Review class you could increment the corresponding movie’s review count field. This can be done in an <code class="highlighter-rouge">afterSave</code> handler:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">afterSave</span><span class="p">(</span><span class="s2">"Review"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Get the movie id for the Review</span>
  <span class="kd">var</span> <span class="nx">movieId</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"movie"</span><span class="p">).</span><span class="nx">id</span><span class="p">;</span>
  <span class="c1">// Query the Movie represented by this review</span>
  <span class="kd">var</span> <span class="nx">Movie</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s2">"Movie"</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Movie</span><span class="p">);</span>
  <span class="nx">query</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">movieId</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">movie</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Increment the reviews field on the Movie object</span>
    <span class="nx">movie</span><span class="p">.</span><span class="nx">increment</span><span class="p">(</span><span class="s2">"reviews"</span><span class="p">);</span>
    <span class="nx">movie</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="s2">"Got an error "</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">code</span> <span class="o">+</span> <span class="s2">" : "</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>Your new optimized query would not need to look at the Review class to get the review count:</p>

<div class="common-lang-block javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Movie</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s2">"Movie"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Movie</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Results include the reviews count field</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Request failed</span>
<span class="p">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFQuery *query = [PFQuery queryWithClassName:@"Movie"];
[query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
  if (!error) {
    // Results include the reviews count field
  }
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let query = PFQuery.queryWithClassName("Movie")
query.findObjectsInBackgroundWithBlock {
  (objects, error) in
  if !error {
    // Results include the reviews count field
  }
}
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"Movie"</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">findInBackground</span><span class="o">(</span><span class="k">new</span> <span class="n">FindCallback</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">e</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// Results include the reviews count field</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">results</span> <span class="p">=</span> <span class="n">await</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Movie"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">FindAsync</span><span class="p">();</span>
<span class="c1">// Results include the reviews count field
</span></code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<p>You could also use a separate Parse Object to keep track of counts for each review. Whenever a review gets added or deleted, you can increment or decrement the counts in an <code class="highlighter-rouge">afterSave</code> or <code class="highlighter-rouge">afterDelete</code> Cloud Code handler. The approach you choose depends on your use case.</p>

<h2 id="implement-efficient-searches">Implement Efficient Searches</h2>

<p>As mentioned previously, MongoDB is not efficient for doing partial string matching. However, this is an important use case when implementing search functionality that scales well in production.</p>

<p>Simplistic search algorithms simply scan through all the class data and executes the query on each entry. The key to making searches run efficiently is to minimize the number of data that has to be examined when executing each query by using an index as we’ve outlined earlier. You’ll need to build your data model in a way that it’s easy for us to build an index for the data you want to be searchable. For example, string matching queries that don’t match an exact prefix of the string won’t be able to use an index leading to timeout errors as the data set grows.</p>

<p>Let’s walk through an example of how you could build an efficient search. You can apply the concepts you learn in this example to your use case. Say your app has users making posts, and you want to be able to search those posts for hashtags or particular keywords. You’ll want to pre-process your posts and save the list of hashtags and words into array fields. You can do this processing either in your app before saving the posts, or you can use a Cloud Code <code class="highlighter-rouge">beforeSave</code> hook to do this on the fly:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"underscore"</span><span class="p">);</span>
<span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">beforeSave</span><span class="p">(</span><span class="s2">"Post"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">post</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">object</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">toLowerCase</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">w</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">w</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span> <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">words</span> <span class="o">=</span> <span class="nx">post</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"text"</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="sr">/</span><span class="se">\b</span><span class="sr">/</span><span class="p">);</span>
  <span class="nx">words</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">words</span><span class="p">,</span> <span class="nx">toLowerCase</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">stopWords</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"the"</span><span class="p">,</span> <span class="s2">"in"</span><span class="p">,</span> <span class="s2">"and"</span><span class="p">]</span>
  <span class="nx">words</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">words</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">w</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">w</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^</span><span class="se">\w</span><span class="sr">+$/</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span>   <span class="nx">_</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">stopWords</span><span class="p">,</span> <span class="nx">w</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">hashtags</span> <span class="o">=</span> <span class="nx">post</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"text"</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/#.+</span><span class="se">?\b</span><span class="sr">/g</span><span class="p">);</span>
  <span class="nx">hashtags</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">hashtags</span><span class="p">,</span> <span class="nx">toLowerCase</span><span class="p">);</span>
  <span class="nx">post</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">"words"</span><span class="p">,</span> <span class="nx">words</span><span class="p">);</span>
  <span class="nx">post</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">"hashtags"</span><span class="p">,</span> <span class="nx">hashtags</span><span class="p">);</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
</div>

<p>This saves your words and hashtags in array fields, which MongoDB will store with a multi-key index. There are some important things to notice about this. First of all it’s converting all words to lower case so that we can look them up with lower case queries, and get case insensitive matching. Secondly, it’s filtering out common words like ‘the’, ‘in’, and ‘and’ which will occur in a lot of posts, to additionally reduce useless scanning of the index when executing the queries.</p>

<p>Once you’ve got the keywords set up, you can efficiently look them up using “All” constraint on your query:</p>

<div class="common-lang-block-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Post</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s2">"Post"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Post</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">containsAll</span><span class="p">(</span><span class="s2">"hashtags"</span><span class="p">,</span> <span class="p">[</span><span class="err">“#</span><span class="nx">parse</span><span class="err">”</span><span class="p">,</span> <span class="err">“#</span><span class="nx">ftw</span><span class="err">”</span><span class="p">]);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Request succeeded</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Request failed</span>
<span class="p">});</span>
</code></pre>
</div>

<pre class="common-lang-block objectivec"><code class="objectivec">
PFQuery *query = [PFQuery queryWithClassName:@"Post"];
[query whereKey:@"hashtags" containsAllObjectsInArray:@[@"#parse", @"#ftw"]];
[query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
  if (!error) {
    // Request succeeded
  }
}];
</code></pre>

<pre class="common-lang-block swift"><code class="swift">
let query = PFQuery.queryWithClassName("Post")
query.whereKey("hashtags", containsAllObjectsInArray: ["#parse", "#ftw"])
query.findObjectsInBackgroundWithBlock {
  (objects, error) in
  if !error {
    // Request succeeded
  }
}
</code></pre>

<div class="common-lang-block java highlighter-rouge"><pre class="highlight"><code><span class="n">ParseQuery</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">ParseQuery</span><span class="o">.</span><span class="na">getQuery</span><span class="o">(</span><span class="s">"Post"</span><span class="o">);</span>
<span class="n">query</span><span class="o">.</span><span class="na">whereContainsAll</span><span class="o">(</span><span class="s">"hashtags"</span><span class="o">,</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"#parse"</span><span class="o">,</span> <span class="s">"#ftw"</span><span class="o">));</span>
<span class="n">query</span><span class="o">.</span><span class="na">findInBackground</span><span class="o">(</span><span class="k">new</span> <span class="n">FindCallback</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">done</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">ParseObject</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">e</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// Request succeeded</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<div class="common-lang-block cs highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">results</span> <span class="p">=</span> <span class="n">await</span> <span class="n">ParseObject</span><span class="p">.</span><span class="nf">GetQuery</span><span class="p">(</span><span class="s">"Post"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WhereContainsAll</span><span class="p">(</span><span class="s">"hashtags"</span><span class="p">,</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"#parse"</span><span class="p">,</span> <span class="s">"#ftw"</span> <span class="p">})</span>
    <span class="p">.</span><span class="nf">FindAsync</span><span class="p">();</span>
</code></pre>
</div>

<div class="common-lang-block bash highlighter-rouge"><pre class="highlight"><code><span class="c"># No REST API example</span>
</code></pre>
</div>

<div class="common-lang-block cpp highlighter-rouge"><pre class="highlight"><code><span class="c1">// No C++ example
</span></code></pre>
</div>

<h2 id="limits-and-other-considerations">Limits and Other Considerations</h2>

<p>There are some limits in place to ensure the API can provide the data you need in a performant manner. We may adjust these in the future. Please take a moment to read through the following list:</p>

<p><strong>Objects</strong></p>

<ul>
  <li>Parse Objects are limited in size to 128 KB.</li>
  <li>We recommend against creating more than 64 fields on a single Parse Object to ensure that we can build effective indexes for your queries.</li>
  <li>We recommend against using field names that are longer than 1,024 characters, otherwise an index for the field will not be created.</li>
</ul>

<p><strong>Queries</strong></p>

<ul>
  <li>Queries return 100 objects by default. Use the <code class="highlighter-rouge">limit</code> parameter to change this, up to a value of 1,000.</li>
  <li>Queries can only return up to 1,000 objects in a single result set. This includes any resolved pointers. You can use <code class="highlighter-rouge">skip</code> and <code class="highlighter-rouge">limit</code> to page through results.</li>
  <li>The maximum value accepted by <code class="highlighter-rouge">skip</code> is 10,000. If you need to get more objects, we recommend sorting the results and then using a constraint on the sort column to filter out the first 10,000 results. You will then be able to continue paging through results starting from a <code class="highlighter-rouge">skip</code> value of 0. For example, you can sort your results by <code class="highlighter-rouge">createdAt ASC</code> and then filter out any objects older than the <code class="highlighter-rouge">createdAt</code> value of the 10,000th object when starting again from 0.</li>
  <li>Alternatively, you may use the <code class="highlighter-rouge">each()</code> method in the JavaScript SDK to page through all objects that match the query.</li>
  <li>Skips and limits can only be used on the outer query.</li>
  <li>You may increase the limit of a inner query to 1,000, but skip cannot be used to get more results past the first 1,000.</li>
  <li>Constraints that collide with each other will result in only one of the constraint being applied. An example of this would be two <code class="highlighter-rouge">equalTo</code> constraints over the same key with two different values, which contradicts itself (perhaps you’re looking for ‘contains’).</li>
  <li>No geo-queries inside compound OR queries.</li>
  <li>Using <code class="highlighter-rouge">$exists: false</code> is not advised.</li>
  <li>The <code class="highlighter-rouge">each</code> query method in the JavaScript SDK cannot be used in conjunction with queries using geo-point constraints.</li>
  <li>A maximum of 500,000 objects will be scanned per query. If your constraints do not successfully limit the scope of the search, this can result in queries with incomplete results.</li>
  <li>A <code class="highlighter-rouge">containsAll</code> query constraint can only take up to 9 items in the comparison array.</li>
</ul>

<p><strong>Push Notifications</strong></p>

<ul>
  <li><a href="https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW1">Delivery of notifications is a “best effort”, not guaranteed</a>. It is not intended to deliver data to your app, only to notify the user that there is new data available.</li>
</ul>

<p><strong>Cloud Code</strong></p>

<ul>
  <li>The <code class="highlighter-rouge">params</code> payload that is passed to a Cloud Function is limited to 50 MB.</li>
</ul>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                    
                    <h1 id="error-codes">Error Codes</h1>

<p>The following is a list of all the error codes that can be returned by the Parse API. You may also refer to <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">RFC2616</a> for a list of http error codes. Make sure to check the error message for more details.</p>

<h2 id="api-issues">API Issues</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">UserInvalidLoginParams</code></td>
      <td>101</td>
      <td>Invalid login parameters. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ObjectNotFound</code></td>
      <td>101</td>
      <td>The specified object or session doesn’t exist or could not be found. Can also indicate that you do not have the necessary permissions to read or write this object. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidQuery</code></td>
      <td>102</td>
      <td>There is a problem with the parameters used to construct this query. This could be an invalid field name or an invalid field type for a specific constraint. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidClassName</code></td>
      <td>103</td>
      <td>Missing or invalid classname. Classnames are case-sensitive. They must start with a letter, and a-zA-Z0-9_ are the only valid characters.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MissingObjectId</code></td>
      <td>104</td>
      <td>An unspecified object id.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidFieldName</code></td>
      <td>105</td>
      <td>An invalid field name. Keys are case-sensitive. They must start with a letter, and a-zA-Z0-9_ are the only valid characters. Some field names may be reserved. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidPointer</code></td>
      <td>106</td>
      <td>A malformed pointer was used. You would typically only see this if you have modified a client SDK.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidJSON</code></td>
      <td>107</td>
      <td>Badly formed JSON was received upstream. This either indicates you have done something unusual with modifying how things encode to JSON, or the network is failing badly. Can also indicate an invalid utf-8 string or use of multiple form encoded values. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CommandUnavailable</code></td>
      <td>108</td>
      <td>The feature you tried to access is only available internally for testing purposes.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">NotInitialized</code></td>
      <td>109</td>
      <td>You must call Parse.initialize before using the Parse library. Check the Quick Start guide for your platform.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ObjectTooLarge</code></td>
      <td>116</td>
      <td>The object is too large. Parse Objectss have a max size of 128 kilobytes.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ExceededConfigParamsError</code></td>
      <td>116</td>
      <td>You have reached the limit of 100 config parameters.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidLimitError</code></td>
      <td>117</td>
      <td>An invalid value was set for the limit. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidSkipError</code></td>
      <td>118</td>
      <td>An invalid value was set for skip. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">OperationForbidden</code></td>
      <td>119</td>
      <td>The operation isn’t allowed for clients due to class-level permissions. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CacheMiss</code></td>
      <td>120</td>
      <td>The result was not found in the cache.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidNestedKey</code></td>
      <td>121</td>
      <td>An invalid key was used in a nested JSONObject. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidACL</code></td>
      <td>123</td>
      <td>An invalid ACL was provided.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidEmailAddress</code></td>
      <td>125</td>
      <td>The email address was invalid.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DuplicateValue</code></td>
      <td>137</td>
      <td>Unique field was given a value that is already taken.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidRoleName</code></td>
      <td>139</td>
      <td>Role’s name is invalid.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ReservedValue</code></td>
      <td>139</td>
      <td>Field value is reserved.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ExceededCollectionQuota</code></td>
      <td>140</td>
      <td>You have reached the quota on the number of classes in your app. Please delete some classes if you need to add a new class.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ScriptFailed</code></td>
      <td>141</td>
      <td>Cloud Code script failed. Usually points to a JavaScript error. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">FunctionNotFound</code></td>
      <td>141</td>
      <td>Cloud function not found. Check that the specified Cloud function is present in your Cloud Code script and has been deployed.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">JobNotFound</code></td>
      <td>141</td>
      <td>Background job not found. Check that the specified job is present in your Cloud Code script and has been deployed.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">SuccessErrorNotCalled</code></td>
      <td>141</td>
      <td>success/error was not called. A cloud function will return once response.success() or response.error() is called. A background job will similarly finish execution once status.success() or status.error() is called. If a function or job never reaches either of the success/error methods, this error will be returned. This may happen when a function does not handle an error response correctly, preventing code execution from reaching the success() method call.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MultupleSuccessErrorCalls</code></td>
      <td>141</td>
      <td>Can’t call success/error multiple times. A cloud function will return once response.success() or response.error() is called. A background job will similarly finish execution once status.success() or status.error() is called. If a function or job calls success() and/or error() more than once in a single execution path, this error will be returned.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ValidationFailed</code></td>
      <td>142</td>
      <td>Cloud Code validation failed.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">WebhookError</code></td>
      <td>143</td>
      <td>Webhook error.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidImageData</code></td>
      <td>150</td>
      <td>Invalid image data.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UnsavedFileError</code></td>
      <td>151</td>
      <td>An unsaved file.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidPushTimeError</code></td>
      <td>152</td>
      <td>An invalid push time was specified.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">HostingError</code></td>
      <td>158</td>
      <td>Hosting error.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidEventName</code></td>
      <td>160</td>
      <td>The provided analytics event name is invalid.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ClassNotEmpty</code></td>
      <td>255</td>
      <td>Class is not empty and cannot be dropped.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">AppNameInvalid</code></td>
      <td>256</td>
      <td>App name is invalid.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MissingAPIKeyError</code></td>
      <td>902</td>
      <td>The request is missing an API key.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidAPIKeyError</code></td>
      <td>903</td>
      <td>The request is using an invalid API key.</td>
    </tr>
  </tbody>
</table>

<h2 id="push-related-errors">Push related errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">IncorrectType</code></td>
      <td>111</td>
      <td>A field was set to an inconsistent type. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidChannelName</code></td>
      <td>112</td>
      <td>Invalid channel name. A channel name is either an empty string (the broadcast channel) or contains only a-zA-Z0-9_ characters and starts with a letter.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidSubscriptionType</code></td>
      <td>113</td>
      <td>Bad subscription type. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidDeviceToken</code></td>
      <td>114</td>
      <td>The provided device token is invalid.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PushMisconfigured</code></td>
      <td>115</td>
      <td>Push is misconfigured in your app.  Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PushWhereAndChannels</code></td>
      <td>115</td>
      <td>Can’t set channels for a query-targeted push. You can fix this by moving the channels into your push query constraints.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PushWhereAndType</code></td>
      <td>115</td>
      <td>Can’t set device type for a query-targeted push. You can fix this by incorporating the device type constraints into your push query.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PushMissingData</code></td>
      <td>115</td>
      <td>Push is missing a ‘data’ field.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PushMissingChannels</code></td>
      <td>115</td>
      <td>Non-query push is missing a ‘channels’ field. Fix by passing a ‘channels’ or ‘query’ field.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ClientPushDisabled</code></td>
      <td>115</td>
      <td>Client-initiated push is not enabled. Check your Parse app’s push notification settings.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">RestPushDisabled</code></td>
      <td>115</td>
      <td>REST-initiated push is not enabled. Check your Parse app’s push notification settings.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ClientPushWithURI</code></td>
      <td>115</td>
      <td>Client-initiated push cannot use the “uri” option.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PushQueryOrPayloadTooLarge</code></td>
      <td>115</td>
      <td>Your push query or data payload is too large. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidExpirationError</code></td>
      <td>138</td>
      <td>Invalid expiration value.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MissingPushIdError</code></td>
      <td>156</td>
      <td>A push id is missing. Deprecated.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MissingDeviceTypeError</code></td>
      <td>157</td>
      <td>The device type field is missing. Deprecated.</td>
    </tr>
  </tbody>
</table>

<h2 id="file-related-errors">File related errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">InvalidFileName</code></td>
      <td>122</td>
      <td>An invalid filename was used for Parse File. A valid file name contains only a-zA-Z0-9_. characters and is between 1 and 128 characters.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MissingContentType</code></td>
      <td>126</td>
      <td>Missing content type.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MissingContentLength</code></td>
      <td>127</td>
      <td>Missing content length.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidContentLength</code></td>
      <td>128</td>
      <td>Invalid content length.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">FileTooLarge</code></td>
      <td>129</td>
      <td>File size exceeds maximum allowed.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">FileSaveError</code></td>
      <td>130</td>
      <td>Error saving a file.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">FileDeleteError</code></td>
      <td>131</td>
      <td>File could not be deleted.</td>
    </tr>
  </tbody>
</table>

<h2 id="installation-related-errors">Installation related errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">InvalidInstallationIdError</code></td>
      <td>132</td>
      <td>Invalid installation id.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidDeviceTypeError</code></td>
      <td>133</td>
      <td>Invalid device type.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidChannelsArrayError</code></td>
      <td>134</td>
      <td>Invalid channels array value.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MissingRequiredFieldError</code></td>
      <td>135</td>
      <td>Required field is missing.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ChangedImmutableFieldError</code></td>
      <td>136</td>
      <td>An immutable field was changed.</td>
    </tr>
  </tbody>
</table>

<h2 id="purchase-related-errors">Purchase related errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">ReceiptMissing</code></td>
      <td>143</td>
      <td>Product purchase receipt is missing.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidPurchaseReceipt</code></td>
      <td>144</td>
      <td>Product purchase receipt is invalid.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PaymentDisabled</code></td>
      <td>145</td>
      <td>Payment is disabled on this device.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidProductIdentifier</code></td>
      <td>146</td>
      <td>The product identifier is invalid.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ProductNotFoundInAppStore</code></td>
      <td>147</td>
      <td>The product is not found in the App Store.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidServerResponse</code></td>
      <td>148</td>
      <td>The Apple server response is not valid.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ProductDownloadFilesystemError</code></td>
      <td>149</td>
      <td>The product fails to download due to file system error.</td>
    </tr>
  </tbody>
</table>

<h2 id="user-related-errors">User related errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">UsernameMissing</code></td>
      <td>200</td>
      <td>The username is missing or empty.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PasswordMissing</code></td>
      <td>201</td>
      <td>The password is missing or empty.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UsernameTaken</code></td>
      <td>202</td>
      <td>The username has already been taken.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UserEmailTaken</code></td>
      <td>203</td>
      <td>Email has already been used.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UserEmailMissing</code></td>
      <td>204</td>
      <td>The email is missing, and must be specified.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UserWithEmailNotFound</code></td>
      <td>205</td>
      <td>A user with the specified email was not found.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">SessionMissing</code></td>
      <td>206</td>
      <td>A user object without a valid session could not be altered.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MustCreateUserThroughSignup</code></td>
      <td>207</td>
      <td>A user can only be created through signup.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">AccountAlreadyLinked</code></td>
      <td>208</td>
      <td>An account being linked is already linked to another user.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidSessionToken</code></td>
      <td>209</td>
      <td>The device’s session token is no longer valid. The application should ask the user to log in again.</td>
    </tr>
  </tbody>
</table>

<h2 id="linked-services-errors">Linked services errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">LinkedIdMissing</code></td>
      <td>250</td>
      <td>A user cannot be linked to an account because that account’s id could not be found.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidLinkedSession</code></td>
      <td>251</td>
      <td>A user with a linked (e.g. Facebook or Twitter) account has an invalid session. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidGeneralAuthData</code></td>
      <td>251</td>
      <td>Invalid auth data value used.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">BadAnonymousID</code></td>
      <td>251</td>
      <td>Anonymous id is not a valid lowercase UUID.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">FacebookBadToken</code></td>
      <td>251</td>
      <td>The supplied Facebook session token is expired or invalid.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">FacebookBadID</code></td>
      <td>251</td>
      <td>A user with a linked Facebook account has an invalid session.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">FacebookWrongAppID</code></td>
      <td>251</td>
      <td>Unacceptable Facebook application id.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TwitterVerificationFailed</code></td>
      <td>251</td>
      <td>Twitter credential verification failed.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TwitterWrongID</code></td>
      <td>251</td>
      <td>Submitted Twitter id does not match the id associated with the submitted access token.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TwitterWrongScreenName</code></td>
      <td>251</td>
      <td>Submitted Twitter handle does not match the handle associated with the submitted access token.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TwitterConnectFailure</code></td>
      <td>251</td>
      <td>Twitter credentials could not be verified due to problems accessing the Twitter API.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UnsupportedService</code></td>
      <td>252</td>
      <td>A service being linked (e.g. Facebook or Twitter) is unsupported. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UsernameSigninDisabled</code></td>
      <td>252</td>
      <td>Authentication by username and password is not supported for this application. Check your Parse app’s authentication settings.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">AnonymousSigninDisabled</code></td>
      <td>252</td>
      <td>Anonymous users are not supported for this application. Check your Parse app’s authentication settings.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">FacebookSigninDisabled</code></td>
      <td>252</td>
      <td>Authentication by Facebook is not supported for this application. Check your Parse app’s authentication settings.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TwitterSigninDisabled</code></td>
      <td>252</td>
      <td>Authentication by Twitter is not supported for this application. Check your Parse app’s authentication settings.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InvalidAuthDataError</code></td>
      <td>253</td>
      <td>An invalid authData value was passed. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">LinkingNotSupportedError</code></td>
      <td>999</td>
      <td>Linking to an external account not supported yet with signup_or_login. Use update instead.</td>
    </tr>
  </tbody>
</table>

<h2 id="client-only-errors">Client-only errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">ConnectionFailed</code></td>
      <td>100</td>
      <td>The connection to the Parse servers failed.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">AggregateError</code></td>
      <td>600</td>
      <td>There were multiple errors. Aggregate errors have an “errors” property, which is an array of error objects with more detail about each error that occurred.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">FileReadError </code></td>
      <td>601</td>
      <td>Unable to read input for a Parse File on the client.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">XDomainRequest</code></td>
      <td>602</td>
      <td>A real error code is unavailable because we had to use an XDomainRequest object to allow CORS requests in Internet Explorer, which strips the body from HTTP responses that have a non-2XX status code.</td>
    </tr>
  </tbody>
</table>

<h2 id="operational-issues">Operational issues</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">RequestTimeout</code></td>
      <td>124</td>
      <td>The request was slow and timed out. Typically this indicates that the request is too expensive to run. You may see this when a Cloud function did not finish before timing out, or when a <code class="highlighter-rouge">Parse.Cloud.httpRequest</code> connection times out.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InefficientQueryError</code></td>
      <td>154</td>
      <td>An inefficient query was rejected by the server. Refer to the Performance Guide and slow query log.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">RequestLimitExceeded</code></td>
      <td>155</td>
      <td>This application has exceeded its request limit (legacy Parse.com apps only).</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TemporaryRejectionError</code></td>
      <td>159</td>
      <td>An application’s requests are temporary rejected by the server (legacy Parse.com apps only).</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DatabaseNotMigratedError</code></td>
      <td>428</td>
      <td>You should migrate your database as soon as possible (legacy Parse.com apps only).</td>
    </tr>
  </tbody>
</table>

<h2 id="other-issues">Other issues</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">OtherCause</code></td>
      <td>-1</td>
      <td>An unknown error or an error unrelated to Parse occurred.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">InternalServerError</code></td>
      <td>1</td>
      <td>Internal server error. No information available.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ServiceUnavailable</code></td>
      <td>2</td>
      <td>The service is currently unavailable.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ClientDisconnected</code></td>
      <td>4</td>
      <td>Connection failure.</td>
    </tr>
  </tbody>
</table>


                    

<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parseplatform/docs/tree/gh-pages/_includes/unity">Edit this section.</a></span>
	<hr/>
</div>

                  
                </div>

              </div>
          		<!-- footer goes here -->
            </div>
          </div><!-- end content grid col -->
        </div><!-- end .guide > .grid-container -->
      </div><!-- /.content__wrapper -->
    </div><!-- /.site__content -->
  </div><!-- /.site__wrapper -->

  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/highlight.min.js"></script>
  <script src="/docs/assets/js/bundle.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
    apiKey: 'c7f5661ba53e2e3c1c3752696362209e',
    indexName: 'parse',
    inputSelector: '#algolia-doc-search',
    algoliaOptions: { 'facetFilters': ["tags:unity"] }, // android, arduino, cloudcode, dotnet, embedded_c, ios, js, macos, parse-server, php, rest, unity
    debug: false // Set debug to true if you want to inspect the dropdown
  });
  </script>
</body>

</html>
